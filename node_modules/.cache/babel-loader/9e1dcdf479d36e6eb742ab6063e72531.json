{"ast":null,"code":"/**\n * jscolor - JavaScript Color Picker\n *\n * @link    http://jscolor.com\n * @license For open source use: GPLv3\n *          For commercial use: JSColor Commercial License\n * @author  Jan Odvarko - East Desire\n * @version 2.4.6\n *\n * See usage examples at http://jscolor.com/examples/\n */\n(function (global, factory) {\n  'use strict';\n\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    // Export jscolor as a module\n    module.exports = global.document ? factory(global) : function (win) {\n      if (!win.document) {\n        throw new Error('jscolor needs a window with document');\n      }\n\n      return factory(win);\n    };\n    return;\n  } // Default use (no module export)\n\n\n  factory(global);\n})(typeof window !== 'undefined' ? window : this, function (window) {\n  // BEGIN factory\n  // BEGIN jscolor code\n  'use strict';\n\n  var jscolor = function () {\n    // BEGIN jscolor\n    var jsc = {\n      initialized: false,\n      instances: [],\n      // created instances of jscolor\n      readyQueue: [],\n      // functions waiting to be called after init\n      register: function register() {\n        if (typeof window !== 'undefined' && window.document) {\n          window.document.addEventListener('DOMContentLoaded', jsc.pub.init, false);\n        }\n      },\n      installBySelector: function installBySelector(selector, rootNode) {\n        rootNode = rootNode ? jsc.node(rootNode) : window.document;\n\n        if (!rootNode) {\n          throw new Error('Missing root node');\n        }\n\n        var elms = rootNode.querySelectorAll(selector); // for backward compatibility with DEPRECATED installation/configuration using className\n\n        var matchClass = new RegExp('(^|\\\\s)(' + jsc.pub.lookupClass + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\n        for (var i = 0; i < elms.length; i += 1) {\n          if (elms[i].jscolor && elms[i].jscolor instanceof jsc.pub) {\n            continue; // jscolor already installed on this element\n          }\n\n          if (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color' && jsc.isColorAttrSupported) {\n            continue; // skips inputs of type 'color' if supported by the browser\n          }\n\n          var dataOpts, m;\n\n          if ((dataOpts = jsc.getDataAttr(elms[i], 'jscolor')) !== null || elms[i].className && (m = elms[i].className.match(matchClass)) // installation using className (DEPRECATED)\n          ) {\n            var targetElm = elms[i];\n            var optsStr = '';\n\n            if (dataOpts !== null) {\n              optsStr = dataOpts;\n            } else if (m) {\n              // installation using className (DEPRECATED)\n              console.warn('Installation using class name is DEPRECATED. Use data-jscolor=\"\" attribute instead.' + jsc.docsRef);\n\n              if (m[4]) {\n                optsStr = m[4];\n              }\n            }\n\n            var opts = null;\n\n            if (optsStr.trim()) {\n              try {\n                opts = jsc.parseOptionsStr(optsStr);\n              } catch (e) {\n                console.warn(e + '\\n' + optsStr);\n              }\n            }\n\n            try {\n              new jsc.pub(targetElm, opts);\n            } catch (e) {\n              console.warn(e);\n            }\n          }\n        }\n      },\n      parseOptionsStr: function parseOptionsStr(str) {\n        var opts = null;\n\n        try {\n          opts = JSON.parse(str);\n        } catch (eParse) {\n          if (!jsc.pub.looseJSON) {\n            throw new Error('Could not parse jscolor options as JSON: ' + eParse);\n          } else {\n            // loose JSON syntax is enabled -> try to evaluate the options string as JavaScript object\n            try {\n              opts = new Function('var opts = (' + str + '); return typeof opts === \"object\" ? opts : {};')();\n            } catch (eEval) {\n              throw new Error('Could not evaluate jscolor options: ' + eEval);\n            }\n          }\n        }\n\n        return opts;\n      },\n      getInstances: function getInstances() {\n        var inst = [];\n\n        for (var i = 0; i < jsc.instances.length; i += 1) {\n          // if the targetElement still exists, the instance is considered \"alive\"\n          if (jsc.instances[i] && jsc.instances[i].targetElement) {\n            inst.push(jsc.instances[i]);\n          }\n        }\n\n        return inst;\n      },\n      createEl: function createEl(tagName) {\n        var el = window.document.createElement(tagName);\n        jsc.setData(el, 'gui', true);\n        return el;\n      },\n      node: function node(nodeOrSelector) {\n        if (!nodeOrSelector) {\n          return null;\n        }\n\n        if (typeof nodeOrSelector === 'string') {\n          // query selector\n          var sel = nodeOrSelector;\n          var el = null;\n\n          try {\n            el = window.document.querySelector(sel);\n          } catch (e) {\n            console.warn(e);\n            return null;\n          }\n\n          if (!el) {\n            console.warn('No element matches the selector: %s', sel);\n          }\n\n          return el;\n        }\n\n        if (jsc.isNode(nodeOrSelector)) {\n          // DOM node\n          return nodeOrSelector;\n        }\n\n        console.warn('Invalid node of type %s: %s', typeof nodeOrSelector, nodeOrSelector);\n        return null;\n      },\n      // See https://stackoverflow.com/questions/384286/\n      isNode: function isNode(val) {\n        if (typeof Node === 'object') {\n          return val instanceof Node;\n        }\n\n        return val && typeof val === 'object' && typeof val.nodeType === 'number' && typeof val.nodeName === 'string';\n      },\n      nodeName: function nodeName(node) {\n        if (node && node.nodeName) {\n          return node.nodeName.toLowerCase();\n        }\n\n        return false;\n      },\n      removeChildren: function removeChildren(node) {\n        while (node.firstChild) {\n          node.removeChild(node.firstChild);\n        }\n      },\n      isTextInput: function isTextInput(el) {\n        return el && jsc.nodeName(el) === 'input' && el.type.toLowerCase() === 'text';\n      },\n      isButton: function isButton(el) {\n        if (!el) {\n          return false;\n        }\n\n        var n = jsc.nodeName(el);\n        return n === 'button' || n === 'input' && ['button', 'submit', 'reset'].indexOf(el.type.toLowerCase()) > -1;\n      },\n      isButtonEmpty: function isButtonEmpty(el) {\n        switch (jsc.nodeName(el)) {\n          case 'input':\n            return !el.value || el.value.trim() === '';\n\n          case 'button':\n            return el.textContent.trim() === '';\n        }\n\n        return null; // could not determine element's text\n      },\n      // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n      isPassiveEventSupported: function () {\n        var supported = false;\n\n        try {\n          var opts = Object.defineProperty({}, 'passive', {\n            get: function get() {\n              supported = true;\n            }\n          });\n          window.addEventListener('testPassive', null, opts);\n          window.removeEventListener('testPassive', null, opts);\n        } catch (e) {}\n\n        return supported;\n      }(),\n      isColorAttrSupported: function () {\n        var elm = window.document.createElement('input');\n\n        if (elm.setAttribute) {\n          elm.setAttribute('type', 'color');\n\n          if (elm.type.toLowerCase() == 'color') {\n            return true;\n          }\n        }\n\n        return false;\n      }(),\n      dataProp: '_data_jscolor',\n      // usage:\n      //   setData(obj, prop, value)\n      //   setData(obj, {prop:value, ...})\n      //\n      setData: function setData() {\n        var obj = arguments[0];\n\n        if (arguments.length === 3) {\n          // setting a single property\n          var data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : obj[jsc.dataProp] = {};\n          var prop = arguments[1];\n          var value = arguments[2];\n          data[prop] = value;\n          return true;\n        } else if (arguments.length === 2 && typeof arguments[1] === 'object') {\n          // setting multiple properties\n          var data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : obj[jsc.dataProp] = {};\n          var map = arguments[1];\n\n          for (var prop in map) {\n            if (map.hasOwnProperty(prop)) {\n              data[prop] = map[prop];\n            }\n          }\n\n          return true;\n        }\n\n        throw new Error('Invalid arguments');\n      },\n      // usage:\n      //   removeData(obj, prop, [prop...])\n      //\n      removeData: function removeData() {\n        var obj = arguments[0];\n\n        if (!obj.hasOwnProperty(jsc.dataProp)) {\n          return true; // data object does not exist\n        }\n\n        for (var i = 1; i < arguments.length; i += 1) {\n          var prop = arguments[i];\n          delete obj[jsc.dataProp][prop];\n        }\n\n        return true;\n      },\n      getData: function getData(obj, prop, setDefault) {\n        if (!obj.hasOwnProperty(jsc.dataProp)) {\n          // data object does not exist\n          if (setDefault !== undefined) {\n            obj[jsc.dataProp] = {}; // create data object\n          } else {\n            return undefined; // no value to return\n          }\n        }\n\n        var data = obj[jsc.dataProp];\n\n        if (!data.hasOwnProperty(prop) && setDefault !== undefined) {\n          data[prop] = setDefault;\n        }\n\n        return data[prop];\n      },\n      getDataAttr: function getDataAttr(el, name) {\n        var attrName = 'data-' + name;\n        var attrValue = el.getAttribute(attrName);\n        return attrValue;\n      },\n      setDataAttr: function setDataAttr(el, name, value) {\n        var attrName = 'data-' + name;\n        el.setAttribute(attrName, value);\n      },\n      _attachedGroupEvents: {},\n      attachGroupEvent: function attachGroupEvent(groupName, el, evnt, func) {\n        if (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n          jsc._attachedGroupEvents[groupName] = [];\n        }\n\n        jsc._attachedGroupEvents[groupName].push([el, evnt, func]);\n\n        el.addEventListener(evnt, func, false);\n      },\n      detachGroupEvents: function detachGroupEvents(groupName) {\n        if (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n          for (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\n            var evt = jsc._attachedGroupEvents[groupName][i];\n            evt[0].removeEventListener(evt[1], evt[2], false);\n          }\n\n          delete jsc._attachedGroupEvents[groupName];\n        }\n      },\n      preventDefault: function preventDefault(e) {\n        if (e.preventDefault) {\n          e.preventDefault();\n        }\n\n        e.returnValue = false;\n      },\n      captureTarget: function captureTarget(target) {\n        // IE\n        if (target.setCapture) {\n          jsc._capturedTarget = target;\n\n          jsc._capturedTarget.setCapture();\n        }\n      },\n      releaseTarget: function releaseTarget() {\n        // IE\n        if (jsc._capturedTarget) {\n          jsc._capturedTarget.releaseCapture();\n\n          jsc._capturedTarget = null;\n        }\n      },\n      triggerEvent: function triggerEvent(el, eventName, bubbles, cancelable) {\n        if (!el) {\n          return;\n        }\n\n        var ev = null;\n\n        if (typeof Event === 'function') {\n          ev = new Event(eventName, {\n            bubbles: bubbles,\n            cancelable: cancelable\n          });\n        } else {\n          // IE\n          ev = window.document.createEvent('Event');\n          ev.initEvent(eventName, bubbles, cancelable);\n        }\n\n        if (!ev) {\n          return false;\n        } // so that we know that the event was triggered internally\n\n\n        jsc.setData(ev, 'internal', true);\n        el.dispatchEvent(ev);\n        return true;\n      },\n      triggerInputEvent: function triggerInputEvent(el, eventName, bubbles, cancelable) {\n        if (!el) {\n          return;\n        }\n\n        if (jsc.isTextInput(el)) {\n          jsc.triggerEvent(el, eventName, bubbles, cancelable);\n        }\n      },\n      eventKey: function eventKey(ev) {\n        var keys = {\n          9: 'Tab',\n          13: 'Enter',\n          27: 'Escape'\n        };\n\n        if (typeof ev.code === 'string') {\n          return ev.code;\n        } else if (ev.keyCode !== undefined && keys.hasOwnProperty(ev.keyCode)) {\n          return keys[ev.keyCode];\n        }\n\n        return null;\n      },\n      strList: function strList(str) {\n        if (!str) {\n          return [];\n        }\n\n        return str.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n      },\n      // The className parameter (str) can only contain a single class name\n      hasClass: function hasClass(elm, className) {\n        if (!className) {\n          return false;\n        }\n\n        if (elm.classList !== undefined) {\n          return elm.classList.contains(className);\n        } // polyfill\n\n\n        return -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\n      },\n      // The className parameter (str) can contain multiple class names separated by whitespace\n      addClass: function addClass(elm, className) {\n        var classNames = jsc.strList(className);\n\n        if (elm.classList !== undefined) {\n          for (var i = 0; i < classNames.length; i += 1) {\n            elm.classList.add(classNames[i]);\n          }\n\n          return;\n        } // polyfill\n\n\n        for (var i = 0; i < classNames.length; i += 1) {\n          if (!jsc.hasClass(elm, classNames[i])) {\n            elm.className += (elm.className ? ' ' : '') + classNames[i];\n          }\n        }\n      },\n      // The className parameter (str) can contain multiple class names separated by whitespace\n      removeClass: function removeClass(elm, className) {\n        var classNames = jsc.strList(className);\n\n        if (elm.classList !== undefined) {\n          for (var i = 0; i < classNames.length; i += 1) {\n            elm.classList.remove(classNames[i]);\n          }\n\n          return;\n        } // polyfill\n\n\n        for (var i = 0; i < classNames.length; i += 1) {\n          var repl = new RegExp('^\\\\s*' + classNames[i] + '\\\\s*|' + '\\\\s*' + classNames[i] + '\\\\s*$|' + '\\\\s+' + classNames[i] + '(\\\\s+)', 'g');\n          elm.className = elm.className.replace(repl, '$1');\n        }\n      },\n      getCompStyle: function getCompStyle(elm) {\n        var compStyle = window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle; // Note: In Firefox, getComputedStyle returns null in a hidden iframe,\n        // that's why we need to check if the returned value is non-empty\n\n        if (!compStyle) {\n          return {};\n        }\n\n        return compStyle;\n      },\n      // Note:\n      //   Setting a property to NULL reverts it to the state before it was first set\n      //   with the 'reversible' flag enabled\n      //\n      setStyle: function setStyle(elm, styles, important, reversible) {\n        // using '' for standard priority (IE10 apparently doesn't like value undefined)\n        var priority = important ? 'important' : '';\n        var origStyle = null;\n\n        for (var prop in styles) {\n          if (styles.hasOwnProperty(prop)) {\n            var setVal = null;\n\n            if (styles[prop] === null) {\n              // reverting a property value\n              if (!origStyle) {\n                // get the original style object, but dont't try to create it if it doesn't exist\n                origStyle = jsc.getData(elm, 'origStyle');\n              }\n\n              if (origStyle && origStyle.hasOwnProperty(prop)) {\n                // we have property's original value -> use it\n                setVal = origStyle[prop];\n              }\n            } else {\n              // setting a property value\n              if (reversible) {\n                if (!origStyle) {\n                  // get the original style object and if it doesn't exist, create it\n                  origStyle = jsc.getData(elm, 'origStyle', {});\n                }\n\n                if (!origStyle.hasOwnProperty(prop)) {\n                  // original property value not yet stored -> store it\n                  origStyle[prop] = elm.style[prop];\n                }\n              }\n\n              setVal = styles[prop];\n            }\n\n            if (setVal !== null) {\n              elm.style.setProperty(prop, setVal, priority);\n            }\n          }\n        }\n      },\n      hexColor: function hexColor(r, g, b) {\n        return '#' + (('0' + Math.round(r).toString(16)).substr(-2) + ('0' + Math.round(g).toString(16)).substr(-2) + ('0' + Math.round(b).toString(16)).substr(-2)).toUpperCase();\n      },\n      hexaColor: function hexaColor(r, g, b, a) {\n        return '#' + (('0' + Math.round(r).toString(16)).substr(-2) + ('0' + Math.round(g).toString(16)).substr(-2) + ('0' + Math.round(b).toString(16)).substr(-2) + ('0' + Math.round(a * 255).toString(16)).substr(-2)).toUpperCase();\n      },\n      rgbColor: function rgbColor(r, g, b) {\n        return 'rgb(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ')';\n      },\n      rgbaColor: function rgbaColor(r, g, b, a) {\n        return 'rgba(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ',' + Math.round((a === undefined || a === null ? 1 : a) * 100) / 100 + ')';\n      },\n      linearGradient: function () {\n        function getFuncName() {\n          var stdName = 'linear-gradient';\n          var prefixes = ['', '-webkit-', '-moz-', '-o-', '-ms-'];\n          var helper = window.document.createElement('div');\n\n          for (var i = 0; i < prefixes.length; i += 1) {\n            var tryFunc = prefixes[i] + stdName;\n            var tryVal = tryFunc + '(to right, rgba(0,0,0,0), rgba(0,0,0,0))';\n            helper.style.background = tryVal;\n\n            if (helper.style.background) {\n              // CSS background successfully set -> function name is supported\n              return tryFunc;\n            }\n          }\n\n          return stdName; // fallback to standard 'linear-gradient' without vendor prefix\n        }\n\n        var funcName = getFuncName();\n        return function () {\n          return funcName + '(' + Array.prototype.join.call(arguments, ', ') + ')';\n        };\n      }(),\n      setBorderRadius: function setBorderRadius(elm, value) {\n        jsc.setStyle(elm, {\n          'border-radius': value || '0'\n        });\n      },\n      setBoxShadow: function setBoxShadow(elm, value) {\n        jsc.setStyle(elm, {\n          'box-shadow': value || 'none'\n        });\n      },\n      getElementPos: function getElementPos(e, relativeToViewport) {\n        var x = 0,\n            y = 0;\n        var rect = e.getBoundingClientRect();\n        x = rect.left;\n        y = rect.top;\n\n        if (!relativeToViewport) {\n          var viewPos = jsc.getViewPos();\n          x += viewPos[0];\n          y += viewPos[1];\n        }\n\n        return [x, y];\n      },\n      getElementSize: function getElementSize(e) {\n        return [e.offsetWidth, e.offsetHeight];\n      },\n      // get pointer's X/Y coordinates relative to viewport\n      getAbsPointerPos: function getAbsPointerPos(e) {\n        var x = 0,\n            y = 0;\n\n        if (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n          // touch devices\n          x = e.changedTouches[0].clientX;\n          y = e.changedTouches[0].clientY;\n        } else if (typeof e.clientX === 'number') {\n          x = e.clientX;\n          y = e.clientY;\n        }\n\n        return {\n          x: x,\n          y: y\n        };\n      },\n      // get pointer's X/Y coordinates relative to target element\n      getRelPointerPos: function getRelPointerPos(e) {\n        var target = e.target || e.srcElement;\n        var targetRect = target.getBoundingClientRect();\n        var x = 0,\n            y = 0;\n        var clientX = 0,\n            clientY = 0;\n\n        if (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n          // touch devices\n          clientX = e.changedTouches[0].clientX;\n          clientY = e.changedTouches[0].clientY;\n        } else if (typeof e.clientX === 'number') {\n          clientX = e.clientX;\n          clientY = e.clientY;\n        }\n\n        x = clientX - targetRect.left;\n        y = clientY - targetRect.top;\n        return {\n          x: x,\n          y: y\n        };\n      },\n      getViewPos: function getViewPos() {\n        var doc = window.document.documentElement;\n        return [(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0), (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)];\n      },\n      getViewSize: function getViewSize() {\n        var doc = window.document.documentElement;\n        return [window.innerWidth || doc.clientWidth, window.innerHeight || doc.clientHeight];\n      },\n      // r: 0-255\n      // g: 0-255\n      // b: 0-255\n      //\n      // returns: [ 0-360, 0-100, 0-100 ]\n      //\n      RGB_HSV: function RGB_HSV(r, g, b) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var n = Math.min(Math.min(r, g), b);\n        var v = Math.max(Math.max(r, g), b);\n        var m = v - n;\n\n        if (m === 0) {\n          return [null, 0, 100 * v];\n        }\n\n        var h = r === n ? 3 + (b - g) / m : g === n ? 5 + (r - b) / m : 1 + (g - r) / m;\n        return [60 * (h === 6 ? 0 : h), 100 * (m / v), 100 * v];\n      },\n      // h: 0-360\n      // s: 0-100\n      // v: 0-100\n      //\n      // returns: [ 0-255, 0-255, 0-255 ]\n      //\n      HSV_RGB: function HSV_RGB(h, s, v) {\n        var u = 255 * (v / 100);\n\n        if (h === null) {\n          return [u, u, u];\n        }\n\n        h /= 60;\n        s /= 100;\n        var i = Math.floor(h);\n        var f = i % 2 ? h - i : 1 - (h - i);\n        var m = u * (1 - s);\n        var n = u * (1 - s * f);\n\n        switch (i) {\n          case 6:\n          case 0:\n            return [u, n, m];\n\n          case 1:\n            return [n, u, m];\n\n          case 2:\n            return [m, u, n];\n\n          case 3:\n            return [m, n, u];\n\n          case 4:\n            return [n, m, u];\n\n          case 5:\n            return [u, m, n];\n        }\n      },\n      parseColorString: function parseColorString(str) {\n        var ret = {\n          rgba: null,\n          format: null // 'hex' | 'hexa' | 'rgb' | 'rgba'\n\n        };\n        var m;\n\n        if (m = str.match(/^\\W*([0-9A-F]{3,8})\\W*$/i)) {\n          // HEX notation\n          if (m[1].length === 8) {\n            // 8-char notation (= with alpha)\n            ret.format = 'hexa';\n            ret.rgba = [parseInt(m[1].substr(0, 2), 16), parseInt(m[1].substr(2, 2), 16), parseInt(m[1].substr(4, 2), 16), parseInt(m[1].substr(6, 2), 16) / 255];\n          } else if (m[1].length === 6) {\n            // 6-char notation\n            ret.format = 'hex';\n            ret.rgba = [parseInt(m[1].substr(0, 2), 16), parseInt(m[1].substr(2, 2), 16), parseInt(m[1].substr(4, 2), 16), null];\n          } else if (m[1].length === 3) {\n            // 3-char notation\n            ret.format = 'hex';\n            ret.rgba = [parseInt(m[1].charAt(0) + m[1].charAt(0), 16), parseInt(m[1].charAt(1) + m[1].charAt(1), 16), parseInt(m[1].charAt(2) + m[1].charAt(2), 16), null];\n          } else {\n            return false;\n          }\n\n          return ret;\n        }\n\n        if (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\n          // rgb(...) or rgba(...) notation\n          var par = m[1].split(',');\n          var re = /^\\s*(\\d+|\\d*\\.\\d+|\\d+\\.\\d*)\\s*$/;\n          var mR, mG, mB, mA;\n\n          if (par.length >= 3 && (mR = par[0].match(re)) && (mG = par[1].match(re)) && (mB = par[2].match(re))) {\n            ret.format = 'rgb';\n            ret.rgba = [parseFloat(mR[1]) || 0, parseFloat(mG[1]) || 0, parseFloat(mB[1]) || 0, null];\n\n            if (par.length >= 4 && (mA = par[3].match(re))) {\n              ret.format = 'rgba';\n              ret.rgba[3] = parseFloat(mA[1]) || 0;\n            }\n\n            return ret;\n          }\n        }\n\n        return false;\n      },\n      parsePaletteValue: function parsePaletteValue(mixed) {\n        var vals = [];\n\n        if (typeof mixed === 'string') {\n          // input is a string of space separated color values\n          // rgb() and rgba() may contain spaces too, so let's find all color values by regex\n          mixed.replace(/#[0-9A-F]{3}([0-9A-F]{3})?|rgba?\\(([^)]*)\\)/ig, function (val) {\n            vals.push(val);\n          });\n        } else if (Array.isArray(mixed)) {\n          // input is an array of color values\n          vals = mixed;\n        } // convert all values into uniform color format\n\n\n        var colors = [];\n\n        for (var i = 0; i < vals.length; i++) {\n          var color = jsc.parseColorString(vals[i]);\n\n          if (color) {\n            colors.push(color);\n          }\n        }\n\n        return colors;\n      },\n      containsTranparentColor: function containsTranparentColor(colors) {\n        for (var i = 0; i < colors.length; i++) {\n          var a = colors[i].rgba[3];\n\n          if (a !== null && a < 1.0) {\n            return true;\n          }\n        }\n\n        return false;\n      },\n      isAlphaFormat: function isAlphaFormat(format) {\n        switch (format.toLowerCase()) {\n          case 'hexa':\n          case 'rgba':\n            return true;\n        }\n\n        return false;\n      },\n      // Canvas scaling for retina displays\n      //\n      // adapted from https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n      //\n      scaleCanvasForHighDPR: function scaleCanvasForHighDPR(canvas) {\n        var dpr = window.devicePixelRatio || 1;\n        canvas.width *= dpr;\n        canvas.height *= dpr;\n        var ctx = canvas.getContext('2d');\n        ctx.scale(dpr, dpr);\n      },\n      genColorPreviewCanvas: function genColorPreviewCanvas(color, separatorPos, specWidth, scaleForHighDPR) {\n        var sepW = Math.round(jsc.pub.previewSeparator.length);\n        var sqSize = jsc.pub.chessboardSize;\n        var sqColor1 = jsc.pub.chessboardColor1;\n        var sqColor2 = jsc.pub.chessboardColor2;\n        var cWidth = specWidth ? specWidth : sqSize * 2;\n        var cHeight = sqSize * 2;\n        var canvas = jsc.createEl('canvas');\n        var ctx = canvas.getContext('2d');\n        canvas.width = cWidth;\n        canvas.height = cHeight;\n\n        if (scaleForHighDPR) {\n          jsc.scaleCanvasForHighDPR(canvas);\n        } // transparency chessboard - background\n\n\n        ctx.fillStyle = sqColor1;\n        ctx.fillRect(0, 0, cWidth, cHeight); // transparency chessboard - squares\n\n        ctx.fillStyle = sqColor2;\n\n        for (var x = 0; x < cWidth; x += sqSize * 2) {\n          ctx.fillRect(x, 0, sqSize, sqSize);\n          ctx.fillRect(x + sqSize, sqSize, sqSize, sqSize);\n        }\n\n        if (color) {\n          // actual color in foreground\n          ctx.fillStyle = color;\n          ctx.fillRect(0, 0, cWidth, cHeight);\n        }\n\n        var start = null;\n\n        switch (separatorPos) {\n          case 'left':\n            start = 0;\n            ctx.clearRect(0, 0, sepW / 2, cHeight);\n            break;\n\n          case 'right':\n            start = cWidth - sepW;\n            ctx.clearRect(cWidth - sepW / 2, 0, sepW / 2, cHeight);\n            break;\n        }\n\n        if (start !== null) {\n          ctx.lineWidth = 1;\n\n          for (var i = 0; i < jsc.pub.previewSeparator.length; i += 1) {\n            ctx.beginPath();\n            ctx.strokeStyle = jsc.pub.previewSeparator[i];\n            ctx.moveTo(0.5 + start + i, 0);\n            ctx.lineTo(0.5 + start + i, cHeight);\n            ctx.stroke();\n          }\n        }\n\n        return {\n          canvas: canvas,\n          width: cWidth,\n          height: cHeight\n        };\n      },\n      // if position or width is not set => fill the entire element (0%-100%)\n      genColorPreviewGradient: function genColorPreviewGradient(color, position, width) {\n        var params = [];\n\n        if (position && width) {\n          params = ['to ' + {\n            'left': 'right',\n            'right': 'left'\n          }[position], color + ' 0%', color + ' ' + width + 'px', 'rgba(0,0,0,0) ' + (width + 1) + 'px', 'rgba(0,0,0,0) 100%'];\n        } else {\n          params = ['to right', color + ' 0%', color + ' 100%'];\n        }\n\n        return jsc.linearGradient.apply(this, params);\n      },\n      redrawPosition: function redrawPosition() {\n        if (!jsc.picker || !jsc.picker.owner) {\n          return; // picker is not shown\n        }\n\n        var thisObj = jsc.picker.owner;\n        var tp, vp;\n\n        if (thisObj.fixed) {\n          // Fixed elements are positioned relative to viewport,\n          // therefore we can ignore the scroll offset\n          tp = jsc.getElementPos(thisObj.targetElement, true); // target pos\n\n          vp = [0, 0]; // view pos\n        } else {\n          tp = jsc.getElementPos(thisObj.targetElement); // target pos\n\n          vp = jsc.getViewPos(); // view pos\n        }\n\n        var ts = jsc.getElementSize(thisObj.targetElement); // target size\n\n        var vs = jsc.getViewSize(); // view size\n\n        var pd = jsc.getPickerDims(thisObj);\n        var ps = [pd.borderW, pd.borderH]; // picker outer size\n\n        var a, b, c;\n\n        switch (thisObj.position.toLowerCase()) {\n          case 'left':\n            a = 1;\n            b = 0;\n            c = -1;\n            break;\n\n          case 'right':\n            a = 1;\n            b = 0;\n            c = 1;\n            break;\n\n          case 'top':\n            a = 0;\n            b = 1;\n            c = -1;\n            break;\n\n          default:\n            a = 0;\n            b = 1;\n            c = 1;\n            break;\n        }\n\n        var l = (ts[b] + ps[b]) / 2; // compute picker position\n\n        if (!thisObj.smartPosition) {\n          var pp = [tp[a], tp[b] + ts[b] - l + l * c];\n        } else {\n          var pp = [-vp[a] + tp[a] + ps[a] > vs[a] ? -vp[a] + tp[a] + ts[a] / 2 > vs[a] / 2 && tp[a] + ts[a] - ps[a] >= 0 ? tp[a] + ts[a] - ps[a] : tp[a] : tp[a], -vp[b] + tp[b] + ts[b] + ps[b] - l + l * c > vs[b] ? -vp[b] + tp[b] + ts[b] / 2 > vs[b] / 2 && tp[b] + ts[b] - l - l * c >= 0 ? tp[b] + ts[b] - l - l * c : tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l + l * c >= 0 ? tp[b] + ts[b] - l + l * c : tp[b] + ts[b] - l - l * c];\n        }\n\n        var x = pp[a];\n        var y = pp[b];\n        var positionValue = thisObj.fixed ? 'fixed' : 'absolute';\n        var contractShadow = (pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) && pp[1] + ps[1] < tp[1] + ts[1];\n\n        jsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\n      },\n      _drawPosition: function _drawPosition(thisObj, x, y, positionValue, contractShadow) {\n        var vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\n\n        jsc.picker.wrap.style.position = positionValue;\n        jsc.picker.wrap.style.left = x + 'px';\n        jsc.picker.wrap.style.top = y + 'px';\n        jsc.setBoxShadow(jsc.picker.boxS, thisObj.shadow ? new jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) : null);\n      },\n      getPickerDims: function getPickerDims(thisObj) {\n        var w = 2 * thisObj.controlBorderWidth + thisObj.width;\n        var h = 2 * thisObj.controlBorderWidth + thisObj.height;\n        var sliderSpace = 2 * thisObj.controlBorderWidth + 2 * jsc.getControlPadding(thisObj) + thisObj.sliderSize;\n\n        if (jsc.getSliderChannel(thisObj)) {\n          w += sliderSpace;\n        }\n\n        if (thisObj.hasAlphaChannel()) {\n          w += sliderSpace;\n        }\n\n        var pal = jsc.getPaletteDims(thisObj, w);\n\n        if (pal.height) {\n          h += pal.height + thisObj.padding;\n        }\n\n        if (thisObj.closeButton) {\n          h += 2 * thisObj.controlBorderWidth + thisObj.padding + thisObj.buttonHeight;\n        }\n\n        var pW = w + 2 * thisObj.padding;\n        var pH = h + 2 * thisObj.padding;\n        return {\n          contentW: w,\n          contentH: h,\n          paddedW: pW,\n          paddedH: pH,\n          borderW: pW + 2 * thisObj.borderWidth,\n          borderH: pH + 2 * thisObj.borderWidth,\n          palette: pal\n        };\n      },\n      getPaletteDims: function getPaletteDims(thisObj, width) {\n        var cols = 0,\n            rows = 0,\n            cellW = 0,\n            cellH = 0,\n            height = 0;\n        var sampleCount = thisObj._palette ? thisObj._palette.length : 0;\n\n        if (sampleCount) {\n          cols = thisObj.paletteCols;\n          rows = cols > 0 ? Math.ceil(sampleCount / cols) : 0; // color sample's dimensions (includes border)\n\n          cellW = Math.max(1, Math.floor((width - (cols - 1) * thisObj.paletteSpacing) / cols));\n          cellH = thisObj.paletteHeight ? Math.min(thisObj.paletteHeight, cellW) : cellW;\n        }\n\n        if (rows) {\n          height = rows * cellH + (rows - 1) * thisObj.paletteSpacing;\n        }\n\n        return {\n          cols: cols,\n          rows: rows,\n          cellW: cellW,\n          cellH: cellH,\n          width: width,\n          height: height\n        };\n      },\n      getControlPadding: function getControlPadding(thisObj) {\n        return Math.max(thisObj.padding / 2, 2 * thisObj.pointerBorderWidth + thisObj.pointerThickness - thisObj.controlBorderWidth);\n      },\n      getPadYChannel: function getPadYChannel(thisObj) {\n        switch (thisObj.mode.charAt(1).toLowerCase()) {\n          case 'v':\n            return 'v';\n            break;\n        }\n\n        return 's';\n      },\n      getSliderChannel: function getSliderChannel(thisObj) {\n        if (thisObj.mode.length > 2) {\n          switch (thisObj.mode.charAt(2).toLowerCase()) {\n            case 's':\n              return 's';\n              break;\n\n            case 'v':\n              return 'v';\n              break;\n          }\n        }\n\n        return null;\n      },\n      // calls function specified in picker's property\n      triggerCallback: function triggerCallback(thisObj, prop) {\n        if (!thisObj[prop]) {\n          return; // callback func not specified\n        }\n\n        var callback = null;\n\n        if (typeof thisObj[prop] === 'string') {\n          // string with code\n          try {\n            callback = new Function(thisObj[prop]);\n          } catch (e) {\n            console.error(e);\n          }\n        } else {\n          // function\n          callback = thisObj[prop];\n        }\n\n        if (callback) {\n          callback.call(thisObj);\n        }\n      },\n      // Triggers a color change related event(s) on all picker instances.\n      // It is possible to specify multiple events separated with a space.\n      triggerGlobal: function triggerGlobal(eventNames) {\n        var inst = jsc.getInstances();\n\n        for (var i = 0; i < inst.length; i += 1) {\n          inst[i].trigger(eventNames);\n        }\n      },\n      _pointerMoveEvent: {\n        mouse: 'mousemove',\n        touch: 'touchmove'\n      },\n      _pointerEndEvent: {\n        mouse: 'mouseup',\n        touch: 'touchend'\n      },\n      _pointerOrigin: null,\n      _capturedTarget: null,\n      onDocumentKeyUp: function onDocumentKeyUp(e) {\n        if (['Tab', 'Escape'].indexOf(jsc.eventKey(e)) !== -1) {\n          if (jsc.picker && jsc.picker.owner) {\n            jsc.picker.owner.tryHide();\n          }\n        }\n      },\n      onWindowResize: function onWindowResize(e) {\n        jsc.redrawPosition();\n      },\n      onWindowScroll: function onWindowScroll(e) {\n        jsc.redrawPosition();\n      },\n      onParentScroll: function onParentScroll(e) {\n        // hide the picker when one of the parent elements is scrolled\n        if (jsc.picker && jsc.picker.owner) {\n          jsc.picker.owner.tryHide();\n        }\n      },\n      onDocumentMouseDown: function onDocumentMouseDown(e) {\n        var target = e.target || e.srcElement;\n\n        if (target.jscolor && target.jscolor instanceof jsc.pub) {\n          // clicked targetElement -> show picker\n          if (target.jscolor.showOnClick && !target.disabled) {\n            target.jscolor.show();\n          }\n        } else if (jsc.getData(target, 'gui')) {\n          // clicked jscolor's GUI element\n          var control = jsc.getData(target, 'control');\n\n          if (control) {\n            // jscolor's control\n            jsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'mouse');\n          }\n        } else {\n          // mouse is outside the picker's controls -> hide the color picker!\n          if (jsc.picker && jsc.picker.owner) {\n            jsc.picker.owner.tryHide();\n          }\n        }\n      },\n      onPickerTouchStart: function onPickerTouchStart(e) {\n        var target = e.target || e.srcElement;\n\n        if (jsc.getData(target, 'control')) {\n          jsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'touch');\n        }\n      },\n      onControlPointerStart: function onControlPointerStart(e, target, controlName, pointerType) {\n        var thisObj = jsc.getData(target, 'instance');\n        jsc.preventDefault(e);\n        jsc.captureTarget(target);\n\n        var registerDragEvents = function registerDragEvents(doc, offset) {\n          jsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType], jsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\n          jsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType], jsc.onDocumentPointerEnd(e, target, controlName, pointerType));\n        };\n\n        registerDragEvents(window.document, [0, 0]);\n\n        if (window.parent && window.frameElement) {\n          var rect = window.frameElement.getBoundingClientRect();\n          var ofs = [-rect.left, -rect.top];\n          registerDragEvents(window.parent.window.document, ofs);\n        }\n\n        var abs = jsc.getAbsPointerPos(e);\n        var rel = jsc.getRelPointerPos(e);\n        jsc._pointerOrigin = {\n          x: abs.x - rel.x,\n          y: abs.y - rel.y\n        };\n\n        switch (controlName) {\n          case 'pad':\n            // if the value slider is at the bottom, move it up\n            if (jsc.getSliderChannel(thisObj) === 'v' && thisObj.channels.v === 0) {\n              thisObj.fromHSVA(null, null, 100, null);\n            }\n\n            jsc.setPad(thisObj, e, 0, 0);\n            break;\n\n          case 'sld':\n            jsc.setSld(thisObj, e, 0);\n            break;\n\n          case 'asld':\n            jsc.setASld(thisObj, e, 0);\n            break;\n        }\n\n        thisObj.trigger('input');\n      },\n      onDocumentPointerMove: function onDocumentPointerMove(e, target, controlName, pointerType, offset) {\n        return function (e) {\n          var thisObj = jsc.getData(target, 'instance');\n\n          switch (controlName) {\n            case 'pad':\n              jsc.setPad(thisObj, e, offset[0], offset[1]);\n              break;\n\n            case 'sld':\n              jsc.setSld(thisObj, e, offset[1]);\n              break;\n\n            case 'asld':\n              jsc.setASld(thisObj, e, offset[1]);\n              break;\n          }\n\n          thisObj.trigger('input');\n        };\n      },\n      onDocumentPointerEnd: function onDocumentPointerEnd(e, target, controlName, pointerType) {\n        return function (e) {\n          var thisObj = jsc.getData(target, 'instance');\n          jsc.detachGroupEvents('drag');\n          jsc.releaseTarget(); // Always trigger changes AFTER detaching outstanding mouse handlers,\n          // in case some color change that occured in user-defined onChange/onInput handler\n          // intruded into current mouse events\n\n          thisObj.trigger('input');\n          thisObj.trigger('change');\n        };\n      },\n      onPaletteSampleClick: function onPaletteSampleClick(e) {\n        var target = e.currentTarget;\n        var thisObj = jsc.getData(target, 'instance');\n        var color = jsc.getData(target, 'color'); // when format is flexible, use the original format of this color sample\n\n        if (thisObj.format.toLowerCase() === 'any') {\n          thisObj._setFormat(color.format); // adapt format\n\n\n          if (!jsc.isAlphaFormat(thisObj.getFormat())) {\n            color.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\n          }\n        } // if this color doesn't specify alpha, use alpha of 1.0 (if applicable)\n\n\n        if (color.rgba[3] === null) {\n          if (thisObj.paletteSetsAlpha === true || thisObj.paletteSetsAlpha === 'auto' && thisObj._paletteHasTransparency) {\n            color.rgba[3] = 1.0;\n          }\n        }\n\n        thisObj.fromRGBA.apply(thisObj, color.rgba);\n        thisObj.trigger('input');\n        thisObj.trigger('change');\n\n        if (thisObj.hideOnPaletteClick) {\n          thisObj.hide();\n        }\n      },\n      setPad: function setPad(thisObj, e, ofsX, ofsY) {\n        var pointerAbs = jsc.getAbsPointerPos(e);\n        var x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.controlBorderWidth;\n        var y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n        var xVal = x * (360 / (thisObj.width - 1));\n        var yVal = 100 - y * (100 / (thisObj.height - 1));\n\n        switch (jsc.getPadYChannel(thisObj)) {\n          case 's':\n            thisObj.fromHSVA(xVal, yVal, null, null);\n            break;\n\n          case 'v':\n            thisObj.fromHSVA(xVal, null, yVal, null);\n            break;\n        }\n      },\n      setSld: function setSld(thisObj, e, ofsY) {\n        var pointerAbs = jsc.getAbsPointerPos(e);\n        var y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n        var yVal = 100 - y * (100 / (thisObj.height - 1));\n\n        switch (jsc.getSliderChannel(thisObj)) {\n          case 's':\n            thisObj.fromHSVA(null, yVal, null, null);\n            break;\n\n          case 'v':\n            thisObj.fromHSVA(null, null, yVal, null);\n            break;\n        }\n      },\n      setASld: function setASld(thisObj, e, ofsY) {\n        var pointerAbs = jsc.getAbsPointerPos(e);\n        var y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n        var yVal = 1.0 - y * (1.0 / (thisObj.height - 1));\n\n        if (yVal < 1.0) {\n          // if format is flexible and the current format doesn't support alpha, switch to a suitable one\n          var fmt = thisObj.getFormat();\n\n          if (thisObj.format.toLowerCase() === 'any' && !jsc.isAlphaFormat(fmt)) {\n            thisObj._setFormat(fmt === 'hex' ? 'hexa' : 'rgba');\n          }\n        }\n\n        thisObj.fromHSVA(null, null, null, yVal);\n      },\n      createPadCanvas: function createPadCanvas() {\n        var ret = {\n          elm: null,\n          draw: null\n        };\n        var canvas = jsc.createEl('canvas');\n        var ctx = canvas.getContext('2d');\n\n        var drawFunc = function drawFunc(width, height, type) {\n          canvas.width = width;\n          canvas.height = height;\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          var hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n          hGrad.addColorStop(0 / 6, '#F00');\n          hGrad.addColorStop(1 / 6, '#FF0');\n          hGrad.addColorStop(2 / 6, '#0F0');\n          hGrad.addColorStop(3 / 6, '#0FF');\n          hGrad.addColorStop(4 / 6, '#00F');\n          hGrad.addColorStop(5 / 6, '#F0F');\n          hGrad.addColorStop(6 / 6, '#F00');\n          ctx.fillStyle = hGrad;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n          var vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\n          switch (type.toLowerCase()) {\n            case 's':\n              vGrad.addColorStop(0, 'rgba(255,255,255,0)');\n              vGrad.addColorStop(1, 'rgba(255,255,255,1)');\n              break;\n\n            case 'v':\n              vGrad.addColorStop(0, 'rgba(0,0,0,0)');\n              vGrad.addColorStop(1, 'rgba(0,0,0,1)');\n              break;\n          }\n\n          ctx.fillStyle = vGrad;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        };\n\n        ret.elm = canvas;\n        ret.draw = drawFunc;\n        return ret;\n      },\n      createSliderGradient: function createSliderGradient() {\n        var ret = {\n          elm: null,\n          draw: null\n        };\n        var canvas = jsc.createEl('canvas');\n        var ctx = canvas.getContext('2d');\n\n        var drawFunc = function drawFunc(width, height, color1, color2) {\n          canvas.width = width;\n          canvas.height = height;\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          var grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n          grad.addColorStop(0, color1);\n          grad.addColorStop(1, color2);\n          ctx.fillStyle = grad;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        };\n\n        ret.elm = canvas;\n        ret.draw = drawFunc;\n        return ret;\n      },\n      createASliderGradient: function createASliderGradient() {\n        var ret = {\n          elm: null,\n          draw: null\n        };\n        var canvas = jsc.createEl('canvas');\n        var ctx = canvas.getContext('2d');\n\n        var drawFunc = function drawFunc(width, height, color) {\n          canvas.width = width;\n          canvas.height = height;\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          var sqSize = canvas.width / 2;\n          var sqColor1 = jsc.pub.chessboardColor1;\n          var sqColor2 = jsc.pub.chessboardColor2; // dark gray background\n\n          ctx.fillStyle = sqColor1;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n          if (sqSize > 0) {\n            // to avoid infinite loop\n            for (var y = 0; y < canvas.height; y += sqSize * 2) {\n              // light gray squares\n              ctx.fillStyle = sqColor2;\n              ctx.fillRect(0, y, sqSize, sqSize);\n              ctx.fillRect(sqSize, y + sqSize, sqSize, sqSize);\n            }\n          }\n\n          var grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n          grad.addColorStop(0, color);\n          grad.addColorStop(1, 'rgba(0,0,0,0)');\n          ctx.fillStyle = grad;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        };\n\n        ret.elm = canvas;\n        ret.draw = drawFunc;\n        return ret;\n      },\n      BoxShadow: function () {\n        var BoxShadow = function BoxShadow(hShadow, vShadow, blur, spread, color, inset) {\n          this.hShadow = hShadow;\n          this.vShadow = vShadow;\n          this.blur = blur;\n          this.spread = spread;\n          this.color = color;\n          this.inset = !!inset;\n        };\n\n        BoxShadow.prototype.toString = function () {\n          var vals = [Math.round(this.hShadow) + 'px', Math.round(this.vShadow) + 'px', Math.round(this.blur) + 'px', Math.round(this.spread) + 'px', this.color];\n\n          if (this.inset) {\n            vals.push('inset');\n          }\n\n          return vals.join(' ');\n        };\n\n        return BoxShadow;\n      }(),\n      flags: {\n        leaveValue: 1 << 0,\n        leaveAlpha: 1 << 1,\n        leavePreview: 1 << 2\n      },\n      enumOpts: {\n        format: ['auto', 'any', 'hex', 'hexa', 'rgb', 'rgba'],\n        previewPosition: ['left', 'right'],\n        mode: ['hsv', 'hvs', 'hs', 'hv'],\n        position: ['left', 'right', 'top', 'bottom'],\n        alphaChannel: ['auto', true, false],\n        paletteSetsAlpha: ['auto', true, false]\n      },\n      deprecatedOpts: {\n        // <old_option>: <new_option>  (<new_option> can be null)\n        'styleElement': 'previewElement',\n        'onFineChange': 'onInput',\n        'overwriteImportant': 'forceStyle',\n        'closable': 'closeButton',\n        'insetWidth': 'controlBorderWidth',\n        'insetColor': 'controlBorderColor',\n        'refine': null\n      },\n      docsRef: ' ' + 'See https://jscolor.com/docs/',\n      //\n      // Usage:\n      // var myPicker = new JSColor(<targetElement> [, <options>])\n      //\n      // (constructor is accessible via both 'jscolor' and 'JSColor' name)\n      //\n      pub: function pub(targetElement, opts) {\n        var THIS = this;\n\n        if (!opts) {\n          opts = {};\n        }\n\n        this.channels = {\n          r: 255,\n          // red [0-255]\n          g: 255,\n          // green [0-255]\n          b: 255,\n          // blue [0-255]\n          h: 0,\n          // hue [0-360]\n          s: 0,\n          // saturation [0-100]\n          v: 100,\n          // value (brightness) [0-100]\n          a: 1.0 // alpha (opacity) [0.0 - 1.0]\n\n        }; // General options\n        //\n\n        this.format = 'auto'; // 'auto' | 'any' | 'hex' | 'hexa' | 'rgb' | 'rgba' - Format of the input/output value\n\n        this.value = undefined; // INITIAL color value in any supported format. To change it later, use method fromString(), fromHSVA(), fromRGBA() or channel()\n\n        this.alpha = undefined; // INITIAL alpha value. To change it later, call method channel('A', <value>)\n\n        this.random = false; // whether to randomize the initial color. Either true | false, or an array of ranges: [minV, maxV, minS, maxS, minH, maxH, minA, maxA]\n\n        this.onChange = undefined; // called when color changes. Value can be either a function or a string with JS code.\n\n        this.onInput = undefined; // called repeatedly as the color is being changed, e.g. while dragging a slider. Value can be either a function or a string with JS code.\n\n        this.valueElement = undefined; // element that will be used to display and input the color value\n\n        this.alphaElement = undefined; // element that will be used to display and input the alpha (opacity) value\n\n        this.previewElement = undefined; // element that will preview the picked color using CSS background\n\n        this.previewPosition = 'left'; // 'left' | 'right' - position of the color preview in previewElement\n\n        this.previewSize = 32; // (px) width of the color preview displayed in previewElement\n\n        this.previewPadding = 8; // (px) space between color preview and content of the previewElement\n\n        this.required = true; // whether the associated text input must always contain a color value. If false, the input can be left empty.\n\n        this.hash = true; // whether to prefix the HEX color code with # symbol (only applicable for HEX format)\n\n        this.uppercase = true; // whether to show the HEX color code in upper case (only applicable for HEX format)\n\n        this.forceStyle = true; // whether to overwrite CSS style of the previewElement using !important flag\n        // Color Picker options\n        //\n\n        this.width = 181; // width of the color spectrum (in px)\n\n        this.height = 101; // height of the color spectrum (in px)\n\n        this.mode = 'HSV'; // 'HSV' | 'HVS' | 'HS' | 'HV' - layout of the color picker controls\n\n        this.alphaChannel = 'auto'; // 'auto' | true | false - if alpha channel is enabled, the alpha slider will be visible. If 'auto', it will be determined according to color format\n\n        this.position = 'bottom'; // 'left' | 'right' | 'top' | 'bottom' - position relative to the target element\n\n        this.smartPosition = true; // automatically change picker position when there is not enough space for it\n\n        this.showOnClick = true; // whether to show the picker when user clicks its target element\n\n        this.hideOnLeave = true; // whether to automatically hide the picker when user leaves its target element (e.g. upon clicking the document)\n\n        this.palette = []; // colors to be displayed in the palette, specified as an array or a string of space separated color values (in any supported format)\n\n        this.paletteCols = 10; // number of columns in the palette\n\n        this.paletteSetsAlpha = 'auto'; // 'auto' | true | false - if true, palette colors that don't specify alpha will set alpha to 1.0\n\n        this.paletteHeight = 16; // maximum height (px) of a row in the palette\n\n        this.paletteSpacing = 4; // distance (px) between color samples in the palette\n\n        this.hideOnPaletteClick = false; // when set to true, clicking the palette will also hide the color picker\n\n        this.sliderSize = 16; // px\n\n        this.crossSize = 8; // px\n\n        this.closeButton = false; // whether to display the Close button\n\n        this.closeText = 'Close';\n        this.buttonColor = 'rgba(0,0,0,1)'; // CSS color\n\n        this.buttonHeight = 18; // px\n\n        this.padding = 12; // px\n\n        this.backgroundColor = 'rgba(255,255,255,1)'; // CSS color\n\n        this.borderWidth = 1; // px\n\n        this.borderColor = 'rgba(187,187,187,1)'; // CSS color\n\n        this.borderRadius = 8; // px\n\n        this.controlBorderWidth = 1; // px\n\n        this.controlBorderColor = 'rgba(187,187,187,1)'; // CSS color\n\n        this.shadow = true; // whether to display a shadow\n\n        this.shadowBlur = 15; // px\n\n        this.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\n\n        this.pointerColor = 'rgba(76,76,76,1)'; // CSS color\n\n        this.pointerBorderWidth = 1; // px\n\n        this.pointerBorderColor = 'rgba(255,255,255,1)'; // CSS color\n\n        this.pointerThickness = 2; // px\n\n        this.zIndex = 5000;\n        this.container = undefined; // where to append the color picker (BODY element by default)\n        // Experimental\n        //\n\n        this.minS = 0; // min allowed saturation (0 - 100)\n\n        this.maxS = 100; // max allowed saturation (0 - 100)\n\n        this.minV = 0; // min allowed value (brightness) (0 - 100)\n\n        this.maxV = 100; // max allowed value (brightness) (0 - 100)\n\n        this.minA = 0.0; // min allowed alpha (opacity) (0.0 - 1.0)\n\n        this.maxA = 1.0; // max allowed alpha (opacity) (0.0 - 1.0)\n        // Getter: option(name)\n        // Setter: option(name, value)\n        //         option({name:value, ...})\n        //\n\n        this.option = function () {\n          if (!arguments.length) {\n            throw new Error('No option specified');\n          }\n\n          if (arguments.length === 1 && typeof arguments[0] === 'string') {\n            // getting a single option\n            try {\n              return getOption(arguments[0]);\n            } catch (e) {\n              console.warn(e);\n            }\n\n            return false;\n          } else if (arguments.length >= 2 && typeof arguments[0] === 'string') {\n            // setting a single option\n            try {\n              if (!setOption(arguments[0], arguments[1])) {\n                return false;\n              }\n            } catch (e) {\n              console.warn(e);\n              return false;\n            }\n\n            this.redraw(); // immediately redraws the picker, if it's displayed\n\n            this.exposeColor(); // in case some preview-related or format-related option was changed\n\n            return true;\n          } else if (arguments.length === 1 && typeof arguments[0] === 'object') {\n            // setting multiple options\n            var opts = arguments[0];\n            var success = true;\n\n            for (var opt in opts) {\n              if (opts.hasOwnProperty(opt)) {\n                try {\n                  if (!setOption(opt, opts[opt])) {\n                    success = false;\n                  }\n                } catch (e) {\n                  console.warn(e);\n                  success = false;\n                }\n              }\n            }\n\n            this.redraw(); // immediately redraws the picker, if it's displayed\n\n            this.exposeColor(); // in case some preview-related or format-related option was changed\n\n            return success;\n          }\n\n          throw new Error('Invalid arguments');\n        }; // Getter: channel(name)\n        // Setter: channel(name, value)\n        //\n\n\n        this.channel = function (name, value) {\n          if (typeof name !== 'string') {\n            throw new Error('Invalid value for channel name: ' + name);\n          }\n\n          if (value === undefined) {\n            // getting channel value\n            if (!this.channels.hasOwnProperty(name.toLowerCase())) {\n              console.warn('Getting unknown channel: ' + name);\n              return false;\n            }\n\n            return this.channels[name.toLowerCase()];\n          } else {\n            // setting channel value\n            var res = false;\n\n            switch (name.toLowerCase()) {\n              case 'r':\n                res = this.fromRGBA(value, null, null, null);\n                break;\n\n              case 'g':\n                res = this.fromRGBA(null, value, null, null);\n                break;\n\n              case 'b':\n                res = this.fromRGBA(null, null, value, null);\n                break;\n\n              case 'h':\n                res = this.fromHSVA(value, null, null, null);\n                break;\n\n              case 's':\n                res = this.fromHSVA(null, value, null, null);\n                break;\n\n              case 'v':\n                res = this.fromHSVA(null, null, value, null);\n                break;\n\n              case 'a':\n                res = this.fromHSVA(null, null, null, value);\n                break;\n\n              default:\n                console.warn('Setting unknown channel: ' + name);\n                return false;\n            }\n\n            if (res) {\n              this.redraw(); // immediately redraws the picker, if it's displayed\n\n              return true;\n            }\n          }\n\n          return false;\n        }; // Triggers given input event(s) by:\n        // - executing on<Event> callback specified as picker's option\n        // - triggering standard DOM event listeners attached to the value element\n        //\n        // It is possible to specify multiple events separated with a space.\n        //\n\n\n        this.trigger = function (eventNames) {\n          var evs = jsc.strList(eventNames);\n\n          for (var i = 0; i < evs.length; i += 1) {\n            var ev = evs[i].toLowerCase(); // trigger a callback\n\n            var callbackProp = null;\n\n            switch (ev) {\n              case 'input':\n                callbackProp = 'onInput';\n                break;\n\n              case 'change':\n                callbackProp = 'onChange';\n                break;\n            }\n\n            if (callbackProp) {\n              jsc.triggerCallback(this, callbackProp);\n            } // trigger standard DOM event listeners on the value element\n\n\n            jsc.triggerInputEvent(this.valueElement, ev, true, true);\n          }\n        }; // h: 0-360\n        // s: 0-100\n        // v: 0-100\n        // a: 0.0-1.0\n        //\n\n\n        this.fromHSVA = function (h, s, v, a, flags) {\n          // null = don't change\n          if (h === undefined) {\n            h = null;\n          }\n\n          if (s === undefined) {\n            s = null;\n          }\n\n          if (v === undefined) {\n            v = null;\n          }\n\n          if (a === undefined) {\n            a = null;\n          }\n\n          if (h !== null) {\n            if (isNaN(h)) {\n              return false;\n            }\n\n            this.channels.h = Math.max(0, Math.min(360, h));\n          }\n\n          if (s !== null) {\n            if (isNaN(s)) {\n              return false;\n            }\n\n            this.channels.s = Math.max(0, Math.min(100, this.maxS, s), this.minS);\n          }\n\n          if (v !== null) {\n            if (isNaN(v)) {\n              return false;\n            }\n\n            this.channels.v = Math.max(0, Math.min(100, this.maxV, v), this.minV);\n          }\n\n          if (a !== null) {\n            if (isNaN(a)) {\n              return false;\n            }\n\n            this.channels.a = this.hasAlphaChannel() ? Math.max(0, Math.min(1, this.maxA, a), this.minA) : 1.0; // if alpha channel is disabled, the color should stay 100% opaque\n          }\n\n          var rgb = jsc.HSV_RGB(this.channels.h, this.channels.s, this.channels.v);\n          this.channels.r = rgb[0];\n          this.channels.g = rgb[1];\n          this.channels.b = rgb[2];\n          this.exposeColor(flags);\n          return true;\n        }; // r: 0-255\n        // g: 0-255\n        // b: 0-255\n        // a: 0.0-1.0\n        //\n\n\n        this.fromRGBA = function (r, g, b, a, flags) {\n          // null = don't change\n          if (r === undefined) {\n            r = null;\n          }\n\n          if (g === undefined) {\n            g = null;\n          }\n\n          if (b === undefined) {\n            b = null;\n          }\n\n          if (a === undefined) {\n            a = null;\n          }\n\n          if (r !== null) {\n            if (isNaN(r)) {\n              return false;\n            }\n\n            r = Math.max(0, Math.min(255, r));\n          }\n\n          if (g !== null) {\n            if (isNaN(g)) {\n              return false;\n            }\n\n            g = Math.max(0, Math.min(255, g));\n          }\n\n          if (b !== null) {\n            if (isNaN(b)) {\n              return false;\n            }\n\n            b = Math.max(0, Math.min(255, b));\n          }\n\n          if (a !== null) {\n            if (isNaN(a)) {\n              return false;\n            }\n\n            this.channels.a = this.hasAlphaChannel() ? Math.max(0, Math.min(1, this.maxA, a), this.minA) : 1.0; // if alpha channel is disabled, the color should stay 100% opaque\n          }\n\n          var hsv = jsc.RGB_HSV(r === null ? this.channels.r : r, g === null ? this.channels.g : g, b === null ? this.channels.b : b);\n\n          if (hsv[0] !== null) {\n            this.channels.h = Math.max(0, Math.min(360, hsv[0]));\n          }\n\n          if (hsv[2] !== 0) {\n            // fully black color stays black through entire saturation range, so let's not change saturation\n            this.channels.s = Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\n          }\n\n          this.channels.v = Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2])); // update RGB according to final HSV, as some values might be trimmed\n\n          var rgb = jsc.HSV_RGB(this.channels.h, this.channels.s, this.channels.v);\n          this.channels.r = rgb[0];\n          this.channels.g = rgb[1];\n          this.channels.b = rgb[2];\n          this.exposeColor(flags);\n          return true;\n        }; // DEPRECATED. Use .fromHSVA() instead\n        //\n\n\n        this.fromHSV = function (h, s, v, flags) {\n          console.warn('fromHSV() method is DEPRECATED. Using fromHSVA() instead.' + jsc.docsRef);\n          return this.fromHSVA(h, s, v, null, flags);\n        }; // DEPRECATED. Use .fromRGBA() instead\n        //\n\n\n        this.fromRGB = function (r, g, b, flags) {\n          console.warn('fromRGB() method is DEPRECATED. Using fromRGBA() instead.' + jsc.docsRef);\n          return this.fromRGBA(r, g, b, null, flags);\n        };\n\n        this.fromString = function (str, flags) {\n          if (!this.required && str.trim() === '') {\n            // setting empty string to an optional color input\n            this.setPreviewElementBg(null);\n            this.setValueElementValue('');\n            return true;\n          }\n\n          var color = jsc.parseColorString(str);\n\n          if (!color) {\n            return false; // could not parse\n          }\n\n          if (this.format.toLowerCase() === 'any') {\n            this._setFormat(color.format); // adapt format\n\n\n            if (!jsc.isAlphaFormat(this.getFormat())) {\n              color.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\n            }\n          }\n\n          this.fromRGBA(color.rgba[0], color.rgba[1], color.rgba[2], color.rgba[3], flags);\n          return true;\n        };\n\n        this.randomize = function (minV, maxV, minS, maxS, minH, maxH, minA, maxA) {\n          if (minV === undefined) {\n            minV = 0;\n          }\n\n          if (maxV === undefined) {\n            maxV = 100;\n          }\n\n          if (minS === undefined) {\n            minS = 0;\n          }\n\n          if (maxS === undefined) {\n            maxS = 100;\n          }\n\n          if (minH === undefined) {\n            minH = 0;\n          }\n\n          if (maxH === undefined) {\n            maxH = 359;\n          }\n\n          if (minA === undefined) {\n            minA = 1;\n          }\n\n          if (maxA === undefined) {\n            maxA = 1;\n          }\n\n          this.fromHSVA(minH + Math.floor(Math.random() * (maxH - minH + 1)), minS + Math.floor(Math.random() * (maxS - minS + 1)), minV + Math.floor(Math.random() * (maxV - minV + 1)), (100 * minA + Math.floor(Math.random() * (100 * (maxA - minA) + 1))) / 100);\n        };\n\n        this.toString = function (format) {\n          if (format === undefined) {\n            format = this.getFormat(); // format not specified -> use the current format\n          }\n\n          switch (format.toLowerCase()) {\n            case 'hex':\n              return this.toHEXString();\n              break;\n\n            case 'hexa':\n              return this.toHEXAString();\n              break;\n\n            case 'rgb':\n              return this.toRGBString();\n              break;\n\n            case 'rgba':\n              return this.toRGBAString();\n              break;\n          }\n\n          return false;\n        };\n\n        this.toHEXString = function () {\n          return jsc.hexColor(this.channels.r, this.channels.g, this.channels.b);\n        };\n\n        this.toHEXAString = function () {\n          return jsc.hexaColor(this.channels.r, this.channels.g, this.channels.b, this.channels.a);\n        };\n\n        this.toRGBString = function () {\n          return jsc.rgbColor(this.channels.r, this.channels.g, this.channels.b);\n        };\n\n        this.toRGBAString = function () {\n          return jsc.rgbaColor(this.channels.r, this.channels.g, this.channels.b, this.channels.a);\n        };\n\n        this.toGrayscale = function () {\n          return 0.213 * this.channels.r + 0.715 * this.channels.g + 0.072 * this.channels.b;\n        };\n\n        this.toCanvas = function () {\n          return jsc.genColorPreviewCanvas(this.toRGBAString()).canvas;\n        };\n\n        this.toDataURL = function () {\n          return this.toCanvas().toDataURL();\n        };\n\n        this.toBackground = function () {\n          return jsc.pub.background(this.toRGBAString());\n        };\n\n        this.isLight = function () {\n          return this.toGrayscale() > 255 / 2;\n        };\n\n        this.hide = function () {\n          if (isPickerOwner()) {\n            detachPicker();\n          }\n        };\n\n        this.show = function () {\n          drawPicker();\n        };\n\n        this.redraw = function () {\n          if (isPickerOwner()) {\n            drawPicker();\n          }\n        };\n\n        this.getFormat = function () {\n          return this._currentFormat;\n        };\n\n        this._setFormat = function (format) {\n          this._currentFormat = format.toLowerCase();\n        };\n\n        this.hasAlphaChannel = function () {\n          if (this.alphaChannel === 'auto') {\n            return this.format.toLowerCase() === 'any' || // format can change on the fly (e.g. from hex to rgba), so let's consider the alpha channel enabled\n            jsc.isAlphaFormat(this.getFormat()) || // the current format supports alpha channel\n            this.alpha !== undefined || // initial alpha value is set, so we're working with alpha channel\n            this.alphaElement !== undefined // the alpha value is redirected, so we're working with alpha channel\n            ;\n          }\n\n          return this.alphaChannel; // the alpha channel is explicitly set\n        };\n\n        this.processValueInput = function (str) {\n          if (!this.fromString(str)) {\n            // could not parse the color value - let's just expose the current color\n            this.exposeColor();\n          }\n        };\n\n        this.processAlphaInput = function (str) {\n          if (!this.fromHSVA(null, null, null, parseFloat(str))) {\n            // could not parse the alpha value - let's just expose the current color\n            this.exposeColor();\n          }\n        };\n\n        this.exposeColor = function (flags) {\n          var colorStr = this.toString();\n          var fmt = this.getFormat(); // reflect current color in data- attribute\n\n          jsc.setDataAttr(this.targetElement, 'current-color', colorStr);\n\n          if (!(flags & jsc.flags.leaveValue) && this.valueElement) {\n            if (fmt === 'hex' || fmt === 'hexa') {\n              if (!this.uppercase) {\n                colorStr = colorStr.toLowerCase();\n              }\n\n              if (!this.hash) {\n                colorStr = colorStr.replace(/^#/, '');\n              }\n            }\n\n            this.setValueElementValue(colorStr);\n          }\n\n          if (!(flags & jsc.flags.leaveAlpha) && this.alphaElement) {\n            var alphaVal = Math.round(this.channels.a * 100) / 100;\n            this.setAlphaElementValue(alphaVal);\n          }\n\n          if (!(flags & jsc.flags.leavePreview) && this.previewElement) {\n            var previewPos = null; // 'left' | 'right' (null -> fill the entire element)\n\n            if (jsc.isTextInput(this.previewElement) || // text input\n            jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement) // button with text\n            ) {\n              previewPos = this.previewPosition;\n            }\n\n            this.setPreviewElementBg(this.toRGBAString());\n          }\n\n          if (isPickerOwner()) {\n            redrawPad();\n            redrawSld();\n            redrawASld();\n          }\n        };\n\n        this.setPreviewElementBg = function (color) {\n          if (!this.previewElement) {\n            return;\n          }\n\n          var position = null; // color preview position:  null | 'left' | 'right'\n\n          var width = null; // color preview width:  px | null = fill the entire element\n\n          if (jsc.isTextInput(this.previewElement) || // text input\n          jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement) // button with text\n          ) {\n            position = this.previewPosition;\n            width = this.previewSize;\n          }\n\n          var backgrounds = [];\n\n          if (!color) {\n            // there is no color preview to display -> let's remove any previous background image\n            backgrounds.push({\n              image: 'none',\n              position: 'left top',\n              size: 'auto',\n              repeat: 'no-repeat',\n              origin: 'padding-box'\n            });\n          } else {\n            // CSS gradient for background color preview\n            backgrounds.push({\n              image: jsc.genColorPreviewGradient(color, position, width ? width - jsc.pub.previewSeparator.length : null),\n              position: 'left top',\n              size: 'auto',\n              repeat: position ? 'repeat-y' : 'repeat',\n              origin: 'padding-box'\n            }); // data URL of generated PNG image with a gray transparency chessboard\n\n            var preview = jsc.genColorPreviewCanvas('rgba(0,0,0,0)', position ? {\n              'left': 'right',\n              'right': 'left'\n            }[position] : null, width, true);\n            backgrounds.push({\n              image: 'url(\\'' + preview.canvas.toDataURL() + '\\')',\n              position: (position || 'left') + ' top',\n              size: preview.width + 'px ' + preview.height + 'px',\n              repeat: position ? 'repeat-y' : 'repeat',\n              origin: 'padding-box'\n            });\n          }\n\n          var bg = {\n            image: [],\n            position: [],\n            size: [],\n            repeat: [],\n            origin: []\n          };\n\n          for (var i = 0; i < backgrounds.length; i += 1) {\n            bg.image.push(backgrounds[i].image);\n            bg.position.push(backgrounds[i].position);\n            bg.size.push(backgrounds[i].size);\n            bg.repeat.push(backgrounds[i].repeat);\n            bg.origin.push(backgrounds[i].origin);\n          } // set previewElement's background-images\n\n\n          var sty = {\n            'background-image': bg.image.join(', '),\n            'background-position': bg.position.join(', '),\n            'background-size': bg.size.join(', '),\n            'background-repeat': bg.repeat.join(', '),\n            'background-origin': bg.origin.join(', ')\n          };\n          jsc.setStyle(this.previewElement, sty, this.forceStyle); // set/restore previewElement's padding\n\n          var padding = {\n            left: null,\n            right: null\n          };\n\n          if (position) {\n            padding[position] = this.previewSize + this.previewPadding + 'px';\n          }\n\n          var sty = {\n            'padding-left': padding.left,\n            'padding-right': padding.right\n          };\n          jsc.setStyle(this.previewElement, sty, this.forceStyle, true);\n        };\n\n        this.setValueElementValue = function (str) {\n          if (this.valueElement) {\n            if (jsc.nodeName(this.valueElement) === 'input') {\n              this.valueElement.value = str;\n            } else {\n              this.valueElement.innerHTML = str;\n            }\n          }\n        };\n\n        this.setAlphaElementValue = function (str) {\n          if (this.alphaElement) {\n            if (jsc.nodeName(this.alphaElement) === 'input') {\n              this.alphaElement.value = str;\n            } else {\n              this.alphaElement.innerHTML = str;\n            }\n          }\n        };\n\n        this._processParentElementsInDOM = function () {\n          if (this._parentElementsProcessed) {\n            return;\n          }\n\n          this._parentElementsProcessed = true;\n          var elm = this.targetElement;\n\n          do {\n            // If the target element or one of its parent nodes has fixed position,\n            // then use fixed positioning instead\n            var compStyle = jsc.getCompStyle(elm);\n\n            if (compStyle.position && compStyle.position.toLowerCase() === 'fixed') {\n              this.fixed = true;\n            }\n\n            if (elm !== this.targetElement) {\n              // Ensure to attach onParentScroll only once to each parent element\n              // (multiple targetElements can share the same parent nodes)\n              //\n              // Note: It's not just offsetParents that can be scrollable,\n              // that's why we loop through all parent nodes\n              if (!jsc.getData(elm, 'hasScrollListener')) {\n                elm.addEventListener('scroll', jsc.onParentScroll, false);\n                jsc.setData(elm, 'hasScrollListener', true);\n              }\n            }\n          } while ((elm = elm.parentNode) && jsc.nodeName(elm) !== 'body');\n        };\n\n        this.tryHide = function () {\n          if (this.hideOnLeave) {\n            this.hide();\n          }\n        };\n\n        this.set__palette = function (val) {\n          this.palette = val;\n          this._palette = jsc.parsePaletteValue(val);\n          this._paletteHasTransparency = jsc.containsTranparentColor(this._palette);\n        };\n\n        function setOption(option, value) {\n          if (typeof option !== 'string') {\n            throw new Error('Invalid value for option name: ' + option);\n          } // enum option\n\n\n          if (jsc.enumOpts.hasOwnProperty(option)) {\n            if (typeof value === 'string') {\n              // enum string values are case insensitive\n              value = value.toLowerCase();\n            }\n\n            if (jsc.enumOpts[option].indexOf(value) === -1) {\n              throw new Error('Option \\'' + option + '\\' has invalid value: ' + value);\n            }\n          } // deprecated option\n\n\n          if (jsc.deprecatedOpts.hasOwnProperty(option)) {\n            var oldOpt = option;\n            var newOpt = jsc.deprecatedOpts[option];\n\n            if (newOpt) {\n              // if we have a new name for this option, let's log a warning and use the new name\n              console.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\n              option = newOpt;\n            } else {\n              // new name not available for the option\n              throw new Error('Option \\'' + option + '\\' is DEPRECATED');\n            }\n          }\n\n          var setter = 'set__' + option;\n\n          if (typeof THIS[setter] === 'function') {\n            // a setter exists for this option\n            THIS[setter](value);\n            return true;\n          } else if (option in THIS) {\n            // option exists as a property\n            THIS[option] = value;\n            return true;\n          }\n\n          throw new Error('Unrecognized configuration option: ' + option);\n        }\n\n        function getOption(option) {\n          if (typeof option !== 'string') {\n            throw new Error('Invalid value for option name: ' + option);\n          } // deprecated option\n\n\n          if (jsc.deprecatedOpts.hasOwnProperty(option)) {\n            var oldOpt = option;\n            var newOpt = jsc.deprecatedOpts[option];\n\n            if (newOpt) {\n              // if we have a new name for this option, let's log a warning and use the new name\n              console.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\n              option = newOpt;\n            } else {\n              // new name not available for the option\n              throw new Error('Option \\'' + option + '\\' is DEPRECATED');\n            }\n          }\n\n          var getter = 'get__' + option;\n\n          if (typeof THIS[getter] === 'function') {\n            // a getter exists for this option\n            return THIS[getter](value);\n          } else if (option in THIS) {\n            // option exists as a property\n            return THIS[option];\n          }\n\n          throw new Error('Unrecognized configuration option: ' + option);\n        }\n\n        function detachPicker() {\n          jsc.removeClass(THIS.targetElement, jsc.pub.activeClassName);\n          jsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\n          delete jsc.picker.owner;\n        }\n\n        function drawPicker() {\n          // At this point, when drawing the picker, we know what the parent elements are\n          // and we can do all related DOM operations, such as registering events on them\n          // or checking their positioning\n          THIS._processParentElementsInDOM();\n\n          if (!jsc.picker) {\n            jsc.picker = {\n              owner: null,\n              // owner picker instance\n              wrap: jsc.createEl('div'),\n              box: jsc.createEl('div'),\n              boxS: jsc.createEl('div'),\n              // shadow area\n              boxB: jsc.createEl('div'),\n              // border\n              pad: jsc.createEl('div'),\n              padB: jsc.createEl('div'),\n              // border\n              padM: jsc.createEl('div'),\n              // mouse/touch area\n              padCanvas: jsc.createPadCanvas(),\n              cross: jsc.createEl('div'),\n              crossBY: jsc.createEl('div'),\n              // border Y\n              crossBX: jsc.createEl('div'),\n              // border X\n              crossLY: jsc.createEl('div'),\n              // line Y\n              crossLX: jsc.createEl('div'),\n              // line X\n              sld: jsc.createEl('div'),\n              // slider\n              sldB: jsc.createEl('div'),\n              // border\n              sldM: jsc.createEl('div'),\n              // mouse/touch area\n              sldGrad: jsc.createSliderGradient(),\n              sldPtrS: jsc.createEl('div'),\n              // slider pointer spacer\n              sldPtrIB: jsc.createEl('div'),\n              // slider pointer inner border\n              sldPtrMB: jsc.createEl('div'),\n              // slider pointer middle border\n              sldPtrOB: jsc.createEl('div'),\n              // slider pointer outer border\n              asld: jsc.createEl('div'),\n              // alpha slider\n              asldB: jsc.createEl('div'),\n              // border\n              asldM: jsc.createEl('div'),\n              // mouse/touch area\n              asldGrad: jsc.createASliderGradient(),\n              asldPtrS: jsc.createEl('div'),\n              // slider pointer spacer\n              asldPtrIB: jsc.createEl('div'),\n              // slider pointer inner border\n              asldPtrMB: jsc.createEl('div'),\n              // slider pointer middle border\n              asldPtrOB: jsc.createEl('div'),\n              // slider pointer outer border\n              pal: jsc.createEl('div'),\n              // palette\n              btn: jsc.createEl('div'),\n              btnT: jsc.createEl('span') // text\n\n            };\n            jsc.picker.pad.appendChild(jsc.picker.padCanvas.elm);\n            jsc.picker.padB.appendChild(jsc.picker.pad);\n            jsc.picker.cross.appendChild(jsc.picker.crossBY);\n            jsc.picker.cross.appendChild(jsc.picker.crossBX);\n            jsc.picker.cross.appendChild(jsc.picker.crossLY);\n            jsc.picker.cross.appendChild(jsc.picker.crossLX);\n            jsc.picker.padB.appendChild(jsc.picker.cross);\n            jsc.picker.box.appendChild(jsc.picker.padB);\n            jsc.picker.box.appendChild(jsc.picker.padM);\n            jsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\n            jsc.picker.sldB.appendChild(jsc.picker.sld);\n            jsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\n            jsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\n            jsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\n            jsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\n            jsc.picker.box.appendChild(jsc.picker.sldB);\n            jsc.picker.box.appendChild(jsc.picker.sldM);\n            jsc.picker.asld.appendChild(jsc.picker.asldGrad.elm);\n            jsc.picker.asldB.appendChild(jsc.picker.asld);\n            jsc.picker.asldB.appendChild(jsc.picker.asldPtrOB);\n            jsc.picker.asldPtrOB.appendChild(jsc.picker.asldPtrMB);\n            jsc.picker.asldPtrMB.appendChild(jsc.picker.asldPtrIB);\n            jsc.picker.asldPtrIB.appendChild(jsc.picker.asldPtrS);\n            jsc.picker.box.appendChild(jsc.picker.asldB);\n            jsc.picker.box.appendChild(jsc.picker.asldM);\n            jsc.picker.box.appendChild(jsc.picker.pal);\n            jsc.picker.btn.appendChild(jsc.picker.btnT);\n            jsc.picker.box.appendChild(jsc.picker.btn);\n            jsc.picker.boxB.appendChild(jsc.picker.box);\n            jsc.picker.wrap.appendChild(jsc.picker.boxS);\n            jsc.picker.wrap.appendChild(jsc.picker.boxB);\n            jsc.picker.wrap.addEventListener('touchstart', jsc.onPickerTouchStart, jsc.isPassiveEventSupported ? {\n              passive: false\n            } : false);\n          }\n\n          var p = jsc.picker;\n          var displaySlider = !!jsc.getSliderChannel(THIS);\n          var displayAlphaSlider = THIS.hasAlphaChannel();\n          var pickerDims = jsc.getPickerDims(THIS);\n          var crossOuterSize = 2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize;\n          var controlPadding = jsc.getControlPadding(THIS);\n          var borderRadius = Math.min(THIS.borderRadius, Math.round(THIS.padding * Math.PI)); // px\n\n          var padCursor = 'crosshair'; // wrap\n\n          p.wrap.className = 'jscolor-picker-wrap';\n          p.wrap.style.clear = 'both';\n          p.wrap.style.width = pickerDims.borderW + 'px';\n          p.wrap.style.height = pickerDims.borderH + 'px';\n          p.wrap.style.zIndex = THIS.zIndex; // picker\n\n          p.box.className = 'jscolor-picker';\n          p.box.style.width = pickerDims.paddedW + 'px';\n          p.box.style.height = pickerDims.paddedH + 'px';\n          p.box.style.position = 'relative'; // picker shadow\n\n          p.boxS.className = 'jscolor-picker-shadow';\n          p.boxS.style.position = 'absolute';\n          p.boxS.style.left = '0';\n          p.boxS.style.top = '0';\n          p.boxS.style.width = '100%';\n          p.boxS.style.height = '100%';\n          jsc.setBorderRadius(p.boxS, borderRadius + 'px'); // picker border\n\n          p.boxB.className = 'jscolor-picker-border';\n          p.boxB.style.position = 'relative';\n          p.boxB.style.border = THIS.borderWidth + 'px solid';\n          p.boxB.style.borderColor = THIS.borderColor;\n          p.boxB.style.background = THIS.backgroundColor;\n          jsc.setBorderRadius(p.boxB, borderRadius + 'px'); // IE hack:\n          // If the element is transparent, IE will trigger the event on the elements under it,\n          // e.g. on Canvas or on elements with border\n\n          p.padM.style.background = 'rgba(255,0,0,.2)';\n          p.sldM.style.background = 'rgba(0,255,0,.2)';\n          p.asldM.style.background = 'rgba(0,0,255,.2)';\n          p.padM.style.opacity = p.sldM.style.opacity = p.asldM.style.opacity = '0'; // pad\n\n          p.pad.style.position = 'relative';\n          p.pad.style.width = THIS.width + 'px';\n          p.pad.style.height = THIS.height + 'px'; // pad - color spectrum (HSV and HVS)\n\n          p.padCanvas.draw(THIS.width, THIS.height, jsc.getPadYChannel(THIS)); // pad border\n\n          p.padB.style.position = 'absolute';\n          p.padB.style.left = THIS.padding + 'px';\n          p.padB.style.top = THIS.padding + 'px';\n          p.padB.style.border = THIS.controlBorderWidth + 'px solid';\n          p.padB.style.borderColor = THIS.controlBorderColor; // pad mouse area\n\n          p.padM.style.position = 'absolute';\n          p.padM.style.left = 0 + 'px';\n          p.padM.style.top = 0 + 'px';\n          p.padM.style.width = THIS.padding + 2 * THIS.controlBorderWidth + THIS.width + controlPadding + 'px';\n          p.padM.style.height = 2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height + 'px';\n          p.padM.style.cursor = padCursor;\n          jsc.setData(p.padM, {\n            instance: THIS,\n            control: 'pad'\n          }); // pad cross\n\n          p.cross.style.position = 'absolute';\n          p.cross.style.left = p.cross.style.top = '0';\n          p.cross.style.width = p.cross.style.height = crossOuterSize + 'px'; // pad cross border Y and X\n\n          p.crossBY.style.position = p.crossBX.style.position = 'absolute';\n          p.crossBY.style.background = p.crossBX.style.background = THIS.pointerBorderColor;\n          p.crossBY.style.width = p.crossBX.style.height = 2 * THIS.pointerBorderWidth + THIS.pointerThickness + 'px';\n          p.crossBY.style.height = p.crossBX.style.width = crossOuterSize + 'px';\n          p.crossBY.style.left = p.crossBX.style.top = Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth + 'px';\n          p.crossBY.style.top = p.crossBX.style.left = '0'; // pad cross line Y and X\n\n          p.crossLY.style.position = p.crossLX.style.position = 'absolute';\n          p.crossLY.style.background = p.crossLX.style.background = THIS.pointerColor;\n          p.crossLY.style.height = p.crossLX.style.width = crossOuterSize - 2 * THIS.pointerBorderWidth + 'px';\n          p.crossLY.style.width = p.crossLX.style.height = THIS.pointerThickness + 'px';\n          p.crossLY.style.left = p.crossLX.style.top = Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) + 'px';\n          p.crossLY.style.top = p.crossLX.style.left = THIS.pointerBorderWidth + 'px'; // slider\n\n          p.sld.style.overflow = 'hidden';\n          p.sld.style.width = THIS.sliderSize + 'px';\n          p.sld.style.height = THIS.height + 'px'; // slider gradient\n\n          p.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000'); // slider border\n\n          p.sldB.style.display = displaySlider ? 'block' : 'none';\n          p.sldB.style.position = 'absolute';\n          p.sldB.style.left = THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + 2 * controlPadding + 'px';\n          p.sldB.style.top = THIS.padding + 'px';\n          p.sldB.style.border = THIS.controlBorderWidth + 'px solid';\n          p.sldB.style.borderColor = THIS.controlBorderColor; // slider mouse area\n\n          p.sldM.style.display = displaySlider ? 'block' : 'none';\n          p.sldM.style.position = 'absolute';\n          p.sldM.style.left = THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding + 'px';\n          p.sldM.style.top = 0 + 'px';\n          p.sldM.style.width = THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth + (displayAlphaSlider ? 0 : Math.max(0, THIS.padding - controlPadding)) // remaining padding to the right edge\n          + 'px';\n          p.sldM.style.height = 2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height + 'px';\n          p.sldM.style.cursor = 'default';\n          jsc.setData(p.sldM, {\n            instance: THIS,\n            control: 'sld'\n          }); // slider pointer inner and outer border\n\n          p.sldPtrIB.style.border = p.sldPtrOB.style.border = THIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor; // slider pointer outer border\n\n          p.sldPtrOB.style.position = 'absolute';\n          p.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n          p.sldPtrOB.style.top = '0'; // slider pointer middle border\n\n          p.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor; // slider pointer spacer\n\n          p.sldPtrS.style.width = THIS.sliderSize + 'px';\n          p.sldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px'; // alpha slider\n\n          p.asld.style.overflow = 'hidden';\n          p.asld.style.width = THIS.sliderSize + 'px';\n          p.asld.style.height = THIS.height + 'px'; // alpha slider gradient\n\n          p.asldGrad.draw(THIS.sliderSize, THIS.height, '#000'); // alpha slider border\n\n          p.asldB.style.display = displayAlphaSlider ? 'block' : 'none';\n          p.asldB.style.position = 'absolute';\n          p.asldB.style.left = THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding + (displaySlider ? THIS.sliderSize + 3 * controlPadding + 2 * THIS.controlBorderWidth : 0) + 'px';\n          p.asldB.style.top = THIS.padding + 'px';\n          p.asldB.style.border = THIS.controlBorderWidth + 'px solid';\n          p.asldB.style.borderColor = THIS.controlBorderColor; // alpha slider mouse area\n\n          p.asldM.style.display = displayAlphaSlider ? 'block' : 'none';\n          p.asldM.style.position = 'absolute';\n          p.asldM.style.left = THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding + (displaySlider ? THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth : 0) + 'px';\n          p.asldM.style.top = 0 + 'px';\n          p.asldM.style.width = THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth + Math.max(0, THIS.padding - controlPadding) // remaining padding to the right edge\n          + 'px';\n          p.asldM.style.height = 2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height + 'px';\n          p.asldM.style.cursor = 'default';\n          jsc.setData(p.asldM, {\n            instance: THIS,\n            control: 'asld'\n          }); // alpha slider pointer inner and outer border\n\n          p.asldPtrIB.style.border = p.asldPtrOB.style.border = THIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor; // alpha slider pointer outer border\n\n          p.asldPtrOB.style.position = 'absolute';\n          p.asldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n          p.asldPtrOB.style.top = '0'; // alpha slider pointer middle border\n\n          p.asldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor; // alpha slider pointer spacer\n\n          p.asldPtrS.style.width = THIS.sliderSize + 'px';\n          p.asldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px'; // palette\n\n          p.pal.className = 'jscolor-palette';\n          p.pal.style.display = pickerDims.palette.rows ? 'block' : 'none';\n          p.pal.style.position = 'absolute';\n          p.pal.style.left = THIS.padding + 'px';\n          p.pal.style.top = 2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height + 'px'; // palette's color samples\n\n          p.pal.innerHTML = '';\n          var chessboard = jsc.genColorPreviewCanvas('rgba(0,0,0,0)');\n          var si = 0; // color sample's index\n\n          for (var r = 0; r < pickerDims.palette.rows; r++) {\n            for (var c = 0; c < pickerDims.palette.cols && si < THIS._palette.length; c++, si++) {\n              var sampleColor = THIS._palette[si];\n              var sampleCssColor = jsc.rgbaColor.apply(null, sampleColor.rgba);\n              var sc = jsc.createEl('div'); // color sample's color\n\n              sc.style.width = pickerDims.palette.cellW - 2 * THIS.controlBorderWidth + 'px';\n              sc.style.height = pickerDims.palette.cellH - 2 * THIS.controlBorderWidth + 'px';\n              sc.style.backgroundColor = sampleCssColor;\n              var sw = jsc.createEl('div'); // color sample's wrap\n\n              sw.className = 'jscolor-palette-sample';\n              sw.style.display = 'block';\n              sw.style.position = 'absolute';\n              sw.style.left = (pickerDims.palette.cols <= 1 ? 0 : Math.round(10 * (c * ((pickerDims.contentW - pickerDims.palette.cellW) / (pickerDims.palette.cols - 1)))) / 10) + 'px';\n              sw.style.top = r * (pickerDims.palette.cellH + THIS.paletteSpacing) + 'px';\n              sw.style.border = THIS.controlBorderWidth + 'px solid';\n              sw.style.borderColor = THIS.controlBorderColor;\n              sw.style.cursor = 'pointer';\n\n              if (sampleColor.rgba[3] !== null && sampleColor.rgba[3] < 1.0) {\n                // only create chessboard background if the sample has transparency\n                sw.style.backgroundImage = 'url(\\'' + chessboard.canvas.toDataURL() + '\\')';\n                sw.style.backgroundRepeat = 'repeat';\n                sw.style.backgroundPosition = 'center center';\n              }\n\n              jsc.setData(sw, {\n                instance: THIS,\n                control: 'palette-sample',\n                color: sampleColor\n              });\n              sw.addEventListener('click', jsc.onPaletteSampleClick, false);\n              sw.appendChild(sc);\n              p.pal.appendChild(sw);\n            }\n          } // the Close button\n\n\n          function setBtnBorder() {\n            var insetColors = THIS.controlBorderColor.split(/\\s+/);\n            var outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n            p.btn.style.borderColor = outsetColor;\n          }\n\n          var btnPadding = 15; // px\n\n          p.btn.className = 'jscolor-btn-close';\n          p.btn.style.display = THIS.closeButton ? 'block' : 'none';\n          p.btn.style.position = 'absolute';\n          p.btn.style.left = THIS.padding + 'px';\n          p.btn.style.bottom = THIS.padding + 'px';\n          p.btn.style.padding = '0 ' + btnPadding + 'px';\n          p.btn.style.maxWidth = pickerDims.contentW - 2 * THIS.controlBorderWidth - 2 * btnPadding + 'px';\n          p.btn.style.overflow = 'hidden';\n          p.btn.style.height = THIS.buttonHeight + 'px';\n          p.btn.style.whiteSpace = 'nowrap';\n          p.btn.style.border = THIS.controlBorderWidth + 'px solid';\n          setBtnBorder();\n          p.btn.style.color = THIS.buttonColor;\n          p.btn.style.font = '12px sans-serif';\n          p.btn.style.textAlign = 'center';\n          p.btn.style.cursor = 'pointer';\n\n          p.btn.onmousedown = function () {\n            THIS.hide();\n          };\n\n          p.btnT.style.lineHeight = THIS.buttonHeight + 'px';\n          p.btnT.innerHTML = '';\n          p.btnT.appendChild(window.document.createTextNode(THIS.closeText)); // reposition the pointers\n\n          redrawPad();\n          redrawSld();\n          redrawASld(); // If we are changing the owner without first closing the picker,\n          // make sure to first deal with the old owner\n\n          if (jsc.picker.owner && jsc.picker.owner !== THIS) {\n            jsc.removeClass(jsc.picker.owner.targetElement, jsc.pub.activeClassName);\n          } // Set a new picker owner\n\n\n          jsc.picker.owner = THIS; // The redrawPosition() method needs picker.owner to be set, that's why we call it here,\n          // after setting the owner\n\n          if (THIS.container === window.document.body) {\n            jsc.redrawPosition();\n          } else {\n            jsc._drawPosition(THIS, 0, 0, 'relative', false);\n          }\n\n          if (p.wrap.parentNode !== THIS.container) {\n            THIS.container.appendChild(p.wrap);\n          }\n\n          jsc.addClass(THIS.targetElement, jsc.pub.activeClassName);\n        }\n\n        function redrawPad() {\n          // redraw the pad pointer\n          var yChannel = jsc.getPadYChannel(THIS);\n          var x = Math.round(THIS.channels.h / 360 * (THIS.width - 1));\n          var y = Math.round((1 - THIS.channels[yChannel] / 100) * (THIS.height - 1));\n          var crossOuterSize = 2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize;\n          var ofs = -Math.floor(crossOuterSize / 2);\n          jsc.picker.cross.style.left = x + ofs + 'px';\n          jsc.picker.cross.style.top = y + ofs + 'px'; // redraw the slider\n\n          switch (jsc.getSliderChannel(THIS)) {\n            case 's':\n              var rgb1 = jsc.HSV_RGB(THIS.channels.h, 100, THIS.channels.v);\n              var rgb2 = jsc.HSV_RGB(THIS.channels.h, 0, THIS.channels.v);\n              var color1 = 'rgb(' + Math.round(rgb1[0]) + ',' + Math.round(rgb1[1]) + ',' + Math.round(rgb1[2]) + ')';\n              var color2 = 'rgb(' + Math.round(rgb2[0]) + ',' + Math.round(rgb2[1]) + ',' + Math.round(rgb2[2]) + ')';\n              jsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n              break;\n\n            case 'v':\n              var rgb = jsc.HSV_RGB(THIS.channels.h, THIS.channels.s, 100);\n              var color1 = 'rgb(' + Math.round(rgb[0]) + ',' + Math.round(rgb[1]) + ',' + Math.round(rgb[2]) + ')';\n              var color2 = '#000';\n              jsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n              break;\n          } // redraw the alpha slider\n\n\n          jsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\n        }\n\n        function redrawSld() {\n          var sldChannel = jsc.getSliderChannel(THIS);\n\n          if (sldChannel) {\n            // redraw the slider pointer\n            var y = Math.round((1 - THIS.channels[sldChannel] / 100) * (THIS.height - 1));\n            jsc.picker.sldPtrOB.style.top = y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2) + 'px';\n          } // redraw the alpha slider\n\n\n          jsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\n        }\n\n        function redrawASld() {\n          var y = Math.round((1 - THIS.channels.a) * (THIS.height - 1));\n          jsc.picker.asldPtrOB.style.top = y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2) + 'px';\n        }\n\n        function isPickerOwner() {\n          return jsc.picker && jsc.picker.owner === THIS;\n        }\n\n        function onValueKeyDown(ev) {\n          if (jsc.eventKey(ev) === 'Enter') {\n            if (THIS.valueElement) {\n              THIS.processValueInput(THIS.valueElement.value);\n            }\n\n            THIS.tryHide();\n          }\n        }\n\n        function onAlphaKeyDown(ev) {\n          if (jsc.eventKey(ev) === 'Enter') {\n            if (THIS.alphaElement) {\n              THIS.processAlphaInput(THIS.alphaElement.value);\n            }\n\n            THIS.tryHide();\n          }\n        }\n\n        function onValueChange(ev) {\n          if (jsc.getData(ev, 'internal')) {\n            return; // skip if the event was internally triggered by jscolor\n          }\n\n          var oldVal = THIS.valueElement.value;\n          THIS.processValueInput(THIS.valueElement.value); // this might change the value\n\n          jsc.triggerCallback(THIS, 'onChange');\n\n          if (THIS.valueElement.value !== oldVal) {\n            // value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\n            jsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\n          }\n        }\n\n        function onAlphaChange(ev) {\n          if (jsc.getData(ev, 'internal')) {\n            return; // skip if the event was internally triggered by jscolor\n          }\n\n          var oldVal = THIS.alphaElement.value;\n          THIS.processAlphaInput(THIS.alphaElement.value); // this might change the value\n\n          jsc.triggerCallback(THIS, 'onChange'); // triggering valueElement's onChange (because changing alpha changes the entire color, e.g. with rgba format)\n\n          jsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\n\n          if (THIS.alphaElement.value !== oldVal) {\n            // value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\n            jsc.triggerInputEvent(THIS.alphaElement, 'change', true, true);\n          }\n        }\n\n        function onValueInput(ev) {\n          if (jsc.getData(ev, 'internal')) {\n            return; // skip if the event was internally triggered by jscolor\n          }\n\n          if (THIS.valueElement) {\n            THIS.fromString(THIS.valueElement.value, jsc.flags.leaveValue);\n          }\n\n          jsc.triggerCallback(THIS, 'onInput'); // triggering valueElement's onInput\n          // (not needed, it was dispatched normally by the browser)\n        }\n\n        function onAlphaInput(ev) {\n          if (jsc.getData(ev, 'internal')) {\n            return; // skip if the event was internally triggered by jscolor\n          }\n\n          if (THIS.alphaElement) {\n            THIS.fromHSVA(null, null, null, parseFloat(THIS.alphaElement.value), jsc.flags.leaveAlpha);\n          }\n\n          jsc.triggerCallback(THIS, 'onInput'); // triggering valueElement's onInput (because changing alpha changes the entire color, e.g. with rgba format)\n\n          jsc.triggerInputEvent(THIS.valueElement, 'input', true, true);\n        } // let's process the DEPRECATED 'options' property (this will be later removed)\n\n\n        if (jsc.pub.options) {\n          // let's set custom default options, if specified\n          for (var opt in jsc.pub.options) {\n            if (jsc.pub.options.hasOwnProperty(opt)) {\n              try {\n                setOption(opt, jsc.pub.options[opt]);\n              } catch (e) {\n                console.warn(e);\n              }\n            }\n          }\n        } // let's apply configuration presets\n        //\n\n\n        var presetsArr = [];\n\n        if (opts.preset) {\n          if (typeof opts.preset === 'string') {\n            presetsArr = opts.preset.split(/\\s+/);\n          } else if (Array.isArray(opts.preset)) {\n            presetsArr = opts.preset.slice(); // slice() to clone\n          } else {\n            console.warn('Unrecognized preset value');\n          }\n        } // always use the 'default' preset. If it's not listed, append it to the end.\n\n\n        if (presetsArr.indexOf('default') === -1) {\n          presetsArr.push('default');\n        } // let's apply the presets in reverse order, so that should there be any overlapping options,\n        // the formerly listed preset will override the latter\n\n\n        for (var i = presetsArr.length - 1; i >= 0; i -= 1) {\n          var pres = presetsArr[i];\n\n          if (!pres) {\n            continue; // preset is empty string\n          }\n\n          if (!jsc.pub.presets.hasOwnProperty(pres)) {\n            console.warn('Unknown preset: %s', pres);\n            continue;\n          }\n\n          for (var opt in jsc.pub.presets[pres]) {\n            if (jsc.pub.presets[pres].hasOwnProperty(opt)) {\n              try {\n                setOption(opt, jsc.pub.presets[pres][opt]);\n              } catch (e) {\n                console.warn(e);\n              }\n            }\n          }\n        } // let's set specific options for this color picker\n\n\n        var nonProperties = [// these options won't be set as instance properties\n        'preset'];\n\n        for (var opt in opts) {\n          if (opts.hasOwnProperty(opt)) {\n            if (nonProperties.indexOf(opt) === -1) {\n              try {\n                setOption(opt, opts[opt]);\n              } catch (e) {\n                console.warn(e);\n              }\n            }\n          }\n        } //\n        // Install the color picker on chosen element(s)\n        //\n        // Determine picker's container element\n\n\n        if (this.container === undefined) {\n          this.container = window.document.body; // default container is BODY element\n        } else {\n          // explicitly set to custom element\n          this.container = jsc.node(this.container);\n        }\n\n        if (!this.container) {\n          throw new Error('Cannot instantiate color picker without a container element');\n        } // Fetch the target element\n\n\n        this.targetElement = jsc.node(targetElement);\n\n        if (!this.targetElement) {\n          // temporarily customized error message to help with migrating from versions prior to 2.2\n          if (typeof targetElement === 'string' && /^[a-zA-Z][\\w:.-]*$/.test(targetElement)) {\n            // targetElement looks like valid ID\n            var possiblyId = targetElement;\n            throw new Error('If \\'' + possiblyId + '\\' is supposed to be an ID, please use \\'#' + possiblyId + '\\' or any valid CSS selector.');\n          }\n\n          throw new Error('Cannot instantiate color picker without a target element');\n        }\n\n        if (this.targetElement.jscolor && this.targetElement.jscolor instanceof jsc.pub) {\n          throw new Error('Color picker already installed on this element');\n        } // link this instance with the target element\n\n\n        this.targetElement.jscolor = this;\n        jsc.addClass(this.targetElement, jsc.pub.className); // register this instance\n\n        jsc.instances.push(this); // if target is BUTTON\n\n        if (jsc.isButton(this.targetElement)) {\n          if (this.targetElement.type.toLowerCase() !== 'button') {\n            // on buttons, always force type to be 'button', e.g. in situations the target <button> has no type\n            // and thus defaults to 'submit' and would submit the form when clicked\n            this.targetElement.type = 'button';\n          }\n\n          if (jsc.isButtonEmpty(this.targetElement)) {\n            // empty button\n            // it is important to clear element's contents first.\n            // if we're re-instantiating color pickers on DOM that has been modified by changing page's innerHTML,\n            // we would keep adding more non-breaking spaces to element's content (because element's contents survive\n            // innerHTML changes, but picker instances don't)\n            jsc.removeChildren(this.targetElement); // let's insert a non-breaking space\n\n            this.targetElement.appendChild(window.document.createTextNode('\\xa0')); // set min-width = previewSize, if not already greater\n\n            var compStyle = jsc.getCompStyle(this.targetElement);\n            var currMinWidth = parseFloat(compStyle['min-width']) || 0;\n\n            if (currMinWidth < this.previewSize) {\n              jsc.setStyle(this.targetElement, {\n                'min-width': this.previewSize + 'px'\n              }, this.forceStyle);\n            }\n          }\n        } // Determine the value element\n\n\n        if (this.valueElement === undefined) {\n          if (jsc.isTextInput(this.targetElement)) {\n            // for text inputs, default valueElement is targetElement\n            this.valueElement = this.targetElement;\n          } else {// leave it undefined\n          }\n        } else if (this.valueElement === null) {// explicitly set to null\n          // leave it null\n        } else {\n          // explicitly set to custom element\n          this.valueElement = jsc.node(this.valueElement);\n        } // Determine the alpha element\n\n\n        if (this.alphaElement) {\n          this.alphaElement = jsc.node(this.alphaElement);\n        } // Determine the preview element\n\n\n        if (this.previewElement === undefined) {\n          this.previewElement = this.targetElement; // default previewElement is targetElement\n        } else if (this.previewElement === null) {// explicitly set to null\n          // leave it null\n        } else {\n          // explicitly set to custom element\n          this.previewElement = jsc.node(this.previewElement);\n        } // valueElement\n\n\n        if (this.valueElement && jsc.isTextInput(this.valueElement)) {\n          // If the value element has onInput event already set, we need to detach it and attach AFTER our listener.\n          // otherwise the picker instance would still contain the old color when accessed from the onInput handler.\n          var valueElementOrigEvents = {\n            onInput: this.valueElement.oninput\n          };\n          this.valueElement.oninput = null;\n          this.valueElement.addEventListener('keydown', onValueKeyDown, false);\n          this.valueElement.addEventListener('change', onValueChange, false);\n          this.valueElement.addEventListener('input', onValueInput, false); // the original event listener must be attached AFTER our handler (to let it first set picker's color)\n\n          if (valueElementOrigEvents.onInput) {\n            this.valueElement.addEventListener('input', valueElementOrigEvents.onInput, false);\n          }\n\n          this.valueElement.setAttribute('autocomplete', 'off');\n          this.valueElement.setAttribute('autocorrect', 'off');\n          this.valueElement.setAttribute('autocapitalize', 'off');\n          this.valueElement.setAttribute('spellcheck', false);\n        } // alphaElement\n\n\n        if (this.alphaElement && jsc.isTextInput(this.alphaElement)) {\n          this.alphaElement.addEventListener('keydown', onAlphaKeyDown, false);\n          this.alphaElement.addEventListener('change', onAlphaChange, false);\n          this.alphaElement.addEventListener('input', onAlphaInput, false);\n          this.alphaElement.setAttribute('autocomplete', 'off');\n          this.alphaElement.setAttribute('autocorrect', 'off');\n          this.alphaElement.setAttribute('autocapitalize', 'off');\n          this.alphaElement.setAttribute('spellcheck', false);\n        } // determine initial color value\n        //\n\n\n        var initValue = 'FFFFFF';\n\n        if (this.value !== undefined) {\n          initValue = this.value; // get initial color from the 'value' property\n        } else if (this.valueElement && this.valueElement.value !== undefined) {\n          initValue = this.valueElement.value; // get initial color from valueElement's value\n        } // determine initial alpha value\n        //\n\n\n        var initAlpha = undefined;\n\n        if (this.alpha !== undefined) {\n          initAlpha = '' + this.alpha; // get initial alpha value from the 'alpha' property\n        } else if (this.alphaElement && this.alphaElement.value !== undefined) {\n          initAlpha = this.alphaElement.value; // get initial color from alphaElement's value\n        } // determine current format based on the initial color value\n        //\n\n\n        this._currentFormat = null;\n\n        if (['auto', 'any'].indexOf(this.format.toLowerCase()) > -1) {\n          // format is 'auto' or 'any' -> let's auto-detect current format\n          var color = jsc.parseColorString(initValue);\n          this._currentFormat = color ? color.format : 'hex';\n        } else {\n          // format is specified\n          this._currentFormat = this.format.toLowerCase();\n        } // let's parse the initial color value and expose color's preview\n\n\n        this.processValueInput(initValue); // let's also parse and expose the initial alpha value, if any\n        //\n        // Note: If the initial color value contains alpha value in it (e.g. in rgba format),\n        // this will overwrite it. So we should only process alpha input if there was initial\n        // alpha explicitly set, otherwise we could needlessly lose initial value's alpha\n\n        if (initAlpha !== undefined) {\n          this.processAlphaInput(initAlpha);\n        }\n\n        if (this.random) {\n          // randomize the initial color value\n          this.randomize.apply(this, Array.isArray(this.random) ? this.random : []);\n        }\n      }\n    }; //================================\n    // Public properties and methods\n    //================================\n    //\n    // These will be publicly available via jscolor.<name> and JSColor.<name>\n    //\n    // class that will be set to elements having jscolor installed on them\n\n    jsc.pub.className = 'jscolor'; // class that will be set to elements having jscolor active on them\n\n    jsc.pub.activeClassName = 'jscolor-active'; // whether to try to parse the options string by evaluating it using 'new Function()'\n    // in case it could not be parsed with JSON.parse()\n\n    jsc.pub.looseJSON = true; // presets\n\n    jsc.pub.presets = {}; // built-in presets\n\n    jsc.pub.presets['default'] = {}; // baseline for customization\n\n    jsc.pub.presets['light'] = {\n      // default color scheme\n      backgroundColor: 'rgba(255,255,255,1)',\n      controlBorderColor: 'rgba(187,187,187,1)',\n      buttonColor: 'rgba(0,0,0,1)'\n    };\n    jsc.pub.presets['dark'] = {\n      backgroundColor: 'rgba(51,51,51,1)',\n      controlBorderColor: 'rgba(153,153,153,1)',\n      buttonColor: 'rgba(240,240,240,1)'\n    };\n    jsc.pub.presets['small'] = {\n      width: 101,\n      height: 101,\n      padding: 10,\n      sliderSize: 14,\n      paletteCols: 8\n    };\n    jsc.pub.presets['medium'] = {\n      width: 181,\n      height: 101,\n      padding: 12,\n      sliderSize: 16,\n      paletteCols: 10\n    }; // default size\n\n    jsc.pub.presets['large'] = {\n      width: 271,\n      height: 151,\n      padding: 12,\n      sliderSize: 24,\n      paletteCols: 15\n    };\n    jsc.pub.presets['thin'] = {\n      borderWidth: 1,\n      controlBorderWidth: 1,\n      pointerBorderWidth: 1\n    }; // default thickness\n\n    jsc.pub.presets['thick'] = {\n      borderWidth: 2,\n      controlBorderWidth: 2,\n      pointerBorderWidth: 2\n    }; // size of space in the sliders\n\n    jsc.pub.sliderInnerSpace = 3; // px\n    // transparency chessboard\n\n    jsc.pub.chessboardSize = 8; // px\n\n    jsc.pub.chessboardColor1 = '#666666';\n    jsc.pub.chessboardColor2 = '#999999'; // preview separator\n\n    jsc.pub.previewSeparator = ['rgba(255,255,255,.65)', 'rgba(128,128,128,.65)']; // Initializes jscolor\n\n    jsc.pub.init = function () {\n      if (jsc.initialized) {\n        return;\n      } // attach some necessary handlers\n\n\n      window.document.addEventListener('mousedown', jsc.onDocumentMouseDown, false);\n      window.document.addEventListener('keyup', jsc.onDocumentKeyUp, false);\n      window.addEventListener('resize', jsc.onWindowResize, false);\n      window.addEventListener('scroll', jsc.onWindowScroll, false); // install jscolor on current DOM\n\n      jsc.pub.install();\n      jsc.initialized = true; // call functions waiting in the queue\n\n      while (jsc.readyQueue.length) {\n        var func = jsc.readyQueue.shift();\n        func();\n      }\n    }; // Installs jscolor on current DOM tree\n\n\n    jsc.pub.install = function (rootNode) {\n      var success = true;\n\n      try {\n        jsc.installBySelector('[data-jscolor]', rootNode);\n      } catch (e) {\n        success = false;\n        console.warn(e);\n      } // for backward compatibility with DEPRECATED installation using class name\n\n\n      if (jsc.pub.lookupClass) {\n        try {\n          jsc.installBySelector('input.' + jsc.pub.lookupClass + ', ' + 'button.' + jsc.pub.lookupClass, rootNode);\n        } catch (e) {}\n      }\n\n      return success;\n    }; // Registers function to be called as soon as jscolor is initialized (or immediately, if it already is).\n    //\n\n\n    jsc.pub.ready = function (func) {\n      if (typeof func !== 'function') {\n        console.warn('Passed value is not a function');\n        return false;\n      }\n\n      if (jsc.initialized) {\n        func();\n      } else {\n        jsc.readyQueue.push(func);\n      }\n\n      return true;\n    }; // Triggers given input event(s) (e.g. 'input' or 'change') on all color pickers.\n    //\n    // It is possible to specify multiple events separated with a space.\n    // If called before jscolor is initialized, then the events will be triggered after initialization.\n    //\n\n\n    jsc.pub.trigger = function (eventNames) {\n      var triggerNow = function triggerNow() {\n        jsc.triggerGlobal(eventNames);\n      };\n\n      if (jsc.initialized) {\n        triggerNow();\n      } else {\n        jsc.pub.ready(triggerNow);\n      }\n    }; // Hides current color picker box\n\n\n    jsc.pub.hide = function () {\n      if (jsc.picker && jsc.picker.owner) {\n        jsc.picker.owner.hide();\n      }\n    }; // Returns a data URL of a gray chessboard image that indicates transparency\n\n\n    jsc.pub.chessboard = function (color) {\n      if (!color) {\n        color = 'rgba(0,0,0,0)';\n      }\n\n      var preview = jsc.genColorPreviewCanvas(color);\n      return preview.canvas.toDataURL();\n    }; // Returns a data URL of a gray chessboard image that indicates transparency\n\n\n    jsc.pub.background = function (color) {\n      var backgrounds = []; // CSS gradient for background color preview\n\n      backgrounds.push(jsc.genColorPreviewGradient(color)); // data URL of generated PNG image with a gray transparency chessboard\n\n      var preview = jsc.genColorPreviewCanvas();\n      backgrounds.push(['url(\\'' + preview.canvas.toDataURL() + '\\')', 'left top', 'repeat'].join(' '));\n      return backgrounds.join(', ');\n    }; //\n    // DEPRECATED properties and methods\n    //\n    // DEPRECATED. Use jscolor.presets.default instead.\n    //\n    // Custom default options for all color pickers, e.g. { hash: true, width: 300 }\n\n\n    jsc.pub.options = {}; // DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\n    //\n    // By default, we'll search for all elements with class=\"jscolor\" and install a color picker on them.\n    //\n    // You can change what class name will be looked for by setting the property jscolor.lookupClass\n    // anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\n    //\n\n    jsc.pub.lookupClass = 'jscolor'; // DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\n    //\n    // Install jscolor on all elements that have the specified class name\n\n    jsc.pub.installByClassName = function () {\n      console.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor=\"\" attribute instead of a class name.' + jsc.docsRef);\n      return false;\n    };\n\n    jsc.register();\n    return jsc.pub;\n  }(); // END jscolor\n\n\n  if (typeof window.jscolor === 'undefined') {\n    window.jscolor = window.JSColor = jscolor;\n  } // END jscolor code\n\n\n  return jscolor;\n}); // END factory","map":{"version":3,"sources":["/Users/arturmutallapov/ruby/askme/app/javascript/packs/scripts/jscolor.js"],"names":["global","factory","module","exports","document","win","Error","window","jscolor","jsc","initialized","instances","readyQueue","register","addEventListener","pub","init","installBySelector","selector","rootNode","node","elms","querySelectorAll","matchClass","RegExp","lookupClass","i","length","type","undefined","toLowerCase","isColorAttrSupported","dataOpts","m","getDataAttr","className","match","targetElm","optsStr","console","warn","docsRef","opts","trim","parseOptionsStr","e","str","JSON","parse","eParse","looseJSON","Function","eEval","getInstances","inst","targetElement","push","createEl","tagName","el","createElement","setData","nodeOrSelector","sel","querySelector","isNode","val","Node","nodeType","nodeName","removeChildren","firstChild","removeChild","isTextInput","isButton","n","indexOf","isButtonEmpty","value","textContent","isPassiveEventSupported","supported","Object","defineProperty","get","removeEventListener","elm","setAttribute","dataProp","obj","arguments","data","hasOwnProperty","prop","map","removeData","getData","setDefault","name","attrName","attrValue","getAttribute","setDataAttr","_attachedGroupEvents","attachGroupEvent","groupName","evnt","func","detachGroupEvents","evt","preventDefault","returnValue","captureTarget","target","setCapture","_capturedTarget","releaseTarget","releaseCapture","triggerEvent","eventName","bubbles","cancelable","ev","Event","createEvent","initEvent","dispatchEvent","triggerInputEvent","eventKey","keys","code","keyCode","strList","replace","split","hasClass","classList","contains","addClass","classNames","add","removeClass","remove","repl","getCompStyle","compStyle","getComputedStyle","currentStyle","setStyle","styles","important","reversible","priority","origStyle","setVal","style","setProperty","hexColor","r","g","b","Math","round","toString","substr","toUpperCase","hexaColor","a","rgbColor","rgbaColor","linearGradient","getFuncName","stdName","prefixes","helper","tryFunc","tryVal","background","funcName","Array","prototype","join","call","setBorderRadius","setBoxShadow","getElementPos","relativeToViewport","x","y","rect","getBoundingClientRect","left","top","viewPos","getViewPos","getElementSize","offsetWidth","offsetHeight","getAbsPointerPos","changedTouches","clientX","clientY","getRelPointerPos","srcElement","targetRect","doc","documentElement","pageXOffset","scrollLeft","clientLeft","pageYOffset","scrollTop","clientTop","getViewSize","innerWidth","clientWidth","innerHeight","clientHeight","RGB_HSV","min","v","max","h","HSV_RGB","s","u","floor","f","parseColorString","ret","rgba","format","parseInt","charAt","par","re","mR","mG","mB","mA","parseFloat","parsePaletteValue","mixed","vals","isArray","colors","color","containsTranparentColor","isAlphaFormat","scaleCanvasForHighDPR","canvas","dpr","devicePixelRatio","width","height","ctx","getContext","scale","genColorPreviewCanvas","separatorPos","specWidth","scaleForHighDPR","sepW","previewSeparator","sqSize","chessboardSize","sqColor1","chessboardColor1","sqColor2","chessboardColor2","cWidth","cHeight","fillStyle","fillRect","start","clearRect","lineWidth","beginPath","strokeStyle","moveTo","lineTo","stroke","genColorPreviewGradient","position","params","apply","redrawPosition","picker","owner","thisObj","tp","vp","fixed","ts","vs","pd","getPickerDims","ps","borderW","borderH","c","l","smartPosition","pp","positionValue","contractShadow","_drawPosition","vShadow","shadowBlur","wrap","boxS","shadow","BoxShadow","shadowColor","w","controlBorderWidth","sliderSpace","getControlPadding","sliderSize","getSliderChannel","hasAlphaChannel","pal","getPaletteDims","padding","closeButton","buttonHeight","pW","pH","contentW","contentH","paddedW","paddedH","borderWidth","palette","cols","rows","cellW","cellH","sampleCount","_palette","paletteCols","ceil","paletteSpacing","paletteHeight","pointerBorderWidth","pointerThickness","getPadYChannel","mode","triggerCallback","callback","error","triggerGlobal","eventNames","trigger","_pointerMoveEvent","mouse","touch","_pointerEndEvent","_pointerOrigin","onDocumentKeyUp","tryHide","onWindowResize","onWindowScroll","onParentScroll","onDocumentMouseDown","showOnClick","disabled","show","control","onControlPointerStart","onPickerTouchStart","controlName","pointerType","registerDragEvents","offset","onDocumentPointerMove","onDocumentPointerEnd","parent","frameElement","ofs","abs","rel","channels","fromHSVA","setPad","setSld","setASld","onPaletteSampleClick","currentTarget","_setFormat","getFormat","paletteSetsAlpha","_paletteHasTransparency","fromRGBA","hideOnPaletteClick","hide","ofsX","ofsY","pointerAbs","xVal","yVal","fmt","createPadCanvas","draw","drawFunc","hGrad","createLinearGradient","addColorStop","vGrad","createSliderGradient","color1","color2","grad","createASliderGradient","hShadow","blur","spread","inset","flags","leaveValue","leaveAlpha","leavePreview","enumOpts","previewPosition","alphaChannel","deprecatedOpts","THIS","alpha","random","onChange","onInput","valueElement","alphaElement","previewElement","previewSize","previewPadding","required","hash","uppercase","forceStyle","hideOnLeave","crossSize","closeText","buttonColor","backgroundColor","borderColor","borderRadius","controlBorderColor","pointerColor","pointerBorderColor","zIndex","container","minS","maxS","minV","maxV","minA","maxA","option","getOption","setOption","redraw","exposeColor","success","opt","channel","res","evs","callbackProp","isNaN","rgb","hsv","fromHSV","fromRGB","fromString","setPreviewElementBg","setValueElementValue","randomize","minH","maxH","toHEXString","toHEXAString","toRGBString","toRGBAString","toGrayscale","toCanvas","toDataURL","toBackground","isLight","isPickerOwner","detachPicker","drawPicker","_currentFormat","processValueInput","processAlphaInput","colorStr","alphaVal","setAlphaElementValue","previewPos","redrawPad","redrawSld","redrawASld","backgrounds","image","size","repeat","origin","preview","bg","sty","right","innerHTML","_processParentElementsInDOM","_parentElementsProcessed","parentNode","set__palette","oldOpt","newOpt","setter","getter","activeClassName","box","boxB","pad","padB","padM","padCanvas","cross","crossBY","crossBX","crossLY","crossLX","sld","sldB","sldM","sldGrad","sldPtrS","sldPtrIB","sldPtrMB","sldPtrOB","asld","asldB","asldM","asldGrad","asldPtrS","asldPtrIB","asldPtrMB","asldPtrOB","btn","btnT","appendChild","passive","p","displaySlider","displayAlphaSlider","pickerDims","crossOuterSize","controlPadding","PI","padCursor","clear","border","opacity","cursor","instance","overflow","display","sliderInnerSpace","chessboard","si","sampleColor","sampleCssColor","sc","sw","backgroundImage","backgroundRepeat","backgroundPosition","setBtnBorder","insetColors","outsetColor","btnPadding","bottom","maxWidth","whiteSpace","font","textAlign","onmousedown","lineHeight","createTextNode","body","yChannel","rgb1","rgb2","sldChannel","onValueKeyDown","onAlphaKeyDown","onValueChange","oldVal","onAlphaChange","onValueInput","onAlphaInput","options","presetsArr","preset","slice","pres","presets","nonProperties","test","possiblyId","currMinWidth","valueElementOrigEvents","oninput","initValue","initAlpha","install","shift","ready","triggerNow","installByClassName","JSColor"],"mappings":"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","sourcesContent":["/**\n * jscolor - JavaScript Color Picker\n *\n * @link    http://jscolor.com\n * @license For open source use: GPLv3\n *          For commercial use: JSColor Commercial License\n * @author  Jan Odvarko - East Desire\n * @version 2.4.6\n *\n * See usage examples at http://jscolor.com/examples/\n */\n\n\n(function (global, factory) {\n\n\t'use strict';\n\n\tif (typeof module === 'object' && typeof module.exports === 'object') {\n\t\t// Export jscolor as a module\n\t\tmodule.exports = global.document ?\n\t\t\tfactory (global) :\n\t\t\tfunction (win) {\n\t\t\t\tif (!win.document) {\n\t\t\t\t\tthrow new Error('jscolor needs a window with document');\n\t\t\t\t}\n\t\t\t\treturn factory(win);\n\t\t\t}\n\t\treturn;\n\t}\n\n\t// Default use (no module export)\n\tfactory(global);\n\n})(typeof window !== 'undefined' ? window : this, function (window) { // BEGIN factory\n\n// BEGIN jscolor code\n\n\n'use strict';\n\n\nvar jscolor = (function () { // BEGIN jscolor\n\nvar jsc = {\n\n\n\tinitialized : false,\n\n\tinstances : [], // created instances of jscolor\n\n\treadyQueue : [], // functions waiting to be called after init\n\n\n\tregister : function () {\n\t\tif (typeof window !== 'undefined' && window.document) {\n\t\t\twindow.document.addEventListener('DOMContentLoaded', jsc.pub.init, false);\n\t\t}\n\t},\n\n\n\tinstallBySelector : function (selector, rootNode) {\n\t\trootNode = rootNode ? jsc.node(rootNode) : window.document;\n\t\tif (!rootNode) {\n\t\t\tthrow new Error('Missing root node');\n\t\t}\n\n\t\tvar elms = rootNode.querySelectorAll(selector);\n\n\t\t// for backward compatibility with DEPRECATED installation/configuration using className\n\t\tvar matchClass = new RegExp('(^|\\\\s)(' + jsc.pub.lookupClass + ')(\\\\s*(\\\\{[^}]*\\\\})|\\\\s|$)', 'i');\n\n\t\tfor (var i = 0; i < elms.length; i += 1) {\n\n\t\t\tif (elms[i].jscolor && elms[i].jscolor instanceof jsc.pub) {\n\t\t\t\tcontinue; // jscolor already installed on this element\n\t\t\t}\n\n\t\t\tif (elms[i].type !== undefined && elms[i].type.toLowerCase() == 'color' && jsc.isColorAttrSupported) {\n\t\t\t\tcontinue; // skips inputs of type 'color' if supported by the browser\n\t\t\t}\n\n\t\t\tvar dataOpts, m;\n\n\t\t\tif (\n\t\t\t\t(dataOpts = jsc.getDataAttr(elms[i], 'jscolor')) !== null ||\n\t\t\t\t(elms[i].className && (m = elms[i].className.match(matchClass))) // installation using className (DEPRECATED)\n\t\t\t) {\n\t\t\t\tvar targetElm = elms[i];\n\n\t\t\t\tvar optsStr = '';\n\t\t\t\tif (dataOpts !== null) {\n\t\t\t\t\toptsStr = dataOpts;\n\n\t\t\t\t} else if (m) { // installation using className (DEPRECATED)\n\t\t\t\t\tconsole.warn('Installation using class name is DEPRECATED. Use data-jscolor=\"\" attribute instead.' + jsc.docsRef);\n\t\t\t\t\tif (m[4]) {\n\t\t\t\t\t\toptsStr = m[4];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar opts = null;\n\t\t\t\tif (optsStr.trim()) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\topts = jsc.parseOptionsStr(optsStr);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn(e + '\\n' + optsStr);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tnew jsc.pub(targetElm, opts);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\tparseOptionsStr : function (str) {\n\t\tvar opts = null;\n\n\t\ttry {\n\t\t\topts = JSON.parse(str);\n\n\t\t} catch (eParse) {\n\t\t\tif (!jsc.pub.looseJSON) {\n\t\t\t\tthrow new Error('Could not parse jscolor options as JSON: ' + eParse);\n\t\t\t} else {\n\t\t\t\t// loose JSON syntax is enabled -> try to evaluate the options string as JavaScript object\n\t\t\t\ttry {\n\t\t\t\t\topts = (new Function ('var opts = (' + str + '); return typeof opts === \"object\" ? opts : {};'))();\n\t\t\t\t} catch (eEval) {\n\t\t\t\t\tthrow new Error('Could not evaluate jscolor options: ' + eEval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn opts;\n\t},\n\n\n\tgetInstances : function () {\n\t\tvar inst = [];\n\t\tfor (var i = 0; i < jsc.instances.length; i += 1) {\n\t\t\t// if the targetElement still exists, the instance is considered \"alive\"\n\t\t\tif (jsc.instances[i] && jsc.instances[i].targetElement) {\n\t\t\t\tinst.push(jsc.instances[i]);\n\t\t\t}\n\t\t}\n\t\treturn inst;\n\t},\n\n\n\tcreateEl : function (tagName) {\n\t\tvar el = window.document.createElement(tagName);\n\t\tjsc.setData(el, 'gui', true);\n\t\treturn el;\n\t},\n\n\n\tnode : function (nodeOrSelector) {\n\t\tif (!nodeOrSelector) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (typeof nodeOrSelector === 'string') {\n\t\t\t// query selector\n\t\t\tvar sel = nodeOrSelector;\n\t\t\tvar el = null;\n\t\t\ttry {\n\t\t\t\tel = window.document.querySelector(sel);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(e);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (!el) {\n\t\t\t\tconsole.warn('No element matches the selector: %s', sel);\n\t\t\t}\n\t\t\treturn el;\n\t\t}\n\n\t\tif (jsc.isNode(nodeOrSelector)) {\n\t\t\t// DOM node\n\t\t\treturn nodeOrSelector;\n\t\t}\n\n\t\tconsole.warn('Invalid node of type %s: %s', typeof nodeOrSelector, nodeOrSelector);\n\t\treturn null;\n\t},\n\n\n\t// See https://stackoverflow.com/questions/384286/\n\tisNode : function (val) {\n\t\tif (typeof Node === 'object') {\n\t\t\treturn val instanceof Node;\n\t\t}\n\t\treturn val && typeof val === 'object' && typeof val.nodeType === 'number' && typeof val.nodeName === 'string';\n\t},\n\n\n\tnodeName : function (node) {\n\t\tif (node && node.nodeName) {\n\t\t\treturn node.nodeName.toLowerCase();\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tremoveChildren : function (node) {\n\t\twhile (node.firstChild) {\n\t\t\tnode.removeChild(node.firstChild);\n\t\t}\n\t},\n\n\n\tisTextInput : function (el) {\n\t\treturn el && jsc.nodeName(el) === 'input' && el.type.toLowerCase() === 'text';\n\t},\n\n\n\tisButton : function (el) {\n\t\tif (!el) {\n\t\t\treturn false;\n\t\t}\n\t\tvar n = jsc.nodeName(el);\n\t\treturn (\n\t\t\t(n === 'button') ||\n\t\t\t(n === 'input' && ['button', 'submit', 'reset'].indexOf(el.type.toLowerCase()) > -1)\n\t\t);\n\t},\n\n\n\tisButtonEmpty : function (el) {\n\t\tswitch (jsc.nodeName(el)) {\n\t\t\tcase 'input': return (!el.value || el.value.trim() === '');\n\t\t\tcase 'button': return (el.textContent.trim() === '');\n\t\t}\n\t\treturn null; // could not determine element's text\n\t},\n\n\n\t// See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n\tisPassiveEventSupported : (function () {\n\t\tvar supported = false;\n\n\t\ttry {\n\t\t\tvar opts = Object.defineProperty({}, 'passive', {\n\t\t\t\tget: function () { supported = true; }\n\t\t\t});\n\t\t\twindow.addEventListener('testPassive', null, opts);\n\t\t\twindow.removeEventListener('testPassive', null, opts);\n\t\t} catch (e) {}\n\n\t\treturn supported;\n\t})(),\n\n\n\tisColorAttrSupported : (function () {\n\t\tvar elm = window.document.createElement('input');\n\t\tif (elm.setAttribute) {\n\t\t\telm.setAttribute('type', 'color');\n\t\t\tif (elm.type.toLowerCase() == 'color') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t})(),\n\n\n\tdataProp : '_data_jscolor',\n\n\n\t// usage:\n\t//   setData(obj, prop, value)\n\t//   setData(obj, {prop:value, ...})\n\t//\n\tsetData : function () {\n\t\tvar obj = arguments[0];\n\n\t\tif (arguments.length === 3) {\n\t\t\t// setting a single property\n\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\n\t\t\tvar prop = arguments[1];\n\t\t\tvar value = arguments[2];\n\n\t\t\tdata[prop] = value;\n\t\t\treturn true;\n\n\t\t} else if (arguments.length === 2 && typeof arguments[1] === 'object') {\n\t\t\t// setting multiple properties\n\t\t\tvar data = obj.hasOwnProperty(jsc.dataProp) ? obj[jsc.dataProp] : (obj[jsc.dataProp] = {});\n\t\t\tvar map = arguments[1];\n\n\t\t\tfor (var prop in map) {\n\t\t\t\tif (map.hasOwnProperty(prop)) {\n\t\t\t\t\tdata[prop] = map[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tthrow new Error('Invalid arguments');\n\t},\n\n\n\t// usage:\n\t//   removeData(obj, prop, [prop...])\n\t//\n\tremoveData : function () {\n\t\tvar obj = arguments[0];\n\t\tif (!obj.hasOwnProperty(jsc.dataProp)) {\n\t\t\treturn true; // data object does not exist\n\t\t}\n\t\tfor (var i = 1; i < arguments.length; i += 1) {\n\t\t\tvar prop = arguments[i];\n\t\t\tdelete obj[jsc.dataProp][prop];\n\t\t}\n\t\treturn true;\n\t},\n\n\n\tgetData : function (obj, prop, setDefault) {\n\t\tif (!obj.hasOwnProperty(jsc.dataProp)) {\n\t\t\t// data object does not exist\n\t\t\tif (setDefault !== undefined) {\n\t\t\t\tobj[jsc.dataProp] = {}; // create data object\n\t\t\t} else {\n\t\t\t\treturn undefined; // no value to return\n\t\t\t}\n\t\t}\n\t\tvar data = obj[jsc.dataProp];\n\n\t\tif (!data.hasOwnProperty(prop) && setDefault !== undefined) {\n\t\t\tdata[prop] = setDefault;\n\t\t}\n\t\treturn data[prop];\n\t},\n\n\n\tgetDataAttr : function (el, name) {\n\t\tvar attrName = 'data-' + name;\n\t\tvar attrValue = el.getAttribute(attrName);\n\t\treturn attrValue;\n\t},\n\n\n\tsetDataAttr : function (el, name, value) {\n\t\tvar attrName = 'data-' + name;\n\t\tel.setAttribute(attrName, value);\n\t},\n\n\n\t_attachedGroupEvents : {},\n\n\n\tattachGroupEvent : function (groupName, el, evnt, func) {\n\t\tif (!jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n\t\t\tjsc._attachedGroupEvents[groupName] = [];\n\t\t}\n\t\tjsc._attachedGroupEvents[groupName].push([el, evnt, func]);\n\t\tel.addEventListener(evnt, func, false);\n\t},\n\n\n\tdetachGroupEvents : function (groupName) {\n\t\tif (jsc._attachedGroupEvents.hasOwnProperty(groupName)) {\n\t\t\tfor (var i = 0; i < jsc._attachedGroupEvents[groupName].length; i += 1) {\n\t\t\t\tvar evt = jsc._attachedGroupEvents[groupName][i];\n\t\t\t\tevt[0].removeEventListener(evt[1], evt[2], false);\n\t\t\t}\n\t\t\tdelete jsc._attachedGroupEvents[groupName];\n\t\t}\n\t},\n\n\n\tpreventDefault : function (e) {\n\t\tif (e.preventDefault) { e.preventDefault(); }\n\t\te.returnValue = false;\n\t},\n\n\n\tcaptureTarget : function (target) {\n\t\t// IE\n\t\tif (target.setCapture) {\n\t\t\tjsc._capturedTarget = target;\n\t\t\tjsc._capturedTarget.setCapture();\n\t\t}\n\t},\n\n\n\treleaseTarget : function () {\n\t\t// IE\n\t\tif (jsc._capturedTarget) {\n\t\t\tjsc._capturedTarget.releaseCapture();\n\t\t\tjsc._capturedTarget = null;\n\t\t}\n\t},\n\n\n\ttriggerEvent : function (el, eventName, bubbles, cancelable) {\n\t\tif (!el) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar ev = null;\n\n\t\tif (typeof Event === 'function') {\n\t\t\tev = new Event(eventName, {\n\t\t\t\tbubbles: bubbles,\n\t\t\t\tcancelable: cancelable\n\t\t\t});\n\t\t} else {\n\t\t\t// IE\n\t\t\tev = window.document.createEvent('Event');\n\t\t\tev.initEvent(eventName, bubbles, cancelable);\n\t\t}\n\n\t\tif (!ev) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// so that we know that the event was triggered internally\n\t\tjsc.setData(ev, 'internal', true);\n\n\t\tel.dispatchEvent(ev);\n\t\treturn true;\n\t},\n\n\n\ttriggerInputEvent : function (el, eventName, bubbles, cancelable) {\n\t\tif (!el) {\n\t\t\treturn;\n\t\t}\n\t\tif (jsc.isTextInput(el)) {\n\t\t\tjsc.triggerEvent(el, eventName, bubbles, cancelable);\n\t\t}\n\t},\n\n\n\teventKey : function (ev) {\n\t\tvar keys = {\n\t\t\t9: 'Tab',\n\t\t\t13: 'Enter',\n\t\t\t27: 'Escape',\n\t\t};\n\t\tif (typeof ev.code === 'string') {\n\t\t\treturn ev.code;\n\t\t} else if (ev.keyCode !== undefined && keys.hasOwnProperty(ev.keyCode)) {\n\t\t\treturn keys[ev.keyCode];\n\t\t}\n\t\treturn null;\n\t},\n\n\n\tstrList : function (str) {\n\t\tif (!str) {\n\t\t\treturn [];\n\t\t}\n\t\treturn str.replace(/^\\s+|\\s+$/g, '').split(/\\s+/);\n\t},\n\n\n\t// The className parameter (str) can only contain a single class name\n\thasClass : function (elm, className) {\n\t\tif (!className) {\n\t\t\treturn false;\n\t\t}\n\t\tif (elm.classList !== undefined) {\n\t\t\treturn elm.classList.contains(className);\n\t\t}\n\t\t// polyfill\n\t\treturn -1 != (' ' + elm.className.replace(/\\s+/g, ' ') + ' ').indexOf(' ' + className + ' ');\n\t},\n\n\n\t// The className parameter (str) can contain multiple class names separated by whitespace\n\taddClass : function (elm, className) {\n\t\tvar classNames = jsc.strList(className);\n\n\t\tif (elm.classList !== undefined) {\n\t\t\tfor (var i = 0; i < classNames.length; i += 1) {\n\t\t\t\telm.classList.add(classNames[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t// polyfill\n\t\tfor (var i = 0; i < classNames.length; i += 1) {\n\t\t\tif (!jsc.hasClass(elm, classNames[i])) {\n\t\t\t\telm.className += (elm.className ? ' ' : '') + classNames[i];\n\t\t\t}\n\t\t}\n\t},\n\n\n\t// The className parameter (str) can contain multiple class names separated by whitespace\n\tremoveClass : function (elm, className) {\n\t\tvar classNames = jsc.strList(className);\n\n\t\tif (elm.classList !== undefined) {\n\t\t\tfor (var i = 0; i < classNames.length; i += 1) {\n\t\t\t\telm.classList.remove(classNames[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\t// polyfill\n\t\tfor (var i = 0; i < classNames.length; i += 1) {\n\t\t\tvar repl = new RegExp(\n\t\t\t\t'^\\\\s*' + classNames[i] + '\\\\s*|' +\n\t\t\t\t'\\\\s*' + classNames[i] + '\\\\s*$|' +\n\t\t\t\t'\\\\s+' + classNames[i] + '(\\\\s+)',\n\t\t\t\t'g'\n\t\t\t);\n\t\t\telm.className = elm.className.replace(repl, '$1');\n\t\t}\n\t},\n\n\n\tgetCompStyle : function (elm) {\n\t\tvar compStyle = window.getComputedStyle ? window.getComputedStyle(elm) : elm.currentStyle;\n\n\t\t// Note: In Firefox, getComputedStyle returns null in a hidden iframe,\n\t\t// that's why we need to check if the returned value is non-empty\n\t\tif (!compStyle) {\n\t\t\treturn {};\n\t\t}\n\t\treturn compStyle;\n\t},\n\n\n\t// Note:\n\t//   Setting a property to NULL reverts it to the state before it was first set\n\t//   with the 'reversible' flag enabled\n\t//\n\tsetStyle : function (elm, styles, important, reversible) {\n\t\t// using '' for standard priority (IE10 apparently doesn't like value undefined)\n\t\tvar priority = important ? 'important' : '';\n\t\tvar origStyle = null;\n\n\t\tfor (var prop in styles) {\n\t\t\tif (styles.hasOwnProperty(prop)) {\n\t\t\t\tvar setVal = null;\n\n\t\t\t\tif (styles[prop] === null) {\n\t\t\t\t\t// reverting a property value\n\n\t\t\t\t\tif (!origStyle) {\n\t\t\t\t\t\t// get the original style object, but dont't try to create it if it doesn't exist\n\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle');\n\t\t\t\t\t}\n\t\t\t\t\tif (origStyle && origStyle.hasOwnProperty(prop)) {\n\t\t\t\t\t\t// we have property's original value -> use it\n\t\t\t\t\t\tsetVal = origStyle[prop];\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\t// setting a property value\n\n\t\t\t\t\tif (reversible) {\n\t\t\t\t\t\tif (!origStyle) {\n\t\t\t\t\t\t\t// get the original style object and if it doesn't exist, create it\n\t\t\t\t\t\t\torigStyle = jsc.getData(elm, 'origStyle', {});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!origStyle.hasOwnProperty(prop)) {\n\t\t\t\t\t\t\t// original property value not yet stored -> store it\n\t\t\t\t\t\t\torigStyle[prop] = elm.style[prop];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsetVal = styles[prop];\n\t\t\t\t}\n\n\t\t\t\tif (setVal !== null) {\n\t\t\t\t\telm.style.setProperty(prop, setVal, priority);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\n\thexColor : function (r, g, b) {\n\t\treturn '#' + (\n\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\n\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\n\t\t\t('0' + Math.round(b).toString(16)).substr(-2)\n\t\t).toUpperCase();\n\t},\n\n\n\thexaColor : function (r, g, b, a) {\n\t\treturn '#' + (\n\t\t\t('0' + Math.round(r).toString(16)).substr(-2) +\n\t\t\t('0' + Math.round(g).toString(16)).substr(-2) +\n\t\t\t('0' + Math.round(b).toString(16)).substr(-2) +\n\t\t\t('0' + Math.round(a * 255).toString(16)).substr(-2)\n\t\t).toUpperCase();\n\t},\n\n\n\trgbColor : function (r, g, b) {\n\t\treturn 'rgb(' +\n\t\t\tMath.round(r) + ',' +\n\t\t\tMath.round(g) + ',' +\n\t\t\tMath.round(b) +\n\t\t')';\n\t},\n\n\n\trgbaColor : function (r, g, b, a) {\n\t\treturn 'rgba(' +\n\t\t\tMath.round(r) + ',' +\n\t\t\tMath.round(g) + ',' +\n\t\t\tMath.round(b) + ',' +\n\t\t\t(Math.round((a===undefined || a===null ? 1 : a) * 100) / 100) +\n\t\t')';\n\t},\n\n\n\tlinearGradient : (function () {\n\n\t\tfunction getFuncName () {\n\t\t\tvar stdName = 'linear-gradient';\n\t\t\tvar prefixes = ['', '-webkit-', '-moz-', '-o-', '-ms-'];\n\t\t\tvar helper = window.document.createElement('div');\n\n\t\t\tfor (var i = 0; i < prefixes.length; i += 1) {\n\t\t\t\tvar tryFunc = prefixes[i] + stdName;\n\t\t\t\tvar tryVal = tryFunc + '(to right, rgba(0,0,0,0), rgba(0,0,0,0))';\n\n\t\t\t\thelper.style.background = tryVal;\n\t\t\t\tif (helper.style.background) { // CSS background successfully set -> function name is supported\n\t\t\t\t\treturn tryFunc;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn stdName; // fallback to standard 'linear-gradient' without vendor prefix\n\t\t}\n\n\t\tvar funcName = getFuncName();\n\n\t\treturn function () {\n\t\t\treturn funcName + '(' + Array.prototype.join.call(arguments, ', ') + ')';\n\t\t};\n\n\t})(),\n\n\n\tsetBorderRadius : function (elm, value) {\n\t\tjsc.setStyle(elm, {'border-radius' : value || '0'});\n\t},\n\n\n\tsetBoxShadow : function (elm, value) {\n\t\tjsc.setStyle(elm, {'box-shadow': value || 'none'});\n\t},\n\n\n\tgetElementPos : function (e, relativeToViewport) {\n\t\tvar x=0, y=0;\n\t\tvar rect = e.getBoundingClientRect();\n\t\tx = rect.left;\n\t\ty = rect.top;\n\t\tif (!relativeToViewport) {\n\t\t\tvar viewPos = jsc.getViewPos();\n\t\t\tx += viewPos[0];\n\t\t\ty += viewPos[1];\n\t\t}\n\t\treturn [x, y];\n\t},\n\n\n\tgetElementSize : function (e) {\n\t\treturn [e.offsetWidth, e.offsetHeight];\n\t},\n\n\n\t// get pointer's X/Y coordinates relative to viewport\n\tgetAbsPointerPos : function (e) {\n\t\tvar x = 0, y = 0;\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n\t\t\t// touch devices\n\t\t\tx = e.changedTouches[0].clientX;\n\t\t\ty = e.changedTouches[0].clientY;\n\t\t} else if (typeof e.clientX === 'number') {\n\t\t\tx = e.clientX;\n\t\t\ty = e.clientY;\n\t\t}\n\t\treturn { x: x, y: y };\n\t},\n\n\n\t// get pointer's X/Y coordinates relative to target element\n\tgetRelPointerPos : function (e) {\n\t\tvar target = e.target || e.srcElement;\n\t\tvar targetRect = target.getBoundingClientRect();\n\n\t\tvar x = 0, y = 0;\n\n\t\tvar clientX = 0, clientY = 0;\n\t\tif (typeof e.changedTouches !== 'undefined' && e.changedTouches.length) {\n\t\t\t// touch devices\n\t\t\tclientX = e.changedTouches[0].clientX;\n\t\t\tclientY = e.changedTouches[0].clientY;\n\t\t} else if (typeof e.clientX === 'number') {\n\t\t\tclientX = e.clientX;\n\t\t\tclientY = e.clientY;\n\t\t}\n\n\t\tx = clientX - targetRect.left;\n\t\ty = clientY - targetRect.top;\n\t\treturn { x: x, y: y };\n\t},\n\n\n\tgetViewPos : function () {\n\t\tvar doc = window.document.documentElement;\n\t\treturn [\n\t\t\t(window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\n\t\t\t(window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0)\n\t\t];\n\t},\n\n\n\tgetViewSize : function () {\n\t\tvar doc = window.document.documentElement;\n\t\treturn [\n\t\t\t(window.innerWidth || doc.clientWidth),\n\t\t\t(window.innerHeight || doc.clientHeight),\n\t\t];\n\t},\n\n\n\t// r: 0-255\n\t// g: 0-255\n\t// b: 0-255\n\t//\n\t// returns: [ 0-360, 0-100, 0-100 ]\n\t//\n\tRGB_HSV : function (r, g, b) {\n\t\tr /= 255;\n\t\tg /= 255;\n\t\tb /= 255;\n\t\tvar n = Math.min(Math.min(r,g),b);\n\t\tvar v = Math.max(Math.max(r,g),b);\n\t\tvar m = v - n;\n\t\tif (m === 0) { return [ null, 0, 100 * v ]; }\n\t\tvar h = r===n ? 3+(b-g)/m : (g===n ? 5+(r-b)/m : 1+(g-r)/m);\n\t\treturn [\n\t\t\t60 * (h===6?0:h),\n\t\t\t100 * (m/v),\n\t\t\t100 * v\n\t\t];\n\t},\n\n\n\t// h: 0-360\n\t// s: 0-100\n\t// v: 0-100\n\t//\n\t// returns: [ 0-255, 0-255, 0-255 ]\n\t//\n\tHSV_RGB : function (h, s, v) {\n\t\tvar u = 255 * (v / 100);\n\n\t\tif (h === null) {\n\t\t\treturn [ u, u, u ];\n\t\t}\n\n\t\th /= 60;\n\t\ts /= 100;\n\n\t\tvar i = Math.floor(h);\n\t\tvar f = i%2 ? h-i : 1-(h-i);\n\t\tvar m = u * (1 - s);\n\t\tvar n = u * (1 - s * f);\n\t\tswitch (i) {\n\t\t\tcase 6:\n\t\t\tcase 0: return [u,n,m];\n\t\t\tcase 1: return [n,u,m];\n\t\t\tcase 2: return [m,u,n];\n\t\t\tcase 3: return [m,n,u];\n\t\t\tcase 4: return [n,m,u];\n\t\t\tcase 5: return [u,m,n];\n\t\t}\n\t},\n\n\n\tparseColorString : function (str) {\n\t\tvar ret = {\n\t\t\trgba: null,\n\t\t\tformat: null // 'hex' | 'hexa' | 'rgb' | 'rgba'\n\t\t};\n\n\t\tvar m;\n\n\t\tif (m = str.match(/^\\W*([0-9A-F]{3,8})\\W*$/i)) {\n\t\t\t// HEX notation\n\n\t\t\tif (m[1].length === 8) {\n\t\t\t\t// 8-char notation (= with alpha)\n\t\t\t\tret.format = 'hexa';\n\t\t\t\tret.rgba = [\n\t\t\t\t\tparseInt(m[1].substr(0,2),16),\n\t\t\t\t\tparseInt(m[1].substr(2,2),16),\n\t\t\t\t\tparseInt(m[1].substr(4,2),16),\n\t\t\t\t\tparseInt(m[1].substr(6,2),16) / 255\n\t\t\t\t];\n\n\t\t\t} else if (m[1].length === 6) {\n\t\t\t\t// 6-char notation\n\t\t\t\tret.format = 'hex';\n\t\t\t\tret.rgba = [\n\t\t\t\t\tparseInt(m[1].substr(0,2),16),\n\t\t\t\t\tparseInt(m[1].substr(2,2),16),\n\t\t\t\t\tparseInt(m[1].substr(4,2),16),\n\t\t\t\t\tnull\n\t\t\t\t];\n\n\t\t\t} else if (m[1].length === 3) {\n\t\t\t\t// 3-char notation\n\t\t\t\tret.format = 'hex';\n\t\t\t\tret.rgba = [\n\t\t\t\t\tparseInt(m[1].charAt(0) + m[1].charAt(0),16),\n\t\t\t\t\tparseInt(m[1].charAt(1) + m[1].charAt(1),16),\n\t\t\t\t\tparseInt(m[1].charAt(2) + m[1].charAt(2),16),\n\t\t\t\t\tnull\n\t\t\t\t];\n\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t}\n\n\t\tif (m = str.match(/^\\W*rgba?\\(([^)]*)\\)\\W*$/i)) {\n\t\t\t// rgb(...) or rgba(...) notation\n\n\t\t\tvar par = m[1].split(',');\n\t\t\tvar re = /^\\s*(\\d+|\\d*\\.\\d+|\\d+\\.\\d*)\\s*$/;\n\t\t\tvar mR, mG, mB, mA;\n\t\t\tif (\n\t\t\t\tpar.length >= 3 &&\n\t\t\t\t(mR = par[0].match(re)) &&\n\t\t\t\t(mG = par[1].match(re)) &&\n\t\t\t\t(mB = par[2].match(re))\n\t\t\t) {\n\t\t\t\tret.format = 'rgb';\n\t\t\t\tret.rgba = [\n\t\t\t\t\tparseFloat(mR[1]) || 0,\n\t\t\t\t\tparseFloat(mG[1]) || 0,\n\t\t\t\t\tparseFloat(mB[1]) || 0,\n\t\t\t\t\tnull\n\t\t\t\t];\n\n\t\t\t\tif (\n\t\t\t\t\tpar.length >= 4 &&\n\t\t\t\t\t(mA = par[3].match(re))\n\t\t\t\t) {\n\t\t\t\t\tret.format = 'rgba';\n\t\t\t\t\tret.rgba[3] = parseFloat(mA[1]) || 0;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\n\tparsePaletteValue : function (mixed) {\n\t\tvar vals = [];\n\n\t\tif (typeof mixed === 'string') { // input is a string of space separated color values\n\t\t\t// rgb() and rgba() may contain spaces too, so let's find all color values by regex\n\t\t\tmixed.replace(/#[0-9A-F]{3}([0-9A-F]{3})?|rgba?\\(([^)]*)\\)/ig, function (val) {\n\t\t\t\tvals.push(val);\n\t\t\t});\n\t\t} else if (Array.isArray(mixed)) { // input is an array of color values\n\t\t\tvals = mixed;\n\t\t}\n\n\t\t// convert all values into uniform color format\n\n\t\tvar colors = [];\n\n\t\tfor (var i = 0; i < vals.length; i++) {\n\t\t\tvar color = jsc.parseColorString(vals[i]);\n\t\t\tif (color) {\n\t\t\t\tcolors.push(color);\n\t\t\t}\n\t\t}\n\n\t\treturn colors;\n\t},\n\n\n\tcontainsTranparentColor : function (colors) {\n\t\tfor (var i = 0; i < colors.length; i++) {\n\t\t\tvar a = colors[i].rgba[3];\n\t\t\tif (a !== null && a < 1.0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\n\n\tisAlphaFormat : function (format) {\n\t\tswitch (format.toLowerCase()) {\n\t\tcase 'hexa':\n\t\tcase 'rgba':\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\n\t// Canvas scaling for retina displays\n\t//\n\t// adapted from https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n\t//\n\tscaleCanvasForHighDPR : function (canvas) {\n\t\tvar dpr = window.devicePixelRatio || 1;\n\t\tcanvas.width *= dpr;\n\t\tcanvas.height *= dpr;\n\t\tvar ctx = canvas.getContext('2d');\n\t\tctx.scale(dpr, dpr);\n\t},\n\n\n\tgenColorPreviewCanvas : function (color, separatorPos, specWidth, scaleForHighDPR) {\n\n\t\tvar sepW = Math.round(jsc.pub.previewSeparator.length);\n\t\tvar sqSize = jsc.pub.chessboardSize;\n\t\tvar sqColor1 = jsc.pub.chessboardColor1;\n\t\tvar sqColor2 = jsc.pub.chessboardColor2;\n\n\t\tvar cWidth = specWidth ? specWidth : sqSize * 2;\n\t\tvar cHeight = sqSize * 2;\n\n\t\tvar canvas = jsc.createEl('canvas');\n\t\tvar ctx = canvas.getContext('2d');\n\n\t\tcanvas.width = cWidth;\n\t\tcanvas.height = cHeight;\n\t\tif (scaleForHighDPR) {\n\t\t\tjsc.scaleCanvasForHighDPR(canvas);\n\t\t}\n\n\t\t// transparency chessboard - background\n\t\tctx.fillStyle = sqColor1;\n\t\tctx.fillRect(0, 0, cWidth, cHeight);\n\n\t\t// transparency chessboard - squares\n\t\tctx.fillStyle = sqColor2;\n\t\tfor (var x = 0; x < cWidth; x += sqSize * 2) {\n\t\t\tctx.fillRect(x, 0, sqSize, sqSize);\n\t\t\tctx.fillRect(x + sqSize, sqSize, sqSize, sqSize);\n\t\t}\n\n\t\tif (color) {\n\t\t\t// actual color in foreground\n\t\t\tctx.fillStyle = color;\n\t\t\tctx.fillRect(0, 0, cWidth, cHeight);\n\t\t}\n\n\t\tvar start = null;\n\t\tswitch (separatorPos) {\n\t\t\tcase 'left':\n\t\t\t\tstart = 0;\n\t\t\t\tctx.clearRect(0, 0, sepW/2, cHeight);\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tstart = cWidth - sepW;\n\t\t\t\tctx.clearRect(cWidth - (sepW/2), 0, sepW/2, cHeight);\n\t\t\t\tbreak;\n\t\t}\n\t\tif (start !== null) {\n\t\t\tctx.lineWidth = 1;\n\t\t\tfor (var i = 0; i < jsc.pub.previewSeparator.length; i += 1) {\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.strokeStyle = jsc.pub.previewSeparator[i];\n\t\t\t\tctx.moveTo(0.5 + start + i, 0);\n\t\t\t\tctx.lineTo(0.5 + start + i, cHeight);\n\t\t\t\tctx.stroke();\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcanvas: canvas,\n\t\t\twidth: cWidth,\n\t\t\theight: cHeight,\n\t\t};\n\t},\n\n\n\t// if position or width is not set => fill the entire element (0%-100%)\n\tgenColorPreviewGradient : function (color, position, width) {\n\t\tvar params = [];\n\n\t\tif (position && width) {\n\t\t\tparams = [\n\t\t\t\t'to ' + {'left':'right', 'right':'left'}[position],\n\t\t\t\tcolor + ' 0%',\n\t\t\t\tcolor + ' ' + width + 'px',\n\t\t\t\t'rgba(0,0,0,0) ' + (width + 1) + 'px',\n\t\t\t\t'rgba(0,0,0,0) 100%',\n\t\t\t];\n\t\t} else {\n\t\t\tparams = [\n\t\t\t\t'to right',\n\t\t\t\tcolor + ' 0%',\n\t\t\t\tcolor + ' 100%',\n\t\t\t];\n\t\t}\n\n\t\treturn jsc.linearGradient.apply(this, params);\n\t},\n\n\n\tredrawPosition : function () {\n\n\t\tif (!jsc.picker || !jsc.picker.owner) {\n\t\t\treturn; // picker is not shown\n\t\t}\n\n\t\tvar thisObj = jsc.picker.owner;\n\n\t\tvar tp, vp;\n\n\t\tif (thisObj.fixed) {\n\t\t\t// Fixed elements are positioned relative to viewport,\n\t\t\t// therefore we can ignore the scroll offset\n\t\t\ttp = jsc.getElementPos(thisObj.targetElement, true); // target pos\n\t\t\tvp = [0, 0]; // view pos\n\t\t} else {\n\t\t\ttp = jsc.getElementPos(thisObj.targetElement); // target pos\n\t\t\tvp = jsc.getViewPos(); // view pos\n\t\t}\n\n\t\tvar ts = jsc.getElementSize(thisObj.targetElement); // target size\n\t\tvar vs = jsc.getViewSize(); // view size\n\t\tvar pd = jsc.getPickerDims(thisObj);\n\t\tvar ps = [pd.borderW, pd.borderH]; // picker outer size\n\t\tvar a, b, c;\n\t\tswitch (thisObj.position.toLowerCase()) {\n\t\t\tcase 'left': a=1; b=0; c=-1; break;\n\t\t\tcase 'right':a=1; b=0; c=1; break;\n\t\t\tcase 'top':  a=0; b=1; c=-1; break;\n\t\t\tdefault:     a=0; b=1; c=1; break;\n\t\t}\n\t\tvar l = (ts[b]+ps[b])/2;\n\n\t\t// compute picker position\n\t\tif (!thisObj.smartPosition) {\n\t\t\tvar pp = [\n\t\t\t\ttp[a],\n\t\t\t\ttp[b]+ts[b]-l+l*c\n\t\t\t];\n\t\t} else {\n\t\t\tvar pp = [\n\t\t\t\t-vp[a]+tp[a]+ps[a] > vs[a] ?\n\t\t\t\t\t(-vp[a]+tp[a]+ts[a]/2 > vs[a]/2 && tp[a]+ts[a]-ps[a] >= 0 ? tp[a]+ts[a]-ps[a] : tp[a]) :\n\t\t\t\t\ttp[a],\n\t\t\t\t-vp[b]+tp[b]+ts[b]+ps[b]-l+l*c > vs[b] ?\n\t\t\t\t\t(-vp[b]+tp[b]+ts[b]/2 > vs[b]/2 && tp[b]+ts[b]-l-l*c >= 0 ? tp[b]+ts[b]-l-l*c : tp[b]+ts[b]-l+l*c) :\n\t\t\t\t\t(tp[b]+ts[b]-l+l*c >= 0 ? tp[b]+ts[b]-l+l*c : tp[b]+ts[b]-l-l*c)\n\t\t\t];\n\t\t}\n\n\t\tvar x = pp[a];\n\t\tvar y = pp[b];\n\t\tvar positionValue = thisObj.fixed ? 'fixed' : 'absolute';\n\t\tvar contractShadow =\n\t\t\t(pp[0] + ps[0] > tp[0] || pp[0] < tp[0] + ts[0]) &&\n\t\t\t(pp[1] + ps[1] < tp[1] + ts[1]);\n\n\t\tjsc._drawPosition(thisObj, x, y, positionValue, contractShadow);\n\t},\n\n\n\t_drawPosition : function (thisObj, x, y, positionValue, contractShadow) {\n\t\tvar vShadow = contractShadow ? 0 : thisObj.shadowBlur; // px\n\n\t\tjsc.picker.wrap.style.position = positionValue;\n\t\tjsc.picker.wrap.style.left = x + 'px';\n\t\tjsc.picker.wrap.style.top = y + 'px';\n\n\t\tjsc.setBoxShadow(\n\t\t\tjsc.picker.boxS,\n\t\t\tthisObj.shadow ?\n\t\t\t\tnew jsc.BoxShadow(0, vShadow, thisObj.shadowBlur, 0, thisObj.shadowColor) :\n\t\t\t\tnull);\n\t},\n\n\n\tgetPickerDims : function (thisObj) {\n\t\tvar w = 2 * thisObj.controlBorderWidth + thisObj.width;\n\t\tvar h = 2 * thisObj.controlBorderWidth + thisObj.height;\n\n\t\tvar sliderSpace = 2 * thisObj.controlBorderWidth + 2 * jsc.getControlPadding(thisObj) + thisObj.sliderSize;\n\n\t\tif (jsc.getSliderChannel(thisObj)) {\n\t\t\tw += sliderSpace;\n\t\t}\n\t\tif (thisObj.hasAlphaChannel()) {\n\t\t\tw += sliderSpace;\n\t\t}\n\n\t\tvar pal = jsc.getPaletteDims(thisObj, w);\n\n\t\tif (pal.height) {\n\t\t\th += pal.height + thisObj.padding;\n\t\t}\n\t\tif (thisObj.closeButton) {\n\t\t\th += 2 * thisObj.controlBorderWidth + thisObj.padding + thisObj.buttonHeight;\n\t\t}\n\n\t\tvar pW = w + (2 * thisObj.padding);\n\t\tvar pH = h + (2 * thisObj.padding);\n\n\t\treturn {\n\t\t\tcontentW: w,\n\t\t\tcontentH: h,\n\t\t\tpaddedW: pW,\n\t\t\tpaddedH: pH,\n\t\t\tborderW: pW + (2 * thisObj.borderWidth),\n\t\t\tborderH: pH + (2 * thisObj.borderWidth),\n\t\t\tpalette: pal,\n\t\t};\n\t},\n\n\n\tgetPaletteDims : function (thisObj, width) {\n\t\tvar cols = 0, rows = 0, cellW = 0, cellH = 0, height = 0;\n\t\tvar sampleCount = thisObj._palette ? thisObj._palette.length : 0;\n\n\t\tif (sampleCount) {\n\t\t\tcols = thisObj.paletteCols;\n\t\t\trows = cols > 0 ? Math.ceil(sampleCount / cols) : 0;\n\n\t\t\t// color sample's dimensions (includes border)\n\t\t\tcellW = Math.max(1, Math.floor((width - ((cols - 1) * thisObj.paletteSpacing)) / cols));\n\t\t\tcellH = thisObj.paletteHeight ? Math.min(thisObj.paletteHeight, cellW) : cellW;\n\t\t}\n\n\t\tif (rows) {\n\t\t\theight =\n\t\t\t\trows * cellH +\n\t\t\t\t(rows - 1) * thisObj.paletteSpacing;\n\t\t}\n\n\t\treturn {\n\t\t\tcols: cols,\n\t\t\trows: rows,\n\t\t\tcellW: cellW,\n\t\t\tcellH: cellH,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t};\n\t},\n\n\n\tgetControlPadding : function (thisObj) {\n\t\treturn Math.max(\n\t\t\tthisObj.padding / 2,\n\t\t\t(2 * thisObj.pointerBorderWidth + thisObj.pointerThickness) - thisObj.controlBorderWidth\n\t\t);\n\t},\n\n\n\tgetPadYChannel : function (thisObj) {\n\t\tswitch (thisObj.mode.charAt(1).toLowerCase()) {\n\t\t\tcase 'v': return 'v'; break;\n\t\t}\n\t\treturn 's';\n\t},\n\n\n\tgetSliderChannel : function (thisObj) {\n\t\tif (thisObj.mode.length > 2) {\n\t\t\tswitch (thisObj.mode.charAt(2).toLowerCase()) {\n\t\t\t\tcase 's': return 's'; break;\n\t\t\t\tcase 'v': return 'v'; break;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t},\n\n\n\t// calls function specified in picker's property\n\ttriggerCallback : function (thisObj, prop) {\n\t\tif (!thisObj[prop]) {\n\t\t\treturn; // callback func not specified\n\t\t}\n\t\tvar callback = null;\n\n\t\tif (typeof thisObj[prop] === 'string') {\n\t\t\t// string with code\n\t\t\ttry {\n\t\t\t\tcallback = new Function (thisObj[prop]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t} else {\n\t\t\t// function\n\t\t\tcallback = thisObj[prop];\n\t\t}\n\n\t\tif (callback) {\n\t\t\tcallback.call(thisObj);\n\t\t}\n\t},\n\n\n\t// Triggers a color change related event(s) on all picker instances.\n\t// It is possible to specify multiple events separated with a space.\n\ttriggerGlobal : function (eventNames) {\n\t\tvar inst = jsc.getInstances();\n\t\tfor (var i = 0; i < inst.length; i += 1) {\n\t\t\tinst[i].trigger(eventNames);\n\t\t}\n\t},\n\n\n\t_pointerMoveEvent : {\n\t\tmouse: 'mousemove',\n\t\ttouch: 'touchmove'\n\t},\n\t_pointerEndEvent : {\n\t\tmouse: 'mouseup',\n\t\ttouch: 'touchend'\n\t},\n\n\n\t_pointerOrigin : null,\n\t_capturedTarget : null,\n\n\n\tonDocumentKeyUp : function (e) {\n\t\tif (['Tab', 'Escape'].indexOf(jsc.eventKey(e)) !== -1) {\n\t\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\t\tjsc.picker.owner.tryHide();\n\t\t\t}\n\t\t}\n\t},\n\n\n\tonWindowResize : function (e) {\n\t\tjsc.redrawPosition();\n\t},\n\n\n\tonWindowScroll : function (e) {\n\t\tjsc.redrawPosition();\n\t},\n\n\n\tonParentScroll : function (e) {\n\t\t// hide the picker when one of the parent elements is scrolled\n\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\tjsc.picker.owner.tryHide();\n\t\t}\n\t},\n\n\n\tonDocumentMouseDown : function (e) {\n\t\tvar target = e.target || e.srcElement;\n\n\t\tif (target.jscolor && target.jscolor instanceof jsc.pub) { // clicked targetElement -> show picker\n\t\t\tif (target.jscolor.showOnClick && !target.disabled) {\n\t\t\t\ttarget.jscolor.show();\n\t\t\t}\n\t\t} else if (jsc.getData(target, 'gui')) { // clicked jscolor's GUI element\n\t\t\tvar control = jsc.getData(target, 'control');\n\t\t\tif (control) {\n\t\t\t\t// jscolor's control\n\t\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'mouse');\n\t\t\t}\n\t\t} else {\n\t\t\t// mouse is outside the picker's controls -> hide the color picker!\n\t\t\tif (jsc.picker && jsc.picker.owner) {\n\t\t\t\tjsc.picker.owner.tryHide();\n\t\t\t}\n\t\t}\n\t},\n\n\n\tonPickerTouchStart : function (e) {\n\t\tvar target = e.target || e.srcElement;\n\n\t\tif (jsc.getData(target, 'control')) {\n\t\t\tjsc.onControlPointerStart(e, target, jsc.getData(target, 'control'), 'touch');\n\t\t}\n\t},\n\n\n\tonControlPointerStart : function (e, target, controlName, pointerType) {\n\t\tvar thisObj = jsc.getData(target, 'instance');\n\n\t\tjsc.preventDefault(e);\n\t\tjsc.captureTarget(target);\n\n\t\tvar registerDragEvents = function (doc, offset) {\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerMoveEvent[pointerType],\n\t\t\t\tjsc.onDocumentPointerMove(e, target, controlName, pointerType, offset));\n\t\t\tjsc.attachGroupEvent('drag', doc, jsc._pointerEndEvent[pointerType],\n\t\t\t\tjsc.onDocumentPointerEnd(e, target, controlName, pointerType));\n\t\t};\n\n\t\tregisterDragEvents(window.document, [0, 0]);\n\n\t\tif (window.parent && window.frameElement) {\n\t\t\tvar rect = window.frameElement.getBoundingClientRect();\n\t\t\tvar ofs = [-rect.left, -rect.top];\n\t\t\tregisterDragEvents(window.parent.window.document, ofs);\n\t\t}\n\n\t\tvar abs = jsc.getAbsPointerPos(e);\n\t\tvar rel = jsc.getRelPointerPos(e);\n\t\tjsc._pointerOrigin = {\n\t\t\tx: abs.x - rel.x,\n\t\t\ty: abs.y - rel.y\n\t\t};\n\n\t\tswitch (controlName) {\n\t\tcase 'pad':\n\t\t\t// if the value slider is at the bottom, move it up\n\t\t\tif (jsc.getSliderChannel(thisObj) === 'v' && thisObj.channels.v === 0) {\n\t\t\t\tthisObj.fromHSVA(null, null, 100, null);\n\t\t\t}\n\t\t\tjsc.setPad(thisObj, e, 0, 0);\n\t\t\tbreak;\n\n\t\tcase 'sld':\n\t\t\tjsc.setSld(thisObj, e, 0);\n\t\t\tbreak;\n\n\t\tcase 'asld':\n\t\t\tjsc.setASld(thisObj, e, 0);\n\t\t\tbreak;\n\t\t}\n\t\tthisObj.trigger('input');\n\t},\n\n\n\tonDocumentPointerMove : function (e, target, controlName, pointerType, offset) {\n\t\treturn function (e) {\n\t\t\tvar thisObj = jsc.getData(target, 'instance');\n\t\t\tswitch (controlName) {\n\t\t\tcase 'pad':\n\t\t\t\tjsc.setPad(thisObj, e, offset[0], offset[1]);\n\t\t\t\tbreak;\n\n\t\t\tcase 'sld':\n\t\t\t\tjsc.setSld(thisObj, e, offset[1]);\n\t\t\t\tbreak;\n\n\t\t\tcase 'asld':\n\t\t\t\tjsc.setASld(thisObj, e, offset[1]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthisObj.trigger('input');\n\t\t}\n\t},\n\n\n\tonDocumentPointerEnd : function (e, target, controlName, pointerType) {\n\t\treturn function (e) {\n\t\t\tvar thisObj = jsc.getData(target, 'instance');\n\t\t\tjsc.detachGroupEvents('drag');\n\t\t\tjsc.releaseTarget();\n\n\t\t\t// Always trigger changes AFTER detaching outstanding mouse handlers,\n\t\t\t// in case some color change that occured in user-defined onChange/onInput handler\n\t\t\t// intruded into current mouse events\n\t\t\tthisObj.trigger('input');\n\t\t\tthisObj.trigger('change');\n\t\t};\n\t},\n\n\n\tonPaletteSampleClick : function (e) {\n\t\tvar target = e.currentTarget;\n\t\tvar thisObj = jsc.getData(target, 'instance');\n\t\tvar color = jsc.getData(target, 'color');\n\n\t\t// when format is flexible, use the original format of this color sample\n\t\tif (thisObj.format.toLowerCase() === 'any') {\n\t\t\tthisObj._setFormat(color.format); // adapt format\n\t\t\tif (!jsc.isAlphaFormat(thisObj.getFormat())) {\n\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\n\t\t\t}\n\t\t}\n\n\t\t// if this color doesn't specify alpha, use alpha of 1.0 (if applicable)\n\t\tif (color.rgba[3] === null) {\n\t\t\tif (thisObj.paletteSetsAlpha === true || (thisObj.paletteSetsAlpha === 'auto' && thisObj._paletteHasTransparency)) {\n\t\t\t\tcolor.rgba[3] = 1.0;\n\t\t\t}\n\t\t}\n\n\t\tthisObj.fromRGBA.apply(thisObj, color.rgba);\n\n\t\tthisObj.trigger('input');\n\t\tthisObj.trigger('change');\n\n\t\tif (thisObj.hideOnPaletteClick) {\n\t\t\tthisObj.hide();\n\t\t}\n\t},\n\n\n\tsetPad : function (thisObj, e, ofsX, ofsY) {\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\tvar x = ofsX + pointerAbs.x - jsc._pointerOrigin.x - thisObj.padding - thisObj.controlBorderWidth;\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n\n\t\tvar xVal = x * (360 / (thisObj.width - 1));\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\n\n\t\tswitch (jsc.getPadYChannel(thisObj)) {\n\t\tcase 's': thisObj.fromHSVA(xVal, yVal, null, null); break;\n\t\tcase 'v': thisObj.fromHSVA(xVal, null, yVal, null); break;\n\t\t}\n\t},\n\n\n\tsetSld : function (thisObj, e, ofsY) {\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n\t\tvar yVal = 100 - (y * (100 / (thisObj.height - 1)));\n\n\t\tswitch (jsc.getSliderChannel(thisObj)) {\n\t\tcase 's': thisObj.fromHSVA(null, yVal, null, null); break;\n\t\tcase 'v': thisObj.fromHSVA(null, null, yVal, null); break;\n\t\t}\n\t},\n\n\n\tsetASld : function (thisObj, e, ofsY) {\n\t\tvar pointerAbs = jsc.getAbsPointerPos(e);\n\t\tvar y = ofsY + pointerAbs.y - jsc._pointerOrigin.y - thisObj.padding - thisObj.controlBorderWidth;\n\t\tvar yVal = 1.0 - (y * (1.0 / (thisObj.height - 1)));\n\n\t\tif (yVal < 1.0) {\n\t\t\t// if format is flexible and the current format doesn't support alpha, switch to a suitable one\n\t\t\tvar fmt = thisObj.getFormat();\n\t\t\tif (thisObj.format.toLowerCase() === 'any' && !jsc.isAlphaFormat(fmt)) {\n\t\t\t\tthisObj._setFormat(fmt === 'hex' ? 'hexa' : 'rgba');\n\t\t\t}\n\t\t}\n\n\t\tthisObj.fromHSVA(null, null, null, yVal);\n\t},\n\n\n\tcreatePadCanvas : function () {\n\n\t\tvar ret = {\n\t\t\telm: null,\n\t\t\tdraw: null\n\t\t};\n\n\t\tvar canvas = jsc.createEl('canvas');\n\t\tvar ctx = canvas.getContext('2d');\n\n\t\tvar drawFunc = function (width, height, type) {\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\tvar hGrad = ctx.createLinearGradient(0, 0, canvas.width, 0);\n\t\t\thGrad.addColorStop(0 / 6, '#F00');\n\t\t\thGrad.addColorStop(1 / 6, '#FF0');\n\t\t\thGrad.addColorStop(2 / 6, '#0F0');\n\t\t\thGrad.addColorStop(3 / 6, '#0FF');\n\t\t\thGrad.addColorStop(4 / 6, '#00F');\n\t\t\thGrad.addColorStop(5 / 6, '#F0F');\n\t\t\thGrad.addColorStop(6 / 6, '#F00');\n\n\t\t\tctx.fillStyle = hGrad;\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\tvar vGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\tswitch (type.toLowerCase()) {\n\t\t\tcase 's':\n\t\t\t\tvGrad.addColorStop(0, 'rgba(255,255,255,0)');\n\t\t\t\tvGrad.addColorStop(1, 'rgba(255,255,255,1)');\n\t\t\t\tbreak;\n\t\t\tcase 'v':\n\t\t\t\tvGrad.addColorStop(0, 'rgba(0,0,0,0)');\n\t\t\t\tvGrad.addColorStop(1, 'rgba(0,0,0,1)');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tctx.fillStyle = vGrad;\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t};\n\n\t\tret.elm = canvas;\n\t\tret.draw = drawFunc;\n\n\t\treturn ret;\n\t},\n\n\n\tcreateSliderGradient : function () {\n\n\t\tvar ret = {\n\t\t\telm: null,\n\t\t\tdraw: null\n\t\t};\n\n\t\tvar canvas = jsc.createEl('canvas');\n\t\tvar ctx = canvas.getContext('2d');\n\n\t\tvar drawFunc = function (width, height, color1, color2) {\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\tgrad.addColorStop(0, color1);\n\t\t\tgrad.addColorStop(1, color2);\n\n\t\t\tctx.fillStyle = grad;\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t};\n\n\t\tret.elm = canvas;\n\t\tret.draw = drawFunc;\n\n\t\treturn ret;\n\t},\n\n\n\tcreateASliderGradient : function () {\n\n\t\tvar ret = {\n\t\t\telm: null,\n\t\t\tdraw: null\n\t\t};\n\n\t\tvar canvas = jsc.createEl('canvas');\n\t\tvar ctx = canvas.getContext('2d');\n\n\t\tvar drawFunc = function (width, height, color) {\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\n\t\t\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\t\tvar sqSize = canvas.width / 2;\n\t\t\tvar sqColor1 = jsc.pub.chessboardColor1;\n\t\t\tvar sqColor2 = jsc.pub.chessboardColor2;\n\n\t\t\t// dark gray background\n\t\t\tctx.fillStyle = sqColor1;\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\t\t\tif (sqSize > 0) { // to avoid infinite loop\n\t\t\t\tfor (var y = 0; y < canvas.height; y += sqSize * 2) {\n\t\t\t\t\t// light gray squares\n\t\t\t\t\tctx.fillStyle = sqColor2;\n\t\t\t\t\tctx.fillRect(0, y, sqSize, sqSize);\n\t\t\t\t\tctx.fillRect(sqSize, y + sqSize, sqSize, sqSize);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar grad = ctx.createLinearGradient(0, 0, 0, canvas.height);\n\t\t\tgrad.addColorStop(0, color);\n\t\t\tgrad.addColorStop(1, 'rgba(0,0,0,0)');\n\n\t\t\tctx.fillStyle = grad;\n\t\t\tctx.fillRect(0, 0, canvas.width, canvas.height);\n\t\t};\n\n\t\tret.elm = canvas;\n\t\tret.draw = drawFunc;\n\n\t\treturn ret;\n\t},\n\n\n\tBoxShadow : (function () {\n\t\tvar BoxShadow = function (hShadow, vShadow, blur, spread, color, inset) {\n\t\t\tthis.hShadow = hShadow;\n\t\t\tthis.vShadow = vShadow;\n\t\t\tthis.blur = blur;\n\t\t\tthis.spread = spread;\n\t\t\tthis.color = color;\n\t\t\tthis.inset = !!inset;\n\t\t};\n\n\t\tBoxShadow.prototype.toString = function () {\n\t\t\tvar vals = [\n\t\t\t\tMath.round(this.hShadow) + 'px',\n\t\t\t\tMath.round(this.vShadow) + 'px',\n\t\t\t\tMath.round(this.blur) + 'px',\n\t\t\t\tMath.round(this.spread) + 'px',\n\t\t\t\tthis.color\n\t\t\t];\n\t\t\tif (this.inset) {\n\t\t\t\tvals.push('inset');\n\t\t\t}\n\t\t\treturn vals.join(' ');\n\t\t};\n\n\t\treturn BoxShadow;\n\t})(),\n\n\n\tflags : {\n\t\tleaveValue : 1 << 0,\n\t\tleaveAlpha : 1 << 1,\n\t\tleavePreview : 1 << 2,\n\t},\n\n\n\tenumOpts : {\n\t\tformat: ['auto', 'any', 'hex', 'hexa', 'rgb', 'rgba'],\n\t\tpreviewPosition: ['left', 'right'],\n\t\tmode: ['hsv', 'hvs', 'hs', 'hv'],\n\t\tposition: ['left', 'right', 'top', 'bottom'],\n\t\talphaChannel: ['auto', true, false],\n\t\tpaletteSetsAlpha: ['auto', true, false],\n\t},\n\n\n\tdeprecatedOpts : {\n\t\t// <old_option>: <new_option>  (<new_option> can be null)\n\t\t'styleElement': 'previewElement',\n\t\t'onFineChange': 'onInput',\n\t\t'overwriteImportant': 'forceStyle',\n\t\t'closable': 'closeButton',\n\t\t'insetWidth': 'controlBorderWidth',\n\t\t'insetColor': 'controlBorderColor',\n\t\t'refine': null,\n\t},\n\n\n\tdocsRef : ' ' + 'See https://jscolor.com/docs/',\n\n\n\t//\n\t// Usage:\n\t// var myPicker = new JSColor(<targetElement> [, <options>])\n\t//\n\t// (constructor is accessible via both 'jscolor' and 'JSColor' name)\n\t//\n\n\tpub : function (targetElement, opts) {\n\n\t\tvar THIS = this;\n\n\t\tif (!opts) {\n\t\t\topts = {};\n\t\t}\n\n\t\tthis.channels = {\n\t\t\tr: 255, // red [0-255]\n\t\t\tg: 255, // green [0-255]\n\t\t\tb: 255, // blue [0-255]\n\t\t\th: 0, // hue [0-360]\n\t\t\ts: 0, // saturation [0-100]\n\t\t\tv: 100, // value (brightness) [0-100]\n\t\t\ta: 1.0, // alpha (opacity) [0.0 - 1.0]\n\t\t};\n\n\t\t// General options\n\t\t//\n\t\tthis.format = 'auto'; // 'auto' | 'any' | 'hex' | 'hexa' | 'rgb' | 'rgba' - Format of the input/output value\n\t\tthis.value = undefined; // INITIAL color value in any supported format. To change it later, use method fromString(), fromHSVA(), fromRGBA() or channel()\n\t\tthis.alpha = undefined; // INITIAL alpha value. To change it later, call method channel('A', <value>)\n\t\tthis.random = false; // whether to randomize the initial color. Either true | false, or an array of ranges: [minV, maxV, minS, maxS, minH, maxH, minA, maxA]\n\t\tthis.onChange = undefined; // called when color changes. Value can be either a function or a string with JS code.\n\t\tthis.onInput = undefined; // called repeatedly as the color is being changed, e.g. while dragging a slider. Value can be either a function or a string with JS code.\n\t\tthis.valueElement = undefined; // element that will be used to display and input the color value\n\t\tthis.alphaElement = undefined; // element that will be used to display and input the alpha (opacity) value\n\t\tthis.previewElement = undefined; // element that will preview the picked color using CSS background\n\t\tthis.previewPosition = 'left'; // 'left' | 'right' - position of the color preview in previewElement\n\t\tthis.previewSize = 32; // (px) width of the color preview displayed in previewElement\n\t\tthis.previewPadding = 8; // (px) space between color preview and content of the previewElement\n\t\tthis.required = true; // whether the associated text input must always contain a color value. If false, the input can be left empty.\n\t\tthis.hash = true; // whether to prefix the HEX color code with # symbol (only applicable for HEX format)\n\t\tthis.uppercase = true; // whether to show the HEX color code in upper case (only applicable for HEX format)\n\t\tthis.forceStyle = true; // whether to overwrite CSS style of the previewElement using !important flag\n\n\t\t// Color Picker options\n\t\t//\n\t\tthis.width = 181; // width of the color spectrum (in px)\n\t\tthis.height = 101; // height of the color spectrum (in px)\n\t\tthis.mode = 'HSV'; // 'HSV' | 'HVS' | 'HS' | 'HV' - layout of the color picker controls\n\t\tthis.alphaChannel = 'auto'; // 'auto' | true | false - if alpha channel is enabled, the alpha slider will be visible. If 'auto', it will be determined according to color format\n\t\tthis.position = 'bottom'; // 'left' | 'right' | 'top' | 'bottom' - position relative to the target element\n\t\tthis.smartPosition = true; // automatically change picker position when there is not enough space for it\n\t\tthis.showOnClick = true; // whether to show the picker when user clicks its target element\n\t\tthis.hideOnLeave = true; // whether to automatically hide the picker when user leaves its target element (e.g. upon clicking the document)\n\t\tthis.palette = []; // colors to be displayed in the palette, specified as an array or a string of space separated color values (in any supported format)\n\t\tthis.paletteCols = 10; // number of columns in the palette\n\t\tthis.paletteSetsAlpha = 'auto'; // 'auto' | true | false - if true, palette colors that don't specify alpha will set alpha to 1.0\n\t\tthis.paletteHeight = 16; // maximum height (px) of a row in the palette\n\t\tthis.paletteSpacing = 4; // distance (px) between color samples in the palette\n\t\tthis.hideOnPaletteClick = false; // when set to true, clicking the palette will also hide the color picker\n\t\tthis.sliderSize = 16; // px\n\t\tthis.crossSize = 8; // px\n\t\tthis.closeButton = false; // whether to display the Close button\n\t\tthis.closeText = 'Close';\n\t\tthis.buttonColor = 'rgba(0,0,0,1)'; // CSS color\n\t\tthis.buttonHeight = 18; // px\n\t\tthis.padding = 12; // px\n\t\tthis.backgroundColor = 'rgba(255,255,255,1)'; // CSS color\n\t\tthis.borderWidth = 1; // px\n\t\tthis.borderColor = 'rgba(187,187,187,1)'; // CSS color\n\t\tthis.borderRadius = 8; // px\n\t\tthis.controlBorderWidth = 1; // px\n\t\tthis.controlBorderColor = 'rgba(187,187,187,1)'; // CSS color\n\t\tthis.shadow = true; // whether to display a shadow\n\t\tthis.shadowBlur = 15; // px\n\t\tthis.shadowColor = 'rgba(0,0,0,0.2)'; // CSS color\n\t\tthis.pointerColor = 'rgba(76,76,76,1)'; // CSS color\n\t\tthis.pointerBorderWidth = 1; // px\n\t\tthis.pointerBorderColor = 'rgba(255,255,255,1)'; // CSS color\n\t\tthis.pointerThickness = 2; // px\n\t\tthis.zIndex = 5000;\n\t\tthis.container = undefined; // where to append the color picker (BODY element by default)\n\n\t\t// Experimental\n\t\t//\n\t\tthis.minS = 0; // min allowed saturation (0 - 100)\n\t\tthis.maxS = 100; // max allowed saturation (0 - 100)\n\t\tthis.minV = 0; // min allowed value (brightness) (0 - 100)\n\t\tthis.maxV = 100; // max allowed value (brightness) (0 - 100)\n\t\tthis.minA = 0.0; // min allowed alpha (opacity) (0.0 - 1.0)\n\t\tthis.maxA = 1.0; // max allowed alpha (opacity) (0.0 - 1.0)\n\n\n\t\t// Getter: option(name)\n\t\t// Setter: option(name, value)\n\t\t//         option({name:value, ...})\n\t\t//\n\t\tthis.option = function () {\n\t\t\tif (!arguments.length) {\n\t\t\t\tthrow new Error('No option specified');\n\t\t\t}\n\n\t\t\tif (arguments.length === 1 && typeof arguments[0] === 'string') {\n\t\t\t\t// getting a single option\n\t\t\t\ttry {\n\t\t\t\t\treturn getOption(arguments[0]);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(e);\n\t\t\t\t}\n\t\t\t\treturn false;\n\n\t\t\t} else if (arguments.length >= 2 && typeof arguments[0] === 'string') {\n\t\t\t\t// setting a single option\n\t\t\t\ttry {\n\t\t\t\t\tif (!setOption(arguments[0], arguments[1])) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\n\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\n\t\t\t\treturn true;\n\n\t\t\t} else if (arguments.length === 1 && typeof arguments[0] === 'object') {\n\t\t\t\t// setting multiple options\n\t\t\t\tvar opts = arguments[0];\n\t\t\t\tvar success = true;\n\t\t\t\tfor (var opt in opts) {\n\t\t\t\t\tif (opts.hasOwnProperty(opt)) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!setOption(opt, opts[opt])) {\n\t\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\n\t\t\t\tthis.exposeColor(); // in case some preview-related or format-related option was changed\n\t\t\t\treturn success;\n\t\t\t}\n\n\t\t\tthrow new Error('Invalid arguments');\n\t\t}\n\n\n\t\t// Getter: channel(name)\n\t\t// Setter: channel(name, value)\n\t\t//\n\t\tthis.channel = function (name, value) {\n\t\t\tif (typeof name !== 'string') {\n\t\t\t\tthrow new Error('Invalid value for channel name: ' + name);\n\t\t\t}\n\n\t\t\tif (value === undefined) {\n\t\t\t\t// getting channel value\n\t\t\t\tif (!this.channels.hasOwnProperty(name.toLowerCase())) {\n\t\t\t\t\tconsole.warn('Getting unknown channel: ' + name);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn this.channels[name.toLowerCase()];\n\n\t\t\t} else {\n\t\t\t\t// setting channel value\n\t\t\t\tvar res = false;\n\t\t\t\tswitch (name.toLowerCase()) {\n\t\t\t\t\tcase 'r': res = this.fromRGBA(value, null, null, null); break;\n\t\t\t\t\tcase 'g': res = this.fromRGBA(null, value, null, null); break;\n\t\t\t\t\tcase 'b': res = this.fromRGBA(null, null, value, null); break;\n\t\t\t\t\tcase 'h': res = this.fromHSVA(value, null, null, null); break;\n\t\t\t\t\tcase 's': res = this.fromHSVA(null, value, null, null); break;\n\t\t\t\t\tcase 'v': res = this.fromHSVA(null, null, value, null); break;\n\t\t\t\t\tcase 'a': res = this.fromHSVA(null, null, null, value); break;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn('Setting unknown channel: ' + name);\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (res) {\n\t\t\t\t\tthis.redraw(); // immediately redraws the picker, if it's displayed\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\n\t\t// Triggers given input event(s) by:\n\t\t// - executing on<Event> callback specified as picker's option\n\t\t// - triggering standard DOM event listeners attached to the value element\n\t\t//\n\t\t// It is possible to specify multiple events separated with a space.\n\t\t//\n\t\tthis.trigger = function (eventNames) {\n\t\t\tvar evs = jsc.strList(eventNames);\n\t\t\tfor (var i = 0; i < evs.length; i += 1) {\n\t\t\t\tvar ev = evs[i].toLowerCase();\n\n\t\t\t\t// trigger a callback\n\t\t\t\tvar callbackProp = null;\n\t\t\t\tswitch (ev) {\n\t\t\t\t\tcase 'input': callbackProp = 'onInput'; break;\n\t\t\t\t\tcase 'change': callbackProp = 'onChange'; break;\n\t\t\t\t}\n\t\t\t\tif (callbackProp) {\n\t\t\t\t\tjsc.triggerCallback(this, callbackProp);\n\t\t\t\t}\n\n\t\t\t\t// trigger standard DOM event listeners on the value element\n\t\t\t\tjsc.triggerInputEvent(this.valueElement, ev, true, true);\n\t\t\t}\n\t\t};\n\n\n\t\t// h: 0-360\n\t\t// s: 0-100\n\t\t// v: 0-100\n\t\t// a: 0.0-1.0\n\t\t//\n\t\tthis.fromHSVA = function (h, s, v, a, flags) { // null = don't change\n\t\t\tif (h === undefined) { h = null; }\n\t\t\tif (s === undefined) { s = null; }\n\t\t\tif (v === undefined) { v = null; }\n\t\t\tif (a === undefined) { a = null; }\n\n\t\t\tif (h !== null) {\n\t\t\t\tif (isNaN(h)) { return false; }\n\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, h));\n\t\t\t}\n\t\t\tif (s !== null) {\n\t\t\t\tif (isNaN(s)) { return false; }\n\t\t\t\tthis.channels.s = Math.max(0, Math.min(100, this.maxS, s), this.minS);\n\t\t\t}\n\t\t\tif (v !== null) {\n\t\t\t\tif (isNaN(v)) { return false; }\n\t\t\t\tthis.channels.v = Math.max(0, Math.min(100, this.maxV, v), this.minV);\n\t\t\t}\n\t\t\tif (a !== null) {\n\t\t\t\tif (isNaN(a)) { return false; }\n\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\n\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\n\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\n\t\t\t}\n\n\t\t\tvar rgb = jsc.HSV_RGB(\n\t\t\t\tthis.channels.h,\n\t\t\t\tthis.channels.s,\n\t\t\t\tthis.channels.v\n\t\t\t);\n\t\t\tthis.channels.r = rgb[0];\n\t\t\tthis.channels.g = rgb[1];\n\t\t\tthis.channels.b = rgb[2];\n\n\t\t\tthis.exposeColor(flags);\n\t\t\treturn true;\n\t\t};\n\n\n\t\t// r: 0-255\n\t\t// g: 0-255\n\t\t// b: 0-255\n\t\t// a: 0.0-1.0\n\t\t//\n\t\tthis.fromRGBA = function (r, g, b, a, flags) { // null = don't change\n\t\t\tif (r === undefined) { r = null; }\n\t\t\tif (g === undefined) { g = null; }\n\t\t\tif (b === undefined) { b = null; }\n\t\t\tif (a === undefined) { a = null; }\n\n\t\t\tif (r !== null) {\n\t\t\t\tif (isNaN(r)) { return false; }\n\t\t\t\tr = Math.max(0, Math.min(255, r));\n\t\t\t}\n\t\t\tif (g !== null) {\n\t\t\t\tif (isNaN(g)) { return false; }\n\t\t\t\tg = Math.max(0, Math.min(255, g));\n\t\t\t}\n\t\t\tif (b !== null) {\n\t\t\t\tif (isNaN(b)) { return false; }\n\t\t\t\tb = Math.max(0, Math.min(255, b));\n\t\t\t}\n\t\t\tif (a !== null) {\n\t\t\t\tif (isNaN(a)) { return false; }\n\t\t\t\tthis.channels.a = this.hasAlphaChannel() ?\n\t\t\t\t\tMath.max(0, Math.min(1, this.maxA, a), this.minA) :\n\t\t\t\t\t1.0; // if alpha channel is disabled, the color should stay 100% opaque\n\t\t\t}\n\n\t\t\tvar hsv = jsc.RGB_HSV(\n\t\t\t\tr===null ? this.channels.r : r,\n\t\t\t\tg===null ? this.channels.g : g,\n\t\t\t\tb===null ? this.channels.b : b\n\t\t\t);\n\t\t\tif (hsv[0] !== null) {\n\t\t\t\tthis.channels.h = Math.max(0, Math.min(360, hsv[0]));\n\t\t\t}\n\t\t\tif (hsv[2] !== 0) { // fully black color stays black through entire saturation range, so let's not change saturation\n\t\t\t\tthis.channels.s = Math.max(0, this.minS, Math.min(100, this.maxS, hsv[1]));\n\t\t\t}\n\t\t\tthis.channels.v = Math.max(0, this.minV, Math.min(100, this.maxV, hsv[2]));\n\n\t\t\t// update RGB according to final HSV, as some values might be trimmed\n\t\t\tvar rgb = jsc.HSV_RGB(this.channels.h, this.channels.s, this.channels.v);\n\t\t\tthis.channels.r = rgb[0];\n\t\t\tthis.channels.g = rgb[1];\n\t\t\tthis.channels.b = rgb[2];\n\n\t\t\tthis.exposeColor(flags);\n\t\t\treturn true;\n\t\t};\n\n\n\t\t// DEPRECATED. Use .fromHSVA() instead\n\t\t//\n\t\tthis.fromHSV = function (h, s, v, flags) {\n\t\t\tconsole.warn('fromHSV() method is DEPRECATED. Using fromHSVA() instead.' + jsc.docsRef);\n\t\t\treturn this.fromHSVA(h, s, v, null, flags);\n\t\t};\n\n\n\t\t// DEPRECATED. Use .fromRGBA() instead\n\t\t//\n\t\tthis.fromRGB = function (r, g, b, flags) {\n\t\t\tconsole.warn('fromRGB() method is DEPRECATED. Using fromRGBA() instead.' + jsc.docsRef);\n\t\t\treturn this.fromRGBA(r, g, b, null, flags);\n\t\t};\n\n\n\t\tthis.fromString = function (str, flags) {\n\t\t\tif (!this.required && str.trim() === '') {\n\t\t\t\t// setting empty string to an optional color input\n\t\t\t\tthis.setPreviewElementBg(null);\n\t\t\t\tthis.setValueElementValue('');\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar color = jsc.parseColorString(str);\n\t\t\tif (!color) {\n\t\t\t\treturn false; // could not parse\n\t\t\t}\n\t\t\tif (this.format.toLowerCase() === 'any') {\n\t\t\t\tthis._setFormat(color.format); // adapt format\n\t\t\t\tif (!jsc.isAlphaFormat(this.getFormat())) {\n\t\t\t\t\tcolor.rgba[3] = 1.0; // when switching to a format that doesn't support alpha, set full opacity\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.fromRGBA(\n\t\t\t\tcolor.rgba[0],\n\t\t\t\tcolor.rgba[1],\n\t\t\t\tcolor.rgba[2],\n\t\t\t\tcolor.rgba[3],\n\t\t\t\tflags\n\t\t\t);\n\t\t\treturn true;\n\t\t};\n\n\n\t\tthis.randomize = function (minV, maxV, minS, maxS, minH, maxH, minA, maxA) {\n\t\t\tif (minV === undefined) { minV = 0; }\n\t\t\tif (maxV === undefined) { maxV = 100; }\n\t\t\tif (minS === undefined) { minS = 0; }\n\t\t\tif (maxS === undefined) { maxS = 100; }\n\t\t\tif (minH === undefined) { minH = 0; }\n\t\t\tif (maxH === undefined) { maxH = 359; }\n\t\t\tif (minA === undefined) { minA = 1; }\n\t\t\tif (maxA === undefined) { maxA = 1; }\n\n\t\t\tthis.fromHSVA(\n\t\t\t\tminH + Math.floor(Math.random() * (maxH - minH + 1)),\n\t\t\t\tminS + Math.floor(Math.random() * (maxS - minS + 1)),\n\t\t\t\tminV + Math.floor(Math.random() * (maxV - minV + 1)),\n\t\t\t\t((100 * minA) + Math.floor(Math.random() * (100 * (maxA - minA) + 1))) / 100\n\t\t\t);\n\t\t};\n\n\n\t\tthis.toString = function (format) {\n\t\t\tif (format === undefined) {\n\t\t\t\tformat = this.getFormat(); // format not specified -> use the current format\n\t\t\t}\n\t\t\tswitch (format.toLowerCase()) {\n\t\t\t\tcase 'hex': return this.toHEXString(); break;\n\t\t\t\tcase 'hexa': return this.toHEXAString(); break;\n\t\t\t\tcase 'rgb': return this.toRGBString(); break;\n\t\t\t\tcase 'rgba': return this.toRGBAString(); break;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\n\t\tthis.toHEXString = function () {\n\t\t\treturn jsc.hexColor(\n\t\t\t\tthis.channels.r,\n\t\t\t\tthis.channels.g,\n\t\t\t\tthis.channels.b\n\t\t\t);\n\t\t};\n\n\n\t\tthis.toHEXAString = function () {\n\t\t\treturn jsc.hexaColor(\n\t\t\t\tthis.channels.r,\n\t\t\t\tthis.channels.g,\n\t\t\t\tthis.channels.b,\n\t\t\t\tthis.channels.a\n\t\t\t);\n\t\t};\n\n\n\t\tthis.toRGBString = function () {\n\t\t\treturn jsc.rgbColor(\n\t\t\t\tthis.channels.r,\n\t\t\t\tthis.channels.g,\n\t\t\t\tthis.channels.b\n\t\t\t);\n\t\t};\n\n\n\t\tthis.toRGBAString = function () {\n\t\t\treturn jsc.rgbaColor(\n\t\t\t\tthis.channels.r,\n\t\t\t\tthis.channels.g,\n\t\t\t\tthis.channels.b,\n\t\t\t\tthis.channels.a\n\t\t\t);\n\t\t};\n\n\n\t\tthis.toGrayscale = function () {\n\t\t\treturn (\n\t\t\t\t0.213 * this.channels.r +\n\t\t\t\t0.715 * this.channels.g +\n\t\t\t\t0.072 * this.channels.b\n\t\t\t);\n\t\t};\n\n\n\t\tthis.toCanvas = function () {\n\t\t\treturn jsc.genColorPreviewCanvas(this.toRGBAString()).canvas;\n\t\t};\n\n\n\t\tthis.toDataURL = function () {\n\t\t\treturn this.toCanvas().toDataURL();\n\t\t};\n\n\n\t\tthis.toBackground = function () {\n\t\t\treturn jsc.pub.background(this.toRGBAString());\n\t\t};\n\n\n\t\tthis.isLight = function () {\n\t\t\treturn this.toGrayscale() > 255 / 2;\n\t\t};\n\n\n\t\tthis.hide = function () {\n\t\t\tif (isPickerOwner()) {\n\t\t\t\tdetachPicker();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.show = function () {\n\t\t\tdrawPicker();\n\t\t};\n\n\n\t\tthis.redraw = function () {\n\t\t\tif (isPickerOwner()) {\n\t\t\t\tdrawPicker();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.getFormat = function () {\n\t\t\treturn this._currentFormat;\n\t\t};\n\n\n\t\tthis._setFormat = function (format) {\n\t\t\tthis._currentFormat = format.toLowerCase();\n\t\t};\n\n\n\t\tthis.hasAlphaChannel = function () {\n\t\t\tif (this.alphaChannel === 'auto') {\n\t\t\t\treturn (\n\t\t\t\t\tthis.format.toLowerCase() === 'any' || // format can change on the fly (e.g. from hex to rgba), so let's consider the alpha channel enabled\n\t\t\t\t\tjsc.isAlphaFormat(this.getFormat()) || // the current format supports alpha channel\n\t\t\t\t\tthis.alpha !== undefined || // initial alpha value is set, so we're working with alpha channel\n\t\t\t\t\tthis.alphaElement !== undefined // the alpha value is redirected, so we're working with alpha channel\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn this.alphaChannel; // the alpha channel is explicitly set\n\t\t};\n\n\n\t\tthis.processValueInput = function (str) {\n\t\t\tif (!this.fromString(str)) {\n\t\t\t\t// could not parse the color value - let's just expose the current color\n\t\t\t\tthis.exposeColor();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.processAlphaInput = function (str) {\n\t\t\tif (!this.fromHSVA(null, null, null, parseFloat(str))) {\n\t\t\t\t// could not parse the alpha value - let's just expose the current color\n\t\t\t\tthis.exposeColor();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.exposeColor = function (flags) {\n\t\t\tvar colorStr = this.toString();\n\t\t\tvar fmt = this.getFormat();\n\n\t\t\t// reflect current color in data- attribute\n\t\t\tjsc.setDataAttr(this.targetElement, 'current-color', colorStr);\n\n\t\t\tif (!(flags & jsc.flags.leaveValue) && this.valueElement) {\n\t\t\t\tif (fmt === 'hex' || fmt === 'hexa') {\n\t\t\t\t\tif (!this.uppercase) { colorStr = colorStr.toLowerCase(); }\n\t\t\t\t\tif (!this.hash) { colorStr = colorStr.replace(/^#/, ''); }\n\t\t\t\t}\n\t\t\t\tthis.setValueElementValue(colorStr);\n\t\t\t}\n\n\t\t\tif (!(flags & jsc.flags.leaveAlpha) && this.alphaElement) {\n\t\t\t\tvar alphaVal = Math.round(this.channels.a * 100) / 100;\n\t\t\t\tthis.setAlphaElementValue(alphaVal);\n\t\t\t}\n\n\t\t\tif (!(flags & jsc.flags.leavePreview) && this.previewElement) {\n\t\t\t\tvar previewPos = null; // 'left' | 'right' (null -> fill the entire element)\n\n\t\t\t\tif (\n\t\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\n\t\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\n\t\t\t\t) {\n\t\t\t\t\tpreviewPos = this.previewPosition;\n\t\t\t\t}\n\n\t\t\t\tthis.setPreviewElementBg(this.toRGBAString());\n\t\t\t}\n\n\t\t\tif (isPickerOwner()) {\n\t\t\t\tredrawPad();\n\t\t\t\tredrawSld();\n\t\t\t\tredrawASld();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.setPreviewElementBg = function (color) {\n\t\t\tif (!this.previewElement) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar position = null; // color preview position:  null | 'left' | 'right'\n\t\t\tvar width = null; // color preview width:  px | null = fill the entire element\n\t\t\tif (\n\t\t\t\tjsc.isTextInput(this.previewElement) || // text input\n\t\t\t\t(jsc.isButton(this.previewElement) && !jsc.isButtonEmpty(this.previewElement)) // button with text\n\t\t\t) {\n\t\t\t\tposition = this.previewPosition;\n\t\t\t\twidth = this.previewSize;\n\t\t\t}\n\n\t\t\tvar backgrounds = [];\n\n\t\t\tif (!color) {\n\t\t\t\t// there is no color preview to display -> let's remove any previous background image\n\t\t\t\tbackgrounds.push({\n\t\t\t\t\timage: 'none',\n\t\t\t\t\tposition: 'left top',\n\t\t\t\t\tsize: 'auto',\n\t\t\t\t\trepeat: 'no-repeat',\n\t\t\t\t\torigin: 'padding-box',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// CSS gradient for background color preview\n\t\t\t\tbackgrounds.push({\n\t\t\t\t\timage: jsc.genColorPreviewGradient(\n\t\t\t\t\t\tcolor,\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\twidth ? width - jsc.pub.previewSeparator.length : null\n\t\t\t\t\t),\n\t\t\t\t\tposition: 'left top',\n\t\t\t\t\tsize: 'auto',\n\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\n\t\t\t\t\torigin: 'padding-box',\n\t\t\t\t});\n\n\t\t\t\t// data URL of generated PNG image with a gray transparency chessboard\n\t\t\t\tvar preview = jsc.genColorPreviewCanvas(\n\t\t\t\t\t'rgba(0,0,0,0)',\n\t\t\t\t\tposition ? {'left':'right', 'right':'left'}[position] : null,\n\t\t\t\t\twidth,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbackgrounds.push({\n\t\t\t\t\timage: 'url(\\'' + preview.canvas.toDataURL() + '\\')',\n\t\t\t\t\tposition: (position || 'left') + ' top',\n\t\t\t\t\tsize: preview.width + 'px ' + preview.height + 'px',\n\t\t\t\t\trepeat: position ? 'repeat-y' : 'repeat',\n\t\t\t\t\torigin: 'padding-box',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar bg = {\n\t\t\t\timage: [],\n\t\t\t\tposition: [],\n\t\t\t\tsize: [],\n\t\t\t\trepeat: [],\n\t\t\t\torigin: [],\n\t\t\t};\n\t\t\tfor (var i = 0; i < backgrounds.length; i += 1) {\n\t\t\t\tbg.image.push(backgrounds[i].image);\n\t\t\t\tbg.position.push(backgrounds[i].position);\n\t\t\t\tbg.size.push(backgrounds[i].size);\n\t\t\t\tbg.repeat.push(backgrounds[i].repeat);\n\t\t\t\tbg.origin.push(backgrounds[i].origin);\n\t\t\t}\n\n\t\t\t// set previewElement's background-images\n\t\t\tvar sty = {\n\t\t\t\t'background-image': bg.image.join(', '),\n\t\t\t\t'background-position': bg.position.join(', '),\n\t\t\t\t'background-size': bg.size.join(', '),\n\t\t\t\t'background-repeat': bg.repeat.join(', '),\n\t\t\t\t'background-origin': bg.origin.join(', '),\n\t\t\t};\n\t\t\tjsc.setStyle(this.previewElement, sty, this.forceStyle);\n\n\n\t\t\t// set/restore previewElement's padding\n\t\t\tvar padding = {\n\t\t\t\tleft: null,\n\t\t\t\tright: null,\n\t\t\t};\n\t\t\tif (position) {\n\t\t\t\tpadding[position] = (this.previewSize + this.previewPadding) + 'px';\n\t\t\t}\n\n\t\t\tvar sty = {\n\t\t\t\t'padding-left': padding.left,\n\t\t\t\t'padding-right': padding.right,\n\t\t\t};\n\t\t\tjsc.setStyle(this.previewElement, sty, this.forceStyle, true);\n\t\t};\n\n\n\t\tthis.setValueElementValue = function (str) {\n\t\t\tif (this.valueElement) {\n\t\t\t\tif (jsc.nodeName(this.valueElement) === 'input') {\n\t\t\t\t\tthis.valueElement.value = str;\n\t\t\t\t} else {\n\t\t\t\t\tthis.valueElement.innerHTML = str;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\tthis.setAlphaElementValue = function (str) {\n\t\t\tif (this.alphaElement) {\n\t\t\t\tif (jsc.nodeName(this.alphaElement) === 'input') {\n\t\t\t\t\tthis.alphaElement.value = str;\n\t\t\t\t} else {\n\t\t\t\t\tthis.alphaElement.innerHTML = str;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\n\t\tthis._processParentElementsInDOM = function () {\n\t\t\tif (this._parentElementsProcessed) { return; }\n\t\t\tthis._parentElementsProcessed = true;\n\n\t\t\tvar elm = this.targetElement;\n\t\t\tdo {\n\t\t\t\t// If the target element or one of its parent nodes has fixed position,\n\t\t\t\t// then use fixed positioning instead\n\t\t\t\tvar compStyle = jsc.getCompStyle(elm);\n\t\t\t\tif (compStyle.position && compStyle.position.toLowerCase() === 'fixed') {\n\t\t\t\t\tthis.fixed = true;\n\t\t\t\t}\n\n\t\t\t\tif (elm !== this.targetElement) {\n\t\t\t\t\t// Ensure to attach onParentScroll only once to each parent element\n\t\t\t\t\t// (multiple targetElements can share the same parent nodes)\n\t\t\t\t\t//\n\t\t\t\t\t// Note: It's not just offsetParents that can be scrollable,\n\t\t\t\t\t// that's why we loop through all parent nodes\n\t\t\t\t\tif (!jsc.getData(elm, 'hasScrollListener')) {\n\t\t\t\t\t\telm.addEventListener('scroll', jsc.onParentScroll, false);\n\t\t\t\t\t\tjsc.setData(elm, 'hasScrollListener', true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} while ((elm = elm.parentNode) && jsc.nodeName(elm) !== 'body');\n\t\t};\n\n\n\t\tthis.tryHide = function () {\n\t\t\tif (this.hideOnLeave) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\n\t\tthis.set__palette = function (val) {\n\t\t\tthis.palette = val;\n\t\t\tthis._palette = jsc.parsePaletteValue(val);\n\t\t\tthis._paletteHasTransparency = jsc.containsTranparentColor(this._palette);\n\t\t};\n\n\n\t\tfunction setOption (option, value) {\n\t\t\tif (typeof option !== 'string') {\n\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\n\t\t\t}\n\n\t\t\t// enum option\n\t\t\tif (jsc.enumOpts.hasOwnProperty(option)) {\n\t\t\t\tif (typeof value === 'string') { // enum string values are case insensitive\n\t\t\t\t\tvalue = value.toLowerCase();\n\t\t\t\t}\n\t\t\t\tif (jsc.enumOpts[option].indexOf(value) === -1) {\n\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' has invalid value: ' + value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// deprecated option\n\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option)) {\n\t\t\t\tvar oldOpt = option;\n\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\n\t\t\t\tif (newOpt) {\n\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\n\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\n\t\t\t\t\toption = newOpt;\n\t\t\t\t} else {\n\t\t\t\t\t// new name not available for the option\n\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar setter = 'set__' + option;\n\n\t\t\tif (typeof THIS[setter] === 'function') { // a setter exists for this option\n\t\t\t\tTHIS[setter](value);\n\t\t\t\treturn true;\n\n\t\t\t} else if (option in THIS) { // option exists as a property\n\t\t\t\tTHIS[option] = value;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\n\t\t}\n\n\n\t\tfunction getOption (option) {\n\t\t\tif (typeof option !== 'string') {\n\t\t\t\tthrow new Error('Invalid value for option name: ' + option);\n\t\t\t}\n\n\t\t\t// deprecated option\n\t\t\tif (jsc.deprecatedOpts.hasOwnProperty(option)) {\n\t\t\t\tvar oldOpt = option;\n\t\t\t\tvar newOpt = jsc.deprecatedOpts[option];\n\t\t\t\tif (newOpt) {\n\t\t\t\t\t// if we have a new name for this option, let's log a warning and use the new name\n\t\t\t\t\tconsole.warn('Option \\'%s\\' is DEPRECATED, using \\'%s\\' instead.' + jsc.docsRef, oldOpt, newOpt);\n\t\t\t\t\toption = newOpt;\n\t\t\t\t} else {\n\t\t\t\t\t// new name not available for the option\n\t\t\t\t\tthrow new Error('Option \\'' + option + '\\' is DEPRECATED');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar getter = 'get__' + option;\n\n\t\t\tif (typeof THIS[getter] === 'function') { // a getter exists for this option\n\t\t\t\treturn THIS[getter](value);\n\n\t\t\t} else if (option in THIS) { // option exists as a property\n\t\t\t\treturn THIS[option];\n\t\t\t}\n\n\t\t\tthrow new Error('Unrecognized configuration option: ' + option);\n\t\t}\n\n\n\t\tfunction detachPicker () {\n\t\t\tjsc.removeClass(THIS.targetElement, jsc.pub.activeClassName);\n\t\t\tjsc.picker.wrap.parentNode.removeChild(jsc.picker.wrap);\n\t\t\tdelete jsc.picker.owner;\n\t\t}\n\n\n\t\tfunction drawPicker () {\n\n\t\t\t// At this point, when drawing the picker, we know what the parent elements are\n\t\t\t// and we can do all related DOM operations, such as registering events on them\n\t\t\t// or checking their positioning\n\t\t\tTHIS._processParentElementsInDOM();\n\n\t\t\tif (!jsc.picker) {\n\t\t\t\tjsc.picker = {\n\t\t\t\t\towner: null, // owner picker instance\n\t\t\t\t\twrap : jsc.createEl('div'),\n\t\t\t\t\tbox : jsc.createEl('div'),\n\t\t\t\t\tboxS : jsc.createEl('div'), // shadow area\n\t\t\t\t\tboxB : jsc.createEl('div'), // border\n\t\t\t\t\tpad : jsc.createEl('div'),\n\t\t\t\t\tpadB : jsc.createEl('div'), // border\n\t\t\t\t\tpadM : jsc.createEl('div'), // mouse/touch area\n\t\t\t\t\tpadCanvas : jsc.createPadCanvas(),\n\t\t\t\t\tcross : jsc.createEl('div'),\n\t\t\t\t\tcrossBY : jsc.createEl('div'), // border Y\n\t\t\t\t\tcrossBX : jsc.createEl('div'), // border X\n\t\t\t\t\tcrossLY : jsc.createEl('div'), // line Y\n\t\t\t\t\tcrossLX : jsc.createEl('div'), // line X\n\t\t\t\t\tsld : jsc.createEl('div'), // slider\n\t\t\t\t\tsldB : jsc.createEl('div'), // border\n\t\t\t\t\tsldM : jsc.createEl('div'), // mouse/touch area\n\t\t\t\t\tsldGrad : jsc.createSliderGradient(),\n\t\t\t\t\tsldPtrS : jsc.createEl('div'), // slider pointer spacer\n\t\t\t\t\tsldPtrIB : jsc.createEl('div'), // slider pointer inner border\n\t\t\t\t\tsldPtrMB : jsc.createEl('div'), // slider pointer middle border\n\t\t\t\t\tsldPtrOB : jsc.createEl('div'), // slider pointer outer border\n\t\t\t\t\tasld : jsc.createEl('div'), // alpha slider\n\t\t\t\t\tasldB : jsc.createEl('div'), // border\n\t\t\t\t\tasldM : jsc.createEl('div'), // mouse/touch area\n\t\t\t\t\tasldGrad : jsc.createASliderGradient(),\n\t\t\t\t\tasldPtrS : jsc.createEl('div'), // slider pointer spacer\n\t\t\t\t\tasldPtrIB : jsc.createEl('div'), // slider pointer inner border\n\t\t\t\t\tasldPtrMB : jsc.createEl('div'), // slider pointer middle border\n\t\t\t\t\tasldPtrOB : jsc.createEl('div'), // slider pointer outer border\n\t\t\t\t\tpal : jsc.createEl('div'), // palette\n\t\t\t\t\tbtn : jsc.createEl('div'),\n\t\t\t\t\tbtnT : jsc.createEl('span'), // text\n\t\t\t\t};\n\n\t\t\t\tjsc.picker.pad.appendChild(jsc.picker.padCanvas.elm);\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.pad);\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBY);\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossBX);\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLY);\n\t\t\t\tjsc.picker.cross.appendChild(jsc.picker.crossLX);\n\t\t\t\tjsc.picker.padB.appendChild(jsc.picker.cross);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padB);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.padM);\n\n\t\t\t\tjsc.picker.sld.appendChild(jsc.picker.sldGrad.elm);\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sld);\n\t\t\t\tjsc.picker.sldB.appendChild(jsc.picker.sldPtrOB);\n\t\t\t\tjsc.picker.sldPtrOB.appendChild(jsc.picker.sldPtrMB);\n\t\t\t\tjsc.picker.sldPtrMB.appendChild(jsc.picker.sldPtrIB);\n\t\t\t\tjsc.picker.sldPtrIB.appendChild(jsc.picker.sldPtrS);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldB);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.sldM);\n\n\t\t\t\tjsc.picker.asld.appendChild(jsc.picker.asldGrad.elm);\n\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asld);\n\t\t\t\tjsc.picker.asldB.appendChild(jsc.picker.asldPtrOB);\n\t\t\t\tjsc.picker.asldPtrOB.appendChild(jsc.picker.asldPtrMB);\n\t\t\t\tjsc.picker.asldPtrMB.appendChild(jsc.picker.asldPtrIB);\n\t\t\t\tjsc.picker.asldPtrIB.appendChild(jsc.picker.asldPtrS);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldB);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.asldM);\n\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.pal);\n\n\t\t\t\tjsc.picker.btn.appendChild(jsc.picker.btnT);\n\t\t\t\tjsc.picker.box.appendChild(jsc.picker.btn);\n\n\t\t\t\tjsc.picker.boxB.appendChild(jsc.picker.box);\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxS);\n\t\t\t\tjsc.picker.wrap.appendChild(jsc.picker.boxB);\n\n\t\t\t\tjsc.picker.wrap.addEventListener('touchstart', jsc.onPickerTouchStart,\n\t\t\t\t\tjsc.isPassiveEventSupported ? {passive: false} : false);\n\t\t\t}\n\n\t\t\tvar p = jsc.picker;\n\n\t\t\tvar displaySlider = !!jsc.getSliderChannel(THIS);\n\t\t\tvar displayAlphaSlider = THIS.hasAlphaChannel();\n\t\t\tvar pickerDims = jsc.getPickerDims(THIS);\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\n\t\t\tvar controlPadding = jsc.getControlPadding(THIS);\n\t\t\tvar borderRadius = Math.min(\n\t\t\t\tTHIS.borderRadius,\n\t\t\t\tMath.round(THIS.padding * Math.PI)); // px\n\t\t\tvar padCursor = 'crosshair';\n\n\t\t\t// wrap\n\t\t\tp.wrap.className = 'jscolor-picker-wrap';\n\t\t\tp.wrap.style.clear = 'both';\n\t\t\tp.wrap.style.width = pickerDims.borderW + 'px';\n\t\t\tp.wrap.style.height = pickerDims.borderH + 'px';\n\t\t\tp.wrap.style.zIndex = THIS.zIndex;\n\n\t\t\t// picker\n\t\t\tp.box.className = 'jscolor-picker';\n\t\t\tp.box.style.width = pickerDims.paddedW + 'px';\n\t\t\tp.box.style.height = pickerDims.paddedH + 'px';\n\t\t\tp.box.style.position = 'relative';\n\n\t\t\t// picker shadow\n\t\t\tp.boxS.className = 'jscolor-picker-shadow';\n\t\t\tp.boxS.style.position = 'absolute';\n\t\t\tp.boxS.style.left = '0';\n\t\t\tp.boxS.style.top = '0';\n\t\t\tp.boxS.style.width = '100%';\n\t\t\tp.boxS.style.height = '100%';\n\t\t\tjsc.setBorderRadius(p.boxS, borderRadius + 'px');\n\n\t\t\t// picker border\n\t\t\tp.boxB.className = 'jscolor-picker-border';\n\t\t\tp.boxB.style.position = 'relative';\n\t\t\tp.boxB.style.border = THIS.borderWidth + 'px solid';\n\t\t\tp.boxB.style.borderColor = THIS.borderColor;\n\t\t\tp.boxB.style.background = THIS.backgroundColor;\n\t\t\tjsc.setBorderRadius(p.boxB, borderRadius + 'px');\n\n\t\t\t// IE hack:\n\t\t\t// If the element is transparent, IE will trigger the event on the elements under it,\n\t\t\t// e.g. on Canvas or on elements with border\n\t\t\tp.padM.style.background = 'rgba(255,0,0,.2)';\n\t\t\tp.sldM.style.background = 'rgba(0,255,0,.2)';\n\t\t\tp.asldM.style.background = 'rgba(0,0,255,.2)';\n\n\t\t\tp.padM.style.opacity =\n\t\t\tp.sldM.style.opacity =\n\t\t\tp.asldM.style.opacity =\n\t\t\t\t'0';\n\n\t\t\t// pad\n\t\t\tp.pad.style.position = 'relative';\n\t\t\tp.pad.style.width = THIS.width + 'px';\n\t\t\tp.pad.style.height = THIS.height + 'px';\n\n\t\t\t// pad - color spectrum (HSV and HVS)\n\t\t\tp.padCanvas.draw(THIS.width, THIS.height, jsc.getPadYChannel(THIS));\n\n\t\t\t// pad border\n\t\t\tp.padB.style.position = 'absolute';\n\t\t\tp.padB.style.left = THIS.padding + 'px';\n\t\t\tp.padB.style.top = THIS.padding + 'px';\n\t\t\tp.padB.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\tp.padB.style.borderColor = THIS.controlBorderColor;\n\n\t\t\t// pad mouse area\n\t\t\tp.padM.style.position = 'absolute';\n\t\t\tp.padM.style.left = 0 + 'px';\n\t\t\tp.padM.style.top = 0 + 'px';\n\t\t\tp.padM.style.width = (THIS.padding + 2 * THIS.controlBorderWidth + THIS.width + controlPadding) + 'px';\n\t\t\tp.padM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\t\t\tp.padM.style.cursor = padCursor;\n\t\t\tjsc.setData(p.padM, {\n\t\t\t\tinstance: THIS,\n\t\t\t\tcontrol: 'pad',\n\t\t\t})\n\n\t\t\t// pad cross\n\t\t\tp.cross.style.position = 'absolute';\n\t\t\tp.cross.style.left =\n\t\t\tp.cross.style.top =\n\t\t\t\t'0';\n\t\t\tp.cross.style.width =\n\t\t\tp.cross.style.height =\n\t\t\t\tcrossOuterSize + 'px';\n\n\t\t\t// pad cross border Y and X\n\t\t\tp.crossBY.style.position =\n\t\t\tp.crossBX.style.position =\n\t\t\t\t'absolute';\n\t\t\tp.crossBY.style.background =\n\t\t\tp.crossBX.style.background =\n\t\t\t\tTHIS.pointerBorderColor;\n\t\t\tp.crossBY.style.width =\n\t\t\tp.crossBX.style.height =\n\t\t\t\t(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\tp.crossBY.style.height =\n\t\t\tp.crossBX.style.width =\n\t\t\t\tcrossOuterSize + 'px';\n\t\t\tp.crossBY.style.left =\n\t\t\tp.crossBX.style.top =\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2) - THIS.pointerBorderWidth) + 'px';\n\t\t\tp.crossBY.style.top =\n\t\t\tp.crossBX.style.left =\n\t\t\t\t'0';\n\n\t\t\t// pad cross line Y and X\n\t\t\tp.crossLY.style.position =\n\t\t\tp.crossLX.style.position =\n\t\t\t\t'absolute';\n\t\t\tp.crossLY.style.background =\n\t\t\tp.crossLX.style.background =\n\t\t\t\tTHIS.pointerColor;\n\t\t\tp.crossLY.style.height =\n\t\t\tp.crossLX.style.width =\n\t\t\t\t(crossOuterSize - 2 * THIS.pointerBorderWidth) + 'px';\n\t\t\tp.crossLY.style.width =\n\t\t\tp.crossLX.style.height =\n\t\t\t\tTHIS.pointerThickness + 'px';\n\t\t\tp.crossLY.style.left =\n\t\t\tp.crossLX.style.top =\n\t\t\t\t(Math.floor(crossOuterSize / 2) - Math.floor(THIS.pointerThickness / 2)) + 'px';\n\t\t\tp.crossLY.style.top =\n\t\t\tp.crossLX.style.left =\n\t\t\t\tTHIS.pointerBorderWidth + 'px';\n\n\n\t\t\t// slider\n\t\t\tp.sld.style.overflow = 'hidden';\n\t\t\tp.sld.style.width = THIS.sliderSize + 'px';\n\t\t\tp.sld.style.height = THIS.height + 'px';\n\n\t\t\t// slider gradient\n\t\t\tp.sldGrad.draw(THIS.sliderSize, THIS.height, '#000', '#000');\n\n\t\t\t// slider border\n\t\t\tp.sldB.style.display = displaySlider ? 'block' : 'none';\n\t\t\tp.sldB.style.position = 'absolute';\n\t\t\tp.sldB.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + 2 * controlPadding) + 'px';\n\t\t\tp.sldB.style.top = THIS.padding + 'px';\n\t\t\tp.sldB.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\tp.sldB.style.borderColor = THIS.controlBorderColor;\n\n\t\t\t// slider mouse area\n\t\t\tp.sldM.style.display = displaySlider ? 'block' : 'none';\n\t\t\tp.sldM.style.position = 'absolute';\n\t\t\tp.sldM.style.left = (THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) + 'px';\n\t\t\tp.sldM.style.top = 0 + 'px';\n\t\t\tp.sldM.style.width = (\n\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\n\t\t\t\t\t(displayAlphaSlider ? 0 : Math.max(0, THIS.padding - controlPadding)) // remaining padding to the right edge\n\t\t\t\t) + 'px';\n\t\t\tp.sldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\t\t\tp.sldM.style.cursor = 'default';\n\t\t\tjsc.setData(p.sldM, {\n\t\t\t\tinstance: THIS,\n\t\t\t\tcontrol: 'sld',\n\t\t\t});\n\n\t\t\t// slider pointer inner and outer border\n\t\t\tp.sldPtrIB.style.border =\n\t\t\tp.sldPtrOB.style.border =\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\n\n\t\t\t// slider pointer outer border\n\t\t\tp.sldPtrOB.style.position = 'absolute';\n\t\t\tp.sldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\tp.sldPtrOB.style.top = '0';\n\n\t\t\t// slider pointer middle border\n\t\t\tp.sldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\n\n\t\t\t// slider pointer spacer\n\t\t\tp.sldPtrS.style.width = THIS.sliderSize + 'px';\n\t\t\tp.sldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\n\n\n\t\t\t// alpha slider\n\t\t\tp.asld.style.overflow = 'hidden';\n\t\t\tp.asld.style.width = THIS.sliderSize + 'px';\n\t\t\tp.asld.style.height = THIS.height + 'px';\n\n\t\t\t// alpha slider gradient\n\t\t\tp.asldGrad.draw(THIS.sliderSize, THIS.height, '#000');\n\n\t\t\t// alpha slider border\n\t\t\tp.asldB.style.display = displayAlphaSlider ? 'block' : 'none';\n\t\t\tp.asldB.style.position = 'absolute';\n\t\t\tp.asldB.style.left = (\n\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\n\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 3 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\n\t\t\t\t) + 'px';\n\t\t\tp.asldB.style.top = THIS.padding + 'px';\n\t\t\tp.asldB.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\tp.asldB.style.borderColor = THIS.controlBorderColor;\n\n\t\t\t// alpha slider mouse area\n\t\t\tp.asldM.style.display = displayAlphaSlider ? 'block' : 'none';\n\t\t\tp.asldM.style.position = 'absolute';\n\t\t\tp.asldM.style.left = (\n\t\t\t\t\t(THIS.padding + THIS.width + 2 * THIS.controlBorderWidth + controlPadding) +\n\t\t\t\t\t(displaySlider ? (THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) : 0)\n\t\t\t\t) + 'px';\n\t\t\tp.asldM.style.top = 0 + 'px';\n\t\t\tp.asldM.style.width = (\n\t\t\t\t\t(THIS.sliderSize + 2 * controlPadding + 2 * THIS.controlBorderWidth) +\n\t\t\t\t\tMath.max(0, THIS.padding - controlPadding) // remaining padding to the right edge\n\t\t\t\t) + 'px';\n\t\t\tp.asldM.style.height = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\t\t\tp.asldM.style.cursor = 'default';\n\t\t\tjsc.setData(p.asldM, {\n\t\t\t\tinstance: THIS,\n\t\t\t\tcontrol: 'asld',\n\t\t\t})\n\n\t\t\t// alpha slider pointer inner and outer border\n\t\t\tp.asldPtrIB.style.border =\n\t\t\tp.asldPtrOB.style.border =\n\t\t\t\tTHIS.pointerBorderWidth + 'px solid ' + THIS.pointerBorderColor;\n\n\t\t\t// alpha slider pointer outer border\n\t\t\tp.asldPtrOB.style.position = 'absolute';\n\t\t\tp.asldPtrOB.style.left = -(2 * THIS.pointerBorderWidth + THIS.pointerThickness) + 'px';\n\t\t\tp.asldPtrOB.style.top = '0';\n\n\t\t\t// alpha slider pointer middle border\n\t\t\tp.asldPtrMB.style.border = THIS.pointerThickness + 'px solid ' + THIS.pointerColor;\n\n\t\t\t// alpha slider pointer spacer\n\t\t\tp.asldPtrS.style.width = THIS.sliderSize + 'px';\n\t\t\tp.asldPtrS.style.height = jsc.pub.sliderInnerSpace + 'px';\n\n\n\t\t\t// palette\n\t\t\tp.pal.className = 'jscolor-palette';\n\t\t\tp.pal.style.display = pickerDims.palette.rows ? 'block' : 'none';\n\t\t\tp.pal.style.position = 'absolute';\n\t\t\tp.pal.style.left = THIS.padding + 'px';\n\t\t\tp.pal.style.top = (2 * THIS.controlBorderWidth + 2 * THIS.padding + THIS.height) + 'px';\n\n\t\t\t// palette's color samples\n\n\t\t\tp.pal.innerHTML = '';\n\n\t\t\tvar chessboard = jsc.genColorPreviewCanvas('rgba(0,0,0,0)');\n\n\t\t\tvar si = 0; // color sample's index\n\t\t\tfor (var r = 0; r < pickerDims.palette.rows; r++) {\n\t\t\t\tfor (var c = 0; c < pickerDims.palette.cols && si < THIS._palette.length; c++, si++) {\n\t\t\t\t\tvar sampleColor = THIS._palette[si];\n\t\t\t\t\tvar sampleCssColor = jsc.rgbaColor.apply(null, sampleColor.rgba);\n\n\t\t\t\t\tvar sc = jsc.createEl('div'); // color sample's color\n\t\t\t\t\tsc.style.width = (pickerDims.palette.cellW - 2 * THIS.controlBorderWidth) + 'px';\n\t\t\t\t\tsc.style.height = (pickerDims.palette.cellH - 2 * THIS.controlBorderWidth) + 'px';\n\t\t\t\t\tsc.style.backgroundColor = sampleCssColor;\n\n\t\t\t\t\tvar sw = jsc.createEl('div'); // color sample's wrap\n\t\t\t\t\tsw.className = 'jscolor-palette-sample';\n\t\t\t\t\tsw.style.display = 'block';\n\t\t\t\t\tsw.style.position = 'absolute';\n\t\t\t\t\tsw.style.left = (\n\t\t\t\t\t\t\tpickerDims.palette.cols <= 1 ? 0 :\n\t\t\t\t\t\t\tMath.round(10 * (c * ((pickerDims.contentW - pickerDims.palette.cellW) / (pickerDims.palette.cols - 1)))) / 10\n\t\t\t\t\t\t) + 'px';\n\t\t\t\t\tsw.style.top = (r * (pickerDims.palette.cellH + THIS.paletteSpacing)) + 'px';\n\t\t\t\t\tsw.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\t\t\tsw.style.borderColor = THIS.controlBorderColor;\n\t\t\t\t\tsw.style.cursor = 'pointer';\n\t\t\t\t\tif (sampleColor.rgba[3] !== null && sampleColor.rgba[3] < 1.0) { // only create chessboard background if the sample has transparency\n\t\t\t\t\t\tsw.style.backgroundImage = 'url(\\'' + chessboard.canvas.toDataURL() + '\\')';\n\t\t\t\t\t\tsw.style.backgroundRepeat = 'repeat';\n\t\t\t\t\t\tsw.style.backgroundPosition = 'center center';\n\t\t\t\t\t}\n\t\t\t\t\tjsc.setData(sw, {\n\t\t\t\t\t\tinstance: THIS,\n\t\t\t\t\t\tcontrol: 'palette-sample',\n\t\t\t\t\t\tcolor: sampleColor,\n\t\t\t\t\t})\n\t\t\t\t\tsw.addEventListener('click', jsc.onPaletteSampleClick, false);\n\t\t\t\t\tsw.appendChild(sc);\n\t\t\t\t\tp.pal.appendChild(sw);\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t// the Close button\n\t\t\tfunction setBtnBorder () {\n\t\t\t\tvar insetColors = THIS.controlBorderColor.split(/\\s+/);\n\t\t\t\tvar outsetColor = insetColors.length < 2 ? insetColors[0] : insetColors[1] + ' ' + insetColors[0] + ' ' + insetColors[0] + ' ' + insetColors[1];\n\t\t\t\tp.btn.style.borderColor = outsetColor;\n\t\t\t}\n\t\t\tvar btnPadding = 15; // px\n\t\t\tp.btn.className = 'jscolor-btn-close';\n\t\t\tp.btn.style.display = THIS.closeButton ? 'block' : 'none';\n\t\t\tp.btn.style.position = 'absolute';\n\t\t\tp.btn.style.left = THIS.padding + 'px';\n\t\t\tp.btn.style.bottom = THIS.padding + 'px';\n\t\t\tp.btn.style.padding = '0 ' + btnPadding + 'px';\n\t\t\tp.btn.style.maxWidth = (pickerDims.contentW - 2 * THIS.controlBorderWidth - 2 * btnPadding) + 'px';\n\t\t\tp.btn.style.overflow = 'hidden';\n\t\t\tp.btn.style.height = THIS.buttonHeight + 'px';\n\t\t\tp.btn.style.whiteSpace = 'nowrap';\n\t\t\tp.btn.style.border = THIS.controlBorderWidth + 'px solid';\n\t\t\tsetBtnBorder();\n\t\t\tp.btn.style.color = THIS.buttonColor;\n\t\t\tp.btn.style.font = '12px sans-serif';\n\t\t\tp.btn.style.textAlign = 'center';\n\t\t\tp.btn.style.cursor = 'pointer';\n\t\t\tp.btn.onmousedown = function () {\n\t\t\t\tTHIS.hide();\n\t\t\t};\n\t\t\tp.btnT.style.lineHeight = THIS.buttonHeight + 'px';\n\t\t\tp.btnT.innerHTML = '';\n\t\t\tp.btnT.appendChild(window.document.createTextNode(THIS.closeText));\n\n\t\t\t// reposition the pointers\n\t\t\tredrawPad();\n\t\t\tredrawSld();\n\t\t\tredrawASld();\n\n\t\t\t// If we are changing the owner without first closing the picker,\n\t\t\t// make sure to first deal with the old owner\n\t\t\tif (jsc.picker.owner && jsc.picker.owner !== THIS) {\n\t\t\t\tjsc.removeClass(jsc.picker.owner.targetElement, jsc.pub.activeClassName);\n\t\t\t}\n\n\t\t\t// Set a new picker owner\n\t\t\tjsc.picker.owner = THIS;\n\n\t\t\t// The redrawPosition() method needs picker.owner to be set, that's why we call it here,\n\t\t\t// after setting the owner\n\t\t\tif (THIS.container === window.document.body) {\n\t\t\t\tjsc.redrawPosition();\n\t\t\t} else {\n\t\t\t\tjsc._drawPosition(THIS, 0, 0, 'relative', false);\n\t\t\t}\n\n\t\t\tif (p.wrap.parentNode !== THIS.container) {\n\t\t\t\tTHIS.container.appendChild(p.wrap);\n\t\t\t}\n\n\t\t\tjsc.addClass(THIS.targetElement, jsc.pub.activeClassName);\n\t\t}\n\n\n\t\tfunction redrawPad () {\n\t\t\t// redraw the pad pointer\n\t\t\tvar yChannel = jsc.getPadYChannel(THIS);\n\t\t\tvar x = Math.round((THIS.channels.h / 360) * (THIS.width - 1));\n\t\t\tvar y = Math.round((1 - THIS.channels[yChannel] / 100) * (THIS.height - 1));\n\t\t\tvar crossOuterSize = (2 * THIS.pointerBorderWidth + THIS.pointerThickness + 2 * THIS.crossSize);\n\t\t\tvar ofs = -Math.floor(crossOuterSize / 2);\n\t\t\tjsc.picker.cross.style.left = (x + ofs) + 'px';\n\t\t\tjsc.picker.cross.style.top = (y + ofs) + 'px';\n\n\t\t\t// redraw the slider\n\t\t\tswitch (jsc.getSliderChannel(THIS)) {\n\t\t\tcase 's':\n\t\t\t\tvar rgb1 = jsc.HSV_RGB(THIS.channels.h, 100, THIS.channels.v);\n\t\t\t\tvar rgb2 = jsc.HSV_RGB(THIS.channels.h, 0, THIS.channels.v);\n\t\t\t\tvar color1 = 'rgb(' +\n\t\t\t\t\tMath.round(rgb1[0]) + ',' +\n\t\t\t\t\tMath.round(rgb1[1]) + ',' +\n\t\t\t\t\tMath.round(rgb1[2]) + ')';\n\t\t\t\tvar color2 = 'rgb(' +\n\t\t\t\t\tMath.round(rgb2[0]) + ',' +\n\t\t\t\t\tMath.round(rgb2[1]) + ',' +\n\t\t\t\t\tMath.round(rgb2[2]) + ')';\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n\t\t\t\tbreak;\n\t\t\tcase 'v':\n\t\t\t\tvar rgb = jsc.HSV_RGB(THIS.channels.h, THIS.channels.s, 100);\n\t\t\t\tvar color1 = 'rgb(' +\n\t\t\t\t\tMath.round(rgb[0]) + ',' +\n\t\t\t\t\tMath.round(rgb[1]) + ',' +\n\t\t\t\t\tMath.round(rgb[2]) + ')';\n\t\t\t\tvar color2 = '#000';\n\t\t\t\tjsc.picker.sldGrad.draw(THIS.sliderSize, THIS.height, color1, color2);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// redraw the alpha slider\n\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\n\t\t}\n\n\n\t\tfunction redrawSld () {\n\t\t\tvar sldChannel = jsc.getSliderChannel(THIS);\n\t\t\tif (sldChannel) {\n\t\t\t\t// redraw the slider pointer\n\t\t\t\tvar y = Math.round((1 - THIS.channels[sldChannel] / 100) * (THIS.height - 1));\n\t\t\t\tjsc.picker.sldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\n\t\t\t}\n\n\t\t\t// redraw the alpha slider\n\t\t\tjsc.picker.asldGrad.draw(THIS.sliderSize, THIS.height, THIS.toHEXString());\n\t\t}\n\n\n\t\tfunction redrawASld () {\n\t\t\tvar y = Math.round((1 - THIS.channels.a) * (THIS.height - 1));\n\t\t\tjsc.picker.asldPtrOB.style.top = (y - (2 * THIS.pointerBorderWidth + THIS.pointerThickness) - Math.floor(jsc.pub.sliderInnerSpace / 2)) + 'px';\n\t\t}\n\n\n\t\tfunction isPickerOwner () {\n\t\t\treturn jsc.picker && jsc.picker.owner === THIS;\n\t\t}\n\n\n\t\tfunction onValueKeyDown (ev) {\n\t\t\tif (jsc.eventKey(ev) === 'Enter') {\n\t\t\t\tif (THIS.valueElement) {\n\t\t\t\t\tTHIS.processValueInput(THIS.valueElement.value);\n\t\t\t\t}\n\t\t\t\tTHIS.tryHide();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction onAlphaKeyDown (ev) {\n\t\t\tif (jsc.eventKey(ev) === 'Enter') {\n\t\t\t\tif (THIS.alphaElement) {\n\t\t\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value);\n\t\t\t\t}\n\t\t\t\tTHIS.tryHide();\n\t\t\t}\n\t\t}\n\n\n\t\tfunction onValueChange (ev) {\n\t\t\tif (jsc.getData(ev, 'internal')) {\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t}\n\n\t\t\tvar oldVal = THIS.valueElement.value;\n\n\t\t\tTHIS.processValueInput(THIS.valueElement.value); // this might change the value\n\n\t\t\tjsc.triggerCallback(THIS, 'onChange');\n\n\t\t\tif (THIS.valueElement.value !== oldVal) {\n\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\n\t\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\n\t\t\t}\n\t\t}\n\n\n\t\tfunction onAlphaChange (ev) {\n\t\t\tif (jsc.getData(ev, 'internal')) {\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t}\n\n\t\t\tvar oldVal = THIS.alphaElement.value;\n\n\t\t\tTHIS.processAlphaInput(THIS.alphaElement.value); // this might change the value\n\n\t\t\tjsc.triggerCallback(THIS, 'onChange');\n\n\t\t\t// triggering valueElement's onChange (because changing alpha changes the entire color, e.g. with rgba format)\n\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'change', true, true);\n\n\t\t\tif (THIS.alphaElement.value !== oldVal) {\n\t\t\t\t// value was additionally changed -> let's trigger the change event again, even though it was natively dispatched\n\t\t\t\tjsc.triggerInputEvent(THIS.alphaElement, 'change', true, true);\n\t\t\t}\n\t\t}\n\n\n\t\tfunction onValueInput (ev) {\n\t\t\tif (jsc.getData(ev, 'internal')) {\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t}\n\n\t\t\tif (THIS.valueElement) {\n\t\t\t\tTHIS.fromString(THIS.valueElement.value, jsc.flags.leaveValue);\n\t\t\t}\n\n\t\t\tjsc.triggerCallback(THIS, 'onInput');\n\n\t\t\t// triggering valueElement's onInput\n\t\t\t// (not needed, it was dispatched normally by the browser)\n\t\t}\n\n\n\t\tfunction onAlphaInput (ev) {\n\t\t\tif (jsc.getData(ev, 'internal')) {\n\t\t\t\treturn; // skip if the event was internally triggered by jscolor\n\t\t\t}\n\n\t\t\tif (THIS.alphaElement) {\n\t\t\t\tTHIS.fromHSVA(null, null, null, parseFloat(THIS.alphaElement.value), jsc.flags.leaveAlpha);\n\t\t\t}\n\n\t\t\tjsc.triggerCallback(THIS, 'onInput');\n\n\t\t\t// triggering valueElement's onInput (because changing alpha changes the entire color, e.g. with rgba format)\n\t\t\tjsc.triggerInputEvent(THIS.valueElement, 'input', true, true);\n\t\t}\n\n\n\t\t// let's process the DEPRECATED 'options' property (this will be later removed)\n\t\tif (jsc.pub.options) {\n\t\t\t// let's set custom default options, if specified\n\t\t\tfor (var opt in jsc.pub.options) {\n\t\t\t\tif (jsc.pub.options.hasOwnProperty(opt)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetOption(opt, jsc.pub.options[opt]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t// let's apply configuration presets\n\t\t//\n\t\tvar presetsArr = [];\n\n\t\tif (opts.preset) {\n\t\t\tif (typeof opts.preset === 'string') {\n\t\t\t\tpresetsArr = opts.preset.split(/\\s+/);\n\t\t\t} else if (Array.isArray(opts.preset)) {\n\t\t\t\tpresetsArr = opts.preset.slice(); // slice() to clone\n\t\t\t} else {\n\t\t\t\tconsole.warn('Unrecognized preset value');\n\t\t\t}\n\t\t}\n\n\t\t// always use the 'default' preset. If it's not listed, append it to the end.\n\t\tif (presetsArr.indexOf('default') === -1) {\n\t\t\tpresetsArr.push('default');\n\t\t}\n\n\t\t// let's apply the presets in reverse order, so that should there be any overlapping options,\n\t\t// the formerly listed preset will override the latter\n\t\tfor (var i = presetsArr.length - 1; i >= 0; i -= 1) {\n\t\t\tvar pres = presetsArr[i];\n\t\t\tif (!pres) {\n\t\t\t\tcontinue; // preset is empty string\n\t\t\t}\n\t\t\tif (!jsc.pub.presets.hasOwnProperty(pres)) {\n\t\t\t\tconsole.warn('Unknown preset: %s', pres);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfor (var opt in jsc.pub.presets[pres]) {\n\t\t\t\tif (jsc.pub.presets[pres].hasOwnProperty(opt)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetOption(opt, jsc.pub.presets[pres][opt]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t// let's set specific options for this color picker\n\t\tvar nonProperties = [\n\t\t\t// these options won't be set as instance properties\n\t\t\t'preset',\n\t\t];\n\t\tfor (var opt in opts) {\n\t\t\tif (opts.hasOwnProperty(opt)) {\n\t\t\t\tif (nonProperties.indexOf(opt) === -1) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetOption(opt, opts[opt]);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t//\n\t\t// Install the color picker on chosen element(s)\n\t\t//\n\n\n\t\t// Determine picker's container element\n\t\tif (this.container === undefined) {\n\t\t\tthis.container = window.document.body; // default container is BODY element\n\n\t\t} else { // explicitly set to custom element\n\t\t\tthis.container = jsc.node(this.container);\n\t\t}\n\n\t\tif (!this.container) {\n\t\t\tthrow new Error('Cannot instantiate color picker without a container element');\n\t\t}\n\n\n\t\t// Fetch the target element\n\t\tthis.targetElement = jsc.node(targetElement);\n\n\t\tif (!this.targetElement) {\n\t\t\t// temporarily customized error message to help with migrating from versions prior to 2.2\n\t\t\tif (typeof targetElement === 'string' && /^[a-zA-Z][\\w:.-]*$/.test(targetElement)) {\n\t\t\t\t// targetElement looks like valid ID\n\t\t\t\tvar possiblyId = targetElement;\n\t\t\t\tthrow new Error('If \\'' + possiblyId + '\\' is supposed to be an ID, please use \\'#' + possiblyId + '\\' or any valid CSS selector.');\n\t\t\t}\n\n\t\t\tthrow new Error('Cannot instantiate color picker without a target element');\n\t\t}\n\n\t\tif (this.targetElement.jscolor && this.targetElement.jscolor instanceof jsc.pub) {\n\t\t\tthrow new Error('Color picker already installed on this element');\n\t\t}\n\n\n\t\t// link this instance with the target element\n\t\tthis.targetElement.jscolor = this;\n\t\tjsc.addClass(this.targetElement, jsc.pub.className);\n\n\t\t// register this instance\n\t\tjsc.instances.push(this);\n\n\n\t\t// if target is BUTTON\n\t\tif (jsc.isButton(this.targetElement)) {\n\n\t\t\tif (this.targetElement.type.toLowerCase() !== 'button') {\n\t\t\t\t// on buttons, always force type to be 'button', e.g. in situations the target <button> has no type\n\t\t\t\t// and thus defaults to 'submit' and would submit the form when clicked\n\t\t\t\tthis.targetElement.type = 'button';\n\t\t\t}\n\n\t\t\tif (jsc.isButtonEmpty(this.targetElement)) { // empty button\n\t\t\t\t// it is important to clear element's contents first.\n\t\t\t\t// if we're re-instantiating color pickers on DOM that has been modified by changing page's innerHTML,\n\t\t\t\t// we would keep adding more non-breaking spaces to element's content (because element's contents survive\n\t\t\t\t// innerHTML changes, but picker instances don't)\n\t\t\t\tjsc.removeChildren(this.targetElement);\n\n\t\t\t\t// let's insert a non-breaking space\n\t\t\t\tthis.targetElement.appendChild(window.document.createTextNode('\\xa0'));\n\n\t\t\t\t// set min-width = previewSize, if not already greater\n\t\t\t\tvar compStyle = jsc.getCompStyle(this.targetElement);\n\t\t\t\tvar currMinWidth = parseFloat(compStyle['min-width']) || 0;\n\t\t\t\tif (currMinWidth < this.previewSize) {\n\t\t\t\t\tjsc.setStyle(this.targetElement, {\n\t\t\t\t\t\t'min-width': this.previewSize + 'px',\n\t\t\t\t\t}, this.forceStyle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Determine the value element\n\t\tif (this.valueElement === undefined) {\n\t\t\tif (jsc.isTextInput(this.targetElement)) {\n\t\t\t\t// for text inputs, default valueElement is targetElement\n\t\t\t\tthis.valueElement = this.targetElement;\n\t\t\t} else {\n\t\t\t\t// leave it undefined\n\t\t\t}\n\n\t\t} else if (this.valueElement === null) { // explicitly set to null\n\t\t\t// leave it null\n\n\t\t} else { // explicitly set to custom element\n\t\t\tthis.valueElement = jsc.node(this.valueElement);\n\t\t}\n\n\t\t// Determine the alpha element\n\t\tif (this.alphaElement) {\n\t\t\tthis.alphaElement = jsc.node(this.alphaElement);\n\t\t}\n\n\t\t// Determine the preview element\n\t\tif (this.previewElement === undefined) {\n\t\t\tthis.previewElement = this.targetElement; // default previewElement is targetElement\n\n\t\t} else if (this.previewElement === null) { // explicitly set to null\n\t\t\t// leave it null\n\n\t\t} else { // explicitly set to custom element\n\t\t\tthis.previewElement = jsc.node(this.previewElement);\n\t\t}\n\n\t\t// valueElement\n\t\tif (this.valueElement && jsc.isTextInput(this.valueElement)) {\n\n\t\t\t// If the value element has onInput event already set, we need to detach it and attach AFTER our listener.\n\t\t\t// otherwise the picker instance would still contain the old color when accessed from the onInput handler.\n\t\t\tvar valueElementOrigEvents = {\n\t\t\t\tonInput: this.valueElement.oninput\n\t\t\t};\n\t\t\tthis.valueElement.oninput = null;\n\n\t\t\tthis.valueElement.addEventListener('keydown', onValueKeyDown, false);\n\t\t\tthis.valueElement.addEventListener('change', onValueChange, false);\n\t\t\tthis.valueElement.addEventListener('input', onValueInput, false);\n\t\t\t// the original event listener must be attached AFTER our handler (to let it first set picker's color)\n\t\t\tif (valueElementOrigEvents.onInput) {\n\t\t\t\tthis.valueElement.addEventListener('input', valueElementOrigEvents.onInput, false);\n\t\t\t}\n\n\t\t\tthis.valueElement.setAttribute('autocomplete', 'off');\n\t\t\tthis.valueElement.setAttribute('autocorrect', 'off');\n\t\t\tthis.valueElement.setAttribute('autocapitalize', 'off');\n\t\t\tthis.valueElement.setAttribute('spellcheck', false);\n\t\t}\n\n\t\t// alphaElement\n\t\tif (this.alphaElement && jsc.isTextInput(this.alphaElement)) {\n\t\t\tthis.alphaElement.addEventListener('keydown', onAlphaKeyDown, false);\n\t\t\tthis.alphaElement.addEventListener('change', onAlphaChange, false);\n\t\t\tthis.alphaElement.addEventListener('input', onAlphaInput, false);\n\n\t\t\tthis.alphaElement.setAttribute('autocomplete', 'off');\n\t\t\tthis.alphaElement.setAttribute('autocorrect', 'off');\n\t\t\tthis.alphaElement.setAttribute('autocapitalize', 'off');\n\t\t\tthis.alphaElement.setAttribute('spellcheck', false);\n\t\t}\n\n\t\t// determine initial color value\n\t\t//\n\t\tvar initValue = 'FFFFFF';\n\n\t\tif (this.value !== undefined) {\n\t\t\tinitValue = this.value; // get initial color from the 'value' property\n\t\t} else if (this.valueElement && this.valueElement.value !== undefined) {\n\t\t\tinitValue = this.valueElement.value; // get initial color from valueElement's value\n\t\t}\n\n\t\t// determine initial alpha value\n\t\t//\n\t\tvar initAlpha = undefined;\n\n\t\tif (this.alpha !== undefined) {\n\t\t\tinitAlpha = (''+this.alpha); // get initial alpha value from the 'alpha' property\n\t\t} else if (this.alphaElement && this.alphaElement.value !== undefined) {\n\t\t\tinitAlpha = this.alphaElement.value; // get initial color from alphaElement's value\n\t\t}\n\n\t\t// determine current format based on the initial color value\n\t\t//\n\t\tthis._currentFormat = null;\n\n\t\tif (['auto', 'any'].indexOf(this.format.toLowerCase()) > -1) {\n\t\t\t// format is 'auto' or 'any' -> let's auto-detect current format\n\t\t\tvar color = jsc.parseColorString(initValue);\n\t\t\tthis._currentFormat = color ? color.format : 'hex';\n\t\t} else {\n\t\t\t// format is specified\n\t\t\tthis._currentFormat = this.format.toLowerCase();\n\t\t}\n\n\n\t\t// let's parse the initial color value and expose color's preview\n\t\tthis.processValueInput(initValue);\n\n\t\t// let's also parse and expose the initial alpha value, if any\n\t\t//\n\t\t// Note: If the initial color value contains alpha value in it (e.g. in rgba format),\n\t\t// this will overwrite it. So we should only process alpha input if there was initial\n\t\t// alpha explicitly set, otherwise we could needlessly lose initial value's alpha\n\t\tif (initAlpha !== undefined) {\n\t\t\tthis.processAlphaInput(initAlpha);\n\t\t}\n\n\t\tif (this.random) {\n\t\t\t// randomize the initial color value\n\t\t\tthis.randomize.apply(this, Array.isArray(this.random) ? this.random : []);\n\t\t}\n\n\t}\n\n};\n\n\n//================================\n// Public properties and methods\n//================================\n\n//\n// These will be publicly available via jscolor.<name> and JSColor.<name>\n//\n\n\n// class that will be set to elements having jscolor installed on them\njsc.pub.className = 'jscolor';\n\n\n// class that will be set to elements having jscolor active on them\njsc.pub.activeClassName = 'jscolor-active';\n\n\n// whether to try to parse the options string by evaluating it using 'new Function()'\n// in case it could not be parsed with JSON.parse()\njsc.pub.looseJSON = true;\n\n\n// presets\njsc.pub.presets = {};\n\n// built-in presets\njsc.pub.presets['default'] = {}; // baseline for customization\n\njsc.pub.presets['light'] = { // default color scheme\n\tbackgroundColor: 'rgba(255,255,255,1)',\n\tcontrolBorderColor: 'rgba(187,187,187,1)',\n\tbuttonColor: 'rgba(0,0,0,1)',\n};\njsc.pub.presets['dark'] = {\n\tbackgroundColor: 'rgba(51,51,51,1)',\n\tcontrolBorderColor: 'rgba(153,153,153,1)',\n\tbuttonColor: 'rgba(240,240,240,1)',\n};\n\njsc.pub.presets['small'] = { width:101, height:101, padding:10, sliderSize:14, paletteCols:8 };\njsc.pub.presets['medium'] = { width:181, height:101, padding:12, sliderSize:16, paletteCols:10 }; // default size\njsc.pub.presets['large'] = { width:271, height:151, padding:12, sliderSize:24, paletteCols:15 };\n\njsc.pub.presets['thin'] = { borderWidth:1, controlBorderWidth:1, pointerBorderWidth:1 }; // default thickness\njsc.pub.presets['thick'] = { borderWidth:2, controlBorderWidth:2, pointerBorderWidth:2 };\n\n\n// size of space in the sliders\njsc.pub.sliderInnerSpace = 3; // px\n\n// transparency chessboard\njsc.pub.chessboardSize = 8; // px\njsc.pub.chessboardColor1 = '#666666';\njsc.pub.chessboardColor2 = '#999999';\n\n// preview separator\njsc.pub.previewSeparator = ['rgba(255,255,255,.65)', 'rgba(128,128,128,.65)'];\n\n\n// Initializes jscolor\njsc.pub.init = function () {\n\tif (jsc.initialized) {\n\t\treturn;\n\t}\n\n\t// attach some necessary handlers\n\twindow.document.addEventListener('mousedown', jsc.onDocumentMouseDown, false);\n\twindow.document.addEventListener('keyup', jsc.onDocumentKeyUp, false);\n\twindow.addEventListener('resize', jsc.onWindowResize, false);\n\twindow.addEventListener('scroll', jsc.onWindowScroll, false);\n\n\t// install jscolor on current DOM\n\tjsc.pub.install();\n\n\tjsc.initialized = true;\n\n\t// call functions waiting in the queue\n\twhile (jsc.readyQueue.length) {\n\t\tvar func = jsc.readyQueue.shift();\n\t\tfunc();\n\t}\n};\n\n\n// Installs jscolor on current DOM tree\njsc.pub.install = function (rootNode) {\n\tvar success = true;\n\n\ttry {\n\t\tjsc.installBySelector('[data-jscolor]', rootNode);\n\t} catch (e) {\n\t\tsuccess = false;\n\t\tconsole.warn(e);\n\t}\n\n\t// for backward compatibility with DEPRECATED installation using class name\n\tif (jsc.pub.lookupClass) {\n\t\ttry {\n\t\t\tjsc.installBySelector(\n\t\t\t\t(\n\t\t\t\t\t'input.' + jsc.pub.lookupClass + ', ' +\n\t\t\t\t\t'button.' + jsc.pub.lookupClass\n\t\t\t\t),\n\t\t\t\trootNode\n\t\t\t);\n\t\t} catch (e) {}\n\t}\n\n\treturn success;\n};\n\n\n// Registers function to be called as soon as jscolor is initialized (or immediately, if it already is).\n//\njsc.pub.ready = function (func) {\n\tif (typeof func !== 'function') {\n\t\tconsole.warn('Passed value is not a function');\n\t\treturn false;\n\t}\n\n\tif (jsc.initialized) {\n\t\tfunc();\n\t} else {\n\t\tjsc.readyQueue.push(func);\n\t}\n\treturn true;\n};\n\n\n// Triggers given input event(s) (e.g. 'input' or 'change') on all color pickers.\n//\n// It is possible to specify multiple events separated with a space.\n// If called before jscolor is initialized, then the events will be triggered after initialization.\n//\njsc.pub.trigger = function (eventNames) {\n\tvar triggerNow = function () {\n\t\tjsc.triggerGlobal(eventNames);\n\t};\n\n\tif (jsc.initialized) {\n\t\ttriggerNow();\n\t} else {\n\t\tjsc.pub.ready(triggerNow);\n\t}\n};\n\n\n// Hides current color picker box\njsc.pub.hide = function () {\n\tif (jsc.picker && jsc.picker.owner) {\n\t\tjsc.picker.owner.hide();\n\t}\n};\n\n\n// Returns a data URL of a gray chessboard image that indicates transparency\njsc.pub.chessboard = function (color) {\n\tif (!color) {\n\t\tcolor = 'rgba(0,0,0,0)';\n\t}\n\tvar preview = jsc.genColorPreviewCanvas(color);\n\treturn preview.canvas.toDataURL();\n};\n\n\n// Returns a data URL of a gray chessboard image that indicates transparency\njsc.pub.background = function (color) {\n\tvar backgrounds = [];\n\n\t// CSS gradient for background color preview\n\tbackgrounds.push(jsc.genColorPreviewGradient(color));\n\n\t// data URL of generated PNG image with a gray transparency chessboard\n\tvar preview = jsc.genColorPreviewCanvas();\n\tbackgrounds.push([\n\t\t'url(\\'' + preview.canvas.toDataURL() + '\\')',\n\t\t'left top',\n\t\t'repeat',\n\t].join(' '));\n\n\treturn backgrounds.join(', ');\n};\n\n\n//\n// DEPRECATED properties and methods\n//\n\n\n// DEPRECATED. Use jscolor.presets.default instead.\n//\n// Custom default options for all color pickers, e.g. { hash: true, width: 300 }\njsc.pub.options = {};\n\n\n// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\n//\n// By default, we'll search for all elements with class=\"jscolor\" and install a color picker on them.\n//\n// You can change what class name will be looked for by setting the property jscolor.lookupClass\n// anywhere in your HTML document. To completely disable the automatic lookup, set it to null.\n//\njsc.pub.lookupClass = 'jscolor';\n\n\n// DEPRECATED. Use data-jscolor attribute instead, which installs jscolor on given element.\n//\n// Install jscolor on all elements that have the specified class name\njsc.pub.installByClassName = function () {\n\tconsole.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor=\"\" attribute instead of a class name.' + jsc.docsRef);\n\treturn false;\n};\n\n\njsc.register();\n\n\nreturn jsc.pub;\n\n\n})(); // END jscolor\n\n\nif (typeof window.jscolor === 'undefined') {\n\twindow.jscolor = window.JSColor = jscolor;\n}\n\n\n// END jscolor code\n\nreturn jscolor;\n\n}); // END factory\n"]},"metadata":{},"sourceType":"module"}